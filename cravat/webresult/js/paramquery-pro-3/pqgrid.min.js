/**
 * ParamQuery Pro v3.3.1
 * 
 * Copyright (c) 2012-2016 Paramvir Dhindsa (http://paramquery.com)
 * Released under Commercial license
 * http://paramquery.com/pro/license
 * 
 */
(function(k){var m=k.ui.autocomplete.prototype,g=m._renderMenu,c=m._renderItem;m._renderMenu=function(a,b){g.call(this,a,b);var f=this.options.selectItem;if(f&&f.on){var f=f.cls,f=void 0===f?"ui-state-highlight":f,l=this.element.val();l&&f&&k("a",a).filter(function(){return k(this).text()===l}).addClass(f)}};m._renderItem=function(a,b){var f=c.call(this,a,b),l=this.options.highlightText;if(l&&l.on){var d=this.element.val();if(d){var d=new RegExp("("+d+")","i"),q=b.label;if(d.test(q)){var n=l.style,
l=l.cls,q=q.replace(d,"<span style='"+(void 0===n?"font-weight:bold;":n)+"' class='"+(void 0===l?"":l)+"'>$1</span>");f.find("a").html(q)}}}return f};var m=k.paramquery=k.paramquery||{},a=function(a,b,f,l){b=b.slice();for(var d=[],c=0,n=b.length;c<n;c++){var h=b[c],p=h.cb,A=h.one;if(A){if(h._oncerun)continue;h._oncerun=!0}!1===p.call(a,f,l)&&(f.preventDefault(),f.stopPropagation());A&&d.push(c);if(f.isImmediatePropagationStopped())break}if(d.length)for(c=d.length-1;0<=c;c--)b.splice(d[c],1)};m._trigger=
function(e,b,f){var l,d,c=this.listeners,n=c[e],h=this.options,p=h.allEvents,A=h.bubble,r=this.element,s=h[e];f=f||{};b=k.Event(b);b.type=this.widgetName+":"+e;b.target=r[0];if(d=b.originalEvent)for(l in d)l in b||(b[l]=d[l]);p&&"function"==typeof p&&p.call(this,b,f);if(n&&n.length&&(a(this,n,b,f),b.isImmediatePropagationStopped())||h.trigger&&(r[A?"trigger":"triggerHandler"](b,f),b.isImmediatePropagationStopped()))return!b.isDefaultPrevented();s&&!1===s.call(this,b,f)&&(b.preventDefault(),b.stopPropagation());
(n=c[e+"Done"])&&n.length&&a(this,n,b,f);return!b.isDefaultPrevented()};m.on=function(){var a=arguments;if("boolean"==typeof a[0])var b=a[0],f=a[1],l=a[2],a=a[3];else f=a[0],l=a[1],a=a[2];for(var f=f.split(" "),d=0;d<f.length;d++){var c=f[d];if(c){var n=l,h=a,p=b,A=this.listeners[c];A||(A=this.listeners[c]=[]);A[p?"unshift":"push"]({cb:n,one:h})}}return this};m.one=function(){for(var a=arguments.length,b=[],f=0;f<a;f++)b[f]=arguments[f];b[a]=!0;return this.on.apply(this,b)};m.off=function(a,b){for(var f=
a.split(" "),l=0;l<f.length;l++){var d=f[l];if(d){var c=d;if(d=b){if(c=this.listeners[c]){for(var n=[],h=0,p=c.length;h<p;h++)d==c[h].cb&&n.push(h);if(n.length)for(h=n.length-1;0<=h;h--)c.splice(n[h],1)}}else delete this.listeners[c]}}return this};k.widget("paramquery.pqTooltip",k.ui.tooltip,{options:{items:"td.pq-has-tooltip,td[title]",position:{my:"center top",at:"center bottom"},content:function(){var a=k(this),b=a.closest(".pq-grid").pqGrid("getInstance").grid,f=b.getCellIndices({$td:a});return(b=
b.data({rowIndx:f.rowIndx,dataIndx:f.dataIndx,data:"pq_valid"}).data)?(a=b.icon,b=b.msg,(""==a?"":"<span class='ui-icon "+a+" pq-tooltip-icon'></span>")+(null!=b?b:"")):a.attr("title")}},_create:function(){this._super();var a=this.element,b=this.eventNamespace;a.on("pqtooltipopen"+b,function(b,a){var d=k(b.target),e=k(b.originalEvent.target);e.on("remove",function(h){d.pqTooltip("close",h,!0)});a.tooltip.css("zIndex",e.zIndex()+5);if(d.is(".pq-grid")){var c=d.pqGrid("getCellIndices",{$td:e}),h=c.dataIndx,
p;(p=d.pqGrid("getRowData",{rowIndx:c.rowIndx}))&&(p=p.pq_celldata)&&(p=p[h])&&(p=p.pq_valid)&&(h=p,c=h.style,a.tooltip.addClass(h.cls),h=a.tooltip.attr("style"),a.tooltip.attr("style",h+";"+c));d.find("div.pq-sb-horiz,div.pq-sb-vert").on("pqscrollbardrag",function(h,p){h.currentTarget=e[0];d.pqTooltip("close",h,!0)})}});a.on("pqtooltipclose"+b,function(b,a){var d=k(b.target);k(b.originalEvent.target).off("remove");d.is(".pq-grid")&&d.find("div.pq-sb-horiz,div.pq-sb-vert").off("pqscrollbardrag")})}})})(jQuery);
(function(k){var m=window.pq=m||{},g=k.paramquery;m.arrayUnique=function(b,f){var a=[],d,e=b.length,c,h={},p;for(d=0;d<e;d++)c=b[d],p=f?c[f]:c,h.hasOwnProperty(p)||(h[p]=1,a.push(c));return a};g.select=function(b){var f=b.options,a=b.groupIndx,d=b.labelIndx,e=b.valueIndx,c=null!=d&&null!=e,h=null!=a,p=b.prepend,A=b.dataMap,r,s,u;b=["<select ",b.attr," >"];if(p)for(var t in p)b.push('<option value="',t,'">',p[t],"</option>");if(f&&f.length){for(var p=0,g=f.length;p<g;p++){var k=f[p];if(c){var z=k[e],
C=k.pq_disabled?'disabled="disabled" ':"",B=k.pq_selected?'selected="selected" ':"";if(null!=z){if(A){r={};for(u=0;u<A.length;u++){var w=A[u];r[w]=k[w]}r="data-map='"+JSON.stringify(r)+"'"}else r="";u=r;h&&(w=k.pq_disabled_group?'disabled="disabled" ':"",r=k[a],s!=r&&(null!=s&&b.push("</optgroup>"),b.push('<optgroup label="',r,'" ',w," >"),s=r));d==e?b.push("<option ",B,C,u,">",z,"</option>"):b.push("<option ",B,C,u,' value="',z,'">',k[d],"</option>")}}else if("object"==typeof k)for(t in k)b.push('<option value="',
t,'">',k[t],"</option>");else b.push("<option>",k,"</option>")}h&&b.push("</optgroup>")}b.push("</select>");return b.join("")};k.fn.pqval=function(b){if(b){if(b.incr)return b=this.data("pq_value"),this.prop("indeterminate",!1),b?(b=!1,this.prop("checked",!1)):!1===b?(b=null,this.prop("indeterminate",!0),this.prop("checked",!1)):(b=!0,this.prop("checked",!0)),this.data("pq_value",b),b;b=b.val;this.data("pq_value",b);this.prop("indeterminate",!1);null==b?(this.prop("indeterminate",!0),this.prop("checked",
!1)):b?this.prop("checked",!0):this.prop("checked",!1);return this}return this.data("pq_value")};g.xmlToArray=function(b,f){var a=f.itemParent,d=f.itemNames,e=[];k(b).find(a).each(function(b,h){var p=k(h),A=[];k(d).each(function(h,b){A.push(p.find(b).text().replace(/\r|\n|\t/g,""))});e.push(A)});return e};g.xmlToJson=function(b,f){var a=f.itemParent,d=f.itemNames,e=[];k(b).find(a).each(function(b,h){for(var p=k(h),A={},f=0,a=d.length;f<a;f++){var l=d[f];A[l]=p.find(l).text().replace(/\r|\n|\t/g,"")}e.push(A)});
return e};g.tableToArray=function(b){var f=[],a=[];b=k(b).children("tbody").children("tr");var d=b.length?k(b[0]):k(),e=1<b.length?k(b[1]):k();d.children("th,td").each(function(b,h){var p=k(h),A=p.html(),p=p.width(),a="left";if(e.length)var d=e.find("td:eq("+b+")").attr("align"),a=d?d:a;f.push({title:A,width:p,dataType:"string",align:a,dataIndx:b})});b.each(function(b,h){if(0!=b){var p=[];k(h).children("td").each(function(h,b){p.push(k.trim(k(b).html()))});a.push(p)}});return{data:a,colModel:f}};
var c={};g.formatCurrency=function(b,f){var a=parseFloat(b);if(!isNaN(a)){var d=0>a,e;a:{var n=f,h,p;if(n){n=n.split(":");n=d&&1<n.length?n[1]:n[0];if(h=c[n]){e=h;break a}p=/^([^#]*|&#[^#]*)?[\,\.#0]*?([\,\s\.]?)([#0]*)([\,\s\.]?)([0]*?)(\s*[^#^0]*|&#[^#]*)?$/;(p=n.match(p))&&p.length&&(h={symbol:p[1]||"",thouSep:p[2],thousand:p[3].length,decSep:p[4],decimal:p[5].length,symbolEnd:p[6]||""},c[n]=h)}e=h=h||{symbol:"",symbolEnd:"",thouSep:",",thousand:3,decSep:".",decimal:2}}n=e.symbol;h=e.symbolEnd;
p=e.thousand;var A=e.thouSep,r=e.decSep,s=e.decimal,a=a.toFixed(s);e=a.length;var u=s+r.length,s=a.substring(0,e-u),a=a.substring(e-u+r.length,e);e=s.match(/\d/g).reverse();s=[];for(u=0;u<e.length;u++)0<u&&0==u%p&&s.push(A),s.push(e[u]);s=s.reverse();s=s.join("");return(d?"-":"")+n+s+r+a+h}};m.formatNumber=g.formatCurrency;m.validation={is:function(b,a){if("string"==b||!b)return!0;b=b.substring(0,1).toUpperCase()+b.substring(1,b.length);return this["is"+b](a)},isFloat:function(b){var a=parseFloat(b);
return isNaN(a)||a!=b?!1:!0},isInteger:function(b){var a=parseInt(b);return isNaN(a)||a!=b?!1:!0},isDate:function(b){b=Date.parse(b);return isNaN(b)?!1:!0}};var a=[],e=g.toLetter=function(b){var f=a[b];if(!f){b++;var l=b%26,f=b/26|0,l=l?String.fromCharCode(64+l):(--f,"Z"),f=f?e(f-1)+l:l;b--;a[b]=f}return f};g.generateData=function(b,a){for(var l=[],d=0;d<a;d++)l[d]=e(d);for(var c=[],d=0;d<b;d++)for(var n=c[d]=[],h=0;h<a;h++)n[h]=l[h]+(d+1);return c}})(jQuery);
(function(k){function m(b,a,e){return b?k("<span tabindex='0' rel='tooltip' data-placement='top' title='"+a+"' class='btn btn-xs "+e+"'></span>"):k("<span class='pq-ui-button ui-widget-header' tabindex='0' rel='tooltip' title='"+a+"'><span class='ui-icon ui-icon-"+e+"'></span></span>")}function g(b,a){b.bind("click keydown",function(b){if("keydown"!=b.type||b.keyCode==k.ui.keyCode.ENTER)return a.call(this,b)})}function c(b,a,e){a[e?"addClass":"removeClass"]("disabled").css("pointer-events",e?"none":
"").attr("tabindex",e?"":"0")}var a={options:{bootstrap:{on:!1,pager:"",nextIcon:"glyphicon glyphicon-forward",prevIcon:"glyphicon glyphicon-backward",firstIcon:"glyphicon glyphicon-step-backward",lastIcon:"glyphicon glyphicon-step-forward",refreshIcon:"glyphicon glyphicon-refresh"},curPage:0,totalPages:0,totalRecords:0,msg:"",rPPOptions:[10,20,30,40,50,100],rPP:20},_regional:{strDisplay:"Displaying {0} to {1} of {2} items.",strFirstPage:"First Page",strLastPage:"Last Page",strNextPage:"Next Page",
strPage:"Page {0} of {1}",strPrevPage:"Previous Page",strRefresh:"Refresh",strRpp:"Records per page:{0}"}};k.extend(a.options,a._regional);a._create=function(){var b=this,a=this.options,e=this.element,d=a.bootstrap,c=d.on;this.listeners={};e.addClass("pq-pager "+(c?d.pager:""));this.first=m(c,a.strFirstPage,c?d.firstIcon:"seek-first").appendTo(e);g(this.first,function(d){1<a.curPage&&b._onChange(d,1)});this.prev=m(c,a.strPrevPage,c?d.prevIcon:"seek-prev").appendTo(e);g(this.prev,function(d){1<a.curPage&&
b._onChange(d,a.curPage-1)});k("<span class='pq-separator'></span>").appendTo(e);this.pageHolder=k("<span class='pq-page-placeholder'></span>").appendTo(e);k("<span class='pq-separator'></span>").appendTo(e);this.next=m(c,a.strNextPage,c?d.nextIcon:"seek-next").appendTo(e);g(this.next,function(d){a.curPage<a.totalPages&&b._onChange(d,a.curPage+1)});this.last=m(c,a.strLastPage,c?d.lastIcon:"seek-end").appendTo(e);g(this.last,function(d){a.curPage!==a.totalPages&&b._onChange(d,a.totalPages)});k("<span class='pq-separator'></span>").appendTo(e);
this.rPPHolder=k("<span class='pq-page-placeholder'></span>").appendTo(e);this.$refresh=m(c,a.strRefresh,c?d.refreshIcon:"refresh").appendTo(e);g(this.$refresh,function(a){if(!1===b._trigger("beforeRefresh",a))return!1;b._trigger("refresh",a)});k("<span class='pq-separator'></span>").appendTo(e);this.$msg=k("<span class='pq-pager-msg'></span>").appendTo(e);this._refresh()};a._destroy=function(){this.element.empty().removeClass("pq-pager").enableSelection()};a._setOption=function(b,a){if("curPage"==
b||"totalPages"==b)a*=1;this._super(b,a)};a._setOptions=function(b){var a,e=!1,d=this.options;for(a in b){var c=b[a],n=typeof c;"string"==n||"number"==n?c!=d[a]&&(this._setOption(a,c),e=!0):"function"==typeof c.splice||k.isPlainObject(c)?JSON.stringify(c)!=JSON.stringify(d[a])&&(this._setOption(a,c),e=!0):c!=d[a]&&(this._setOption(a,c),e=!0)}e&&this._refresh();return this};k.widget("paramquery.pqPager",a);pq.pager=function(b,a){var e=k(b).pqPager(a);return e.data("paramqueryPqPager")||e.data("paramquery-pqPager")};
var e=k.paramquery;e.pqPager.regional={};e.pqPager.regional.en=a._regional;a=e.pqPager.prototype;e.pqPager.defaults=a.options;a._refreshPage=function(){var b=this;this.pageHolder.empty();for(var a=this.options,e=a.bootstrap,d=a.strPage.split(" "),c=[],n=0,h=d.length;n<h;n++){var p=d[n];"{0}"==p?c.push("<input type='text' tabindex='0' class='pq-pager-input ",e.on?"":"ui-corner-all","' />"):"{1}"==p?c.push("<span class='total'></span>"):c.push("<span>",p,"</span>")}e=c.join("");e=k(e).appendTo(this.pageHolder);
this.page=e.filter("input").bind("change",function(h){var p=k(this),d=p.val();if(isNaN(d)||1>d)return p.val(a.curPage),!1;d=parseInt(d);if(d>a.totalPages||!1===b._onChange(h,d))return p.val(a.curPage),!1});this.$total=e.filter("span.total")};a._onChange=function(b,a){if(!1===this._trigger("beforeChange",b,{curPage:a})||!1===this._trigger("change",b,{curPage:a}))return!1;this.option({curPage:a})};a._refresh=function(){this._refreshPage();var b=this,a=this.options,e=a.bootstrap;this.rPPHolder.empty();
if(a.strRpp){var d=a.rPPOptions,q=a.strRpp;if(-1!=q.indexOf("{0}")){for(var e=["<select class='",e.on?"":"ui-corner-all","'>"],n=0,h=d.length;n<h;n++){var p=d[n];e.push('<option value="',p,'">',p,"</option>")}e.push("</select>");d=e.join("");q=q.replace("{0}","</span>"+d);q="<span>"+q+"<span class='pq-separator'></span>"}else q="<span>"+q+"</span><span class='pq-separator'></span>";this.$rPP=k(q).appendTo(this.rPPHolder).filter("select").val(a.rPP).change(function(h){var p=k(this),a=p.val();if(!1===
b._trigger("beforeChange",h,{rPP:a}))return p.val(b.options.rPP),!1;!1!==b._trigger("change",h,{rPP:a})&&(b.options.rPP=a)})}q=a.bootstrap.on;d=a.curPage>=a.totalPages;c(q,this.next,d);c(q,this.last,d);d=1>=a.curPage;c(q,this.first,d);c(q,this.prev,d);this.page.val(a.curPage);this.$total.text(a.totalPages);0<this.options.totalRecords?(q=a.rPP,d=a.curPage,e=a.totalRecords,n=d*q,n>e&&(n=e),a=a.strDisplay,a=a.replace("{0}",(d-1)*q+1),a=a.replace("{1}",n),a=a.replace("{2}",e),this.$msg.html(a)):this.$msg.html("")};
a.getInstance=function(){return{pager:this}};a._trigger=e._trigger;a.on=e.on;a.one=e.one;a.off=e.off})(jQuery);
(function(k){function m(a,b){return a?"<div class='"+b+"'></div>":"<div class='ui-icon ui-icon-"+b+"'></div>"}var g=k.paramquery,c={options:{length:200,num_eles:3,trigger:!1,cur_pos:0,ratio:0,timeout:350,pace:"optimum",direction:"vertical",bootstrap:{on:!1,slider:"btn btn-default",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",left:"glyphicon glyphicon-chevron-left",right:"glyphicon glyphicon-chevron-right"},theme:!1},_destroy:function(){k(document).off("."+this.eventNamespace);
this.element.removeClass("pq-sb pq-sb-vert pq-sb-vert-t pq-sb-vert-wt").enableSelection().removeClass("pq-sb-horiz pq-sb-horiz-t pq-sb-horiz-wt").unbind("click.pq-scrollbar").empty();this.element.removeData()},_create:function(){this.listeners={};this._createLayout()},_setOption:function(a,b){var f=this.options;"disabled"==a?(this._super(a,b),!0==b?this.$slider.draggable("disable"):this.$slider.draggable("enable")):"theme"==a?(f[a]=b,this._createLayout()):"ratio"==a?0<=b&&1>=b&&(f[a]=b):f[a]=b},_setOptions:function(){this._super.apply(this,
arguments);this.refresh()}};k.widget("paramquery.pqScrollBar",c);pq.scrollbar=function(a,b){var f=k(a).pqScrollBar(b);return f.data("paramqueryPqScrollBar")||f.data("paramquery-pqScrollBar")};c=g.pqScrollBar.prototype;g.pqScrollBar.defaults=c.options;c._createLayout=function(){var a=this,b=this.options,f=b.bootstrap,c=f.on,d=b.direction,q=this.eventNamespace,n=b.theme,h=this.element.empty();"vertical"==d?(h.removeClass("pq-sb-vert-t pq-sb-vert-wt").addClass("pq-sb pq-sb-vert"),n?(h.addClass("pq-sb-vert-t"),
h[0].innerHTML=["<div class='top-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-top","'>",m(c,c?f.up:"triangle-1-n"),"</div><div class='pq-sb-slider ",c?f.slider:"ui-corner-all ui-state-default","'></div><div class='bottom-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-bottom","'>",m(c,c?f.down:"triangle-1-s"),"</div>"].join("")):(h.addClass("pq-sb-vert-wt"),h[0].innerHTML="<div class='top-btn pq-sb-btn'></div><div class='pq-sb-slider'><div class='vert-slider-top'></div><div class='vert-slider-bg'></div><div class='vert-slider-center'></div><div class='vert-slider-bg'></div><div class='vert-slider-bottom'></div></div><div class='bottom-btn pq-sb-btn'></div>")):
(h.removeClass("pq-sb-horiz-t pq-sb-horiz-wt").addClass("pq-sb pq-sb-horiz"),n?(h.addClass("pq-sb-horiz-t"),h[0].innerHTML=["<div class='left-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-left","'>",m(c,c?f.left:"triangle-1-w"),"</div><div class='pq-sb-slider pq-sb-slider-h ",c?f.slider:"ui-state-default ui-corner-all","'></div><div class='right-btn pq-sb-btn ",c?"":"ui-state-default ui-corner-right","'>",m(c,c?f.right:"triangle-1-e"),"</div>"].join("")):(h.addClass("pq-sb-horiz-wt"),h.width(this.width),
h[0].innerHTML="<div class='left-btn pq-sb-btn'></div><div class='pq-sb-slider pq-sb-slider-h'><span class='horiz-slider-left'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-center'></span><span class='horiz-slider-bg'></span><span class='horiz-slider-right'></span></div><div class='right-btn pq-sb-btn'></div>"));h.disableSelection().unbind(".pq-scrollbar").on("mousedown.pq-scrollbar",function(h){if(!b.disabled&&!a.$slider.is(":hidden"))if(k(document).off("."+q).on("mouseup."+
q,function(h){a._mouseup(h)}),"vertical"==d){var A=h.pageY,f=a.element.offset().top,c=f+b.length,l=a.$slider,n=l.offset().top,g=l.height(),l=n+g;A<n&&A>f+17?a._setTimerPageLeft(A,g,h,0):A>l&&A<c-17&&a._setTimerPageRight(A,g,h,0)}else A=h.pageX,f=a.element.offset().left,c=f+b.length,n=a.$slider.offset().left,l=n+a.$slider.width(),A<n&&A>f+17?(a.$slider.css("left",A-a.element.offset().left),a._updateCurPosAndTrigger(h)):A>l&&A<c-17&&(a.$slider.css("left",A-a.element.offset().left-a.$slider.width()),
a._updateCurPosAndTrigger(h))});f=this.$slider=k("div.pq-sb-slider",this.element);f.attr("tabindex","0");this._bindSliderEvents(f);this.$top_btn=k("div.top-btn,div.left-btn",this.element).click(function(h){if(!a.options.disabled)return a.decr_cur_pos(h),!1}).mousedown(function(h){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.decr_cur_pos(h)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(h){a._mouseup(h)});this.$bottom_btn=
k("div.bottom-btn,div.right-btn",this.element).click(function(h){if(!a.options.disabled)return a.incr_cur_pos(h),!1}).mousedown(function(h){if(!a.options.disabled)return a.mousedownTimeout=setTimeout(function(){a.mousedownInterval=setInterval(function(){a.incr_cur_pos(h)},0)},a.options.timeout),!1}).bind("mouseup mouseout",function(h){a._mouseup(h)});this.refresh()};var a=0;c._setTimerPageLeft=function(e,b,f,c){var d=this,q=d.options;this.mousedownTimeout=window.setTimeout(function(){if(e>=d.$slider.offset().top)d._mouseup();
else{d._pageLeft(f);var c=a?0:q.timeout;a++;d._setTimerPageLeft(e,b,f,c)}},c)};c._setTimerPageRight=function(e,b,f,c){var d=this;this.mousedownTimeout=window.setTimeout(function(){if(e<=d.$slider.offset().top+b)d._mouseup();else{d._pageRight(f);var c=a?0:d.options.timeout;a++;d._setTimerPageRight(e,b,f,c)}},c)};c._bindSliderEvents=function(a){var b=this,f="x";"vertical"==this.options.direction&&(f="y");a.draggable({axis:f,helper:function(a,d){b._setDragLimits();return this},start:function(a){b.topWhileDrag=
null;b.dragging=!0},drag:function(a){b.dragging=!0;var d=b.options.pace;"optimum"==d?b._setNormalPace(a):"fast"==d&&b._updateCurPosAndTrigger(a)},stop:function(a){"fast"!=b.options.pace&&b._updateCurPosAndTrigger(a);b.dragging=!1;b.refresh()}}).on("keydown.pq-scrollbar",function(a){var d=a.keyCode,f=b.options,e=f.cur_pos,h=f.ratio,p=f.num_eles,A=k.ui.keyCode;null==b.keydownTimeout&&(b.keydownTimeout=window.setTimeout(function(){d==A.DOWN||d==A.RIGHT?b.incr_cur_pos(a):d==A.UP||d==A.LEFT?b.decr_cur_pos(a):
d==A.HOME?f.steps?0<e&&(f.cur_pos=0,b.updateSliderPos(),b.scroll(a)):0<h&&(f.ratio=0,b.updateSliderPos(),b.drag(a)):d==A.END?f.steps?e<p&&(f.cur_pos=p,b.updateSliderPos(),b.scroll(a)):1>h&&(f.ratio=1,b.updateSliderPos(),b.drag(a)):"vertical"==f.direction&&(d==A.PAGE_DOWN?b._pageRight(a):d==A.PAGE_UP&&b._pageLeft(a));b.keydownTimeout=null},0));if(d==A.DOWN||d==A.RIGHT||d==A.UP||d==A.LEFT||d==A.PAGE_DOWN||d==A.PAGE_UP||d==A.HOME||d==A.END)return a.preventDefault(),!1})};c.decr_cur_pos=function(a){var b=
this.options;if(b.steps)0<b.cur_pos&&(b.cur_pos--,this.updateSliderPos(),this.scroll(a));else if(0<b.ratio){var f=b.ratio-1/(b.num_eles-1);0>f&&(f=0);b.ratio=f;this.updateSliderPos();this.drag(a)}};c.incr_cur_pos=function(a){var b=this.options;if(b.steps)b.cur_pos<b.num_eles-1&&b.cur_pos++,this.updateSliderPos(),this.scroll(a);else{if(1>b.ratio){var f=b.ratio+1/(b.num_eles-1);1<f&&(f=1);b.ratio=f}this.updateSliderPos();this.drag(a)}};c._mouseup=function(e){this.options.disabled||(a=0,window.clearTimeout(this.mousedownTimeout),
this.mousedownTimeout=null,window.clearInterval(this.mousedownInterval),this.mousedownInterval=null)};c._setDragLimits=function(){var a=this.options;if("vertical"==a.direction){var b=this.element.offset().top+17,a=b+a.length-34-this.slider_length;this.$slider.draggable("option","containment",[0,b,0,a])}else b=this.element.offset().left+17,a=b+a.length-34-this.slider_length,this.$slider.draggable("option","containment",[b,0,a,0])};c._validateCurPos=function(){var a=this.options;a.cur_pos>=a.num_eles&&
(a.cur_pos=a.num_eles-1);0>a.cur_pos&&(a.cur_pos=0)};c._updateSliderPosRatio=function(){var a=this.options,b=a.direction,f=a.ratio,c=this.$slider[0],a=a.length-34-this.slider_length;if(null==f)throw"updateSliderPosRatio ratio N/A";f=f*a+17;"vertical"==b?c.style.top=f+"px":c.style.left=f+"px"};c._updateSliderPosCurPos=function(){var a=this.options,b=this.$slider[0],f=this.scroll_space*a.cur_pos/(a.num_eles-1);"vertical"==a.direction?b.style.top=17+f+"px":b.style.left=17+f+"px"};c.updateSliderPos=function(){var a=
this.options;if(void 0===a.steps)throw"updateSliderPos. steps N/A";a.steps?this._updateSliderPosCurPos():this._updateSliderPosRatio()};c.scroll=function(a){var b=this.options;this._trigger("scroll",a,{cur_pos:b.cur_pos,num_eles:b.num_eles})};c.drag=function(a){this._trigger("drag",a,{ratio:this.options.ratio})};c._pageRight=function(a){this._trigger("pageRight",a,null)};c._pageLeft=function(a){this._trigger("pageLeft",a,null)};c._setSliderBgLength=function(){var a=this.options,b=a.theme,f=this.$slider,
c=a.length,c=Math.round(((c-34)*c/(40*a.num_eles+c)-14)/2);1>c&&(c=1);var d=14+2*c;this.scroll_space=a.length-34-d;if(d!==this.slider_length)if(this.slider_length=d,a="vertical"===a.direction?{dim:"height",cls:".vert-slider-bg"}:{dim:"width",cls:".horiz-slider-bg"},b)f[a.dim](d-2);else k(a.cls,this.element)[a.dim](c),f[a.dim](d)};c._updateCurPosAndTrigger=function(a,b){var f=this.options,c=f.direction,d=this.$slider;null==b&&(b=parseInt(d[0].style["vertical"===c?"top":"left"]));c=(b-17)/(f.length-
34-this.slider_length);if(f.steps){if(c*=f.num_eles-1,c=Math.round(c),f.cur_pos!=c){if(this.dragging){if(null!=this.topWhileDrag&&(this.topWhileDrag<b&&f.cur_pos>c||this.topWhileDrag>b&&f.cur_pos<c))return;this.topWhileDrag=b}this.options.cur_pos=c;this.scroll(a)}}else f.ratio=c,this.drag(a)};c._setNormalPace=function(a){this.timer&&(window.clearInterval(this.timer),this.timer=null);var b=this,f=this.options.direction;b.timer=window.setInterval(function(){var c=parseInt(b.$slider[0].style["vertical"===
f?"top":"left"]);b.prev_top===c&&(b._updateCurPosAndTrigger(a,c),window.clearInterval(b.timer),b.timer=null);b.prev_top=c},20)};c.refresh=function(){var a=this.options,b=this.$slider[0],f=this.element;1>=a.num_eles?f[0].style.display="none":(f[0].style.display="",this._validateCurPos(),this.dragging||(f["vertical"===a.direction?"height":"width"](a.length),this._setSliderBgLength(),b.style.display=4>this.scroll_space||1>=a.num_eles?"none":""),this.updateSliderPos())};c._trigger=g._trigger;c.on=g.on;
c.one=g.one;c.off=g.off})(jQuery);
(function(k){k.paramquery=k.paramquery||{};k.paramquery.onResize=function(m,g){var c=k(m);"static"===c.css("position")&&c.css("position","relative");var a=k('<iframe type="text/html" src="about:blank" class="pq-resize-iframe" style="display:block;width:100%;height:100%;position:absolute;top:0;left:0;z-index:-1;overflow: hidden; pointer-events: none;" />').appendTo(c);a[0].data="about:blank";a.css("opacity","0");for(var e=0;e<c.length;e++)k(a[e].contentWindow).on("resize",function(a){g()})}})(jQuery);
(function(k){function m(h){return"<span class='btn btn-xs glyphicon glyphicon-"+h+"' ></span>"}function g(h){return"<span class='ui-widget-header pq-ui-button'><span class='ui-icon ui-icon-"+h+"'></span></span>"}var c=function(){};c.prototype.belongs=function(h){if(h.target==this.that.element[0])return!0};var a=k.paramquery;a.cClass=c;var e=function(h){this.that=h;var p=this.options=h.options,a=this;a.odd=[];if(null!=p.postRenderInterval)h.on("refresh",function(){a.prColDef.length&&a.postRenderAll()}).on("refreshRow",
function(h,p){a.prColDef.length&&a.postRenderRow(p)}).on("refreshCell",function(h,p){p.column.postRender&&a.postRenderRow(p)}).on("refreshColumn",function(h,p){p.column.postRender&&a.setTimerPostRender(0,p.colIndx,p.column)});if(!p.mergeModel.flex)h.on("refresh refreshCell refreshRow refreshColumn",a.onRefreshMerge(h))};a.cGenerateView=e;c=e.prototype=new c;c.onRefreshMerge=function(h){return function(){for(var p=h.$cont.find(".pq-merge-cell-div"),a,b,d,f,e=p.length,c=[],l=[];e--;)a=p[e],a=a.parentNode,
b||(b=2*parseInt(k(a).css("paddingTop")),d=2*parseInt(k(a).css("paddingLeft"))),f=Math.max(a.offsetHeight,28),f-=b,a=a.offsetWidth-d,c[e]=f-1+"px",l[e]=a+"px";for(e=p.length;e--;)a=p[e],a.style.height=c[e],a.style.width=l[e]}};c.generateView=function(h){h=h||{};var p=this.that,b=p.options,d="flex"===b.width,f="flex"===b.height,e=b.cls,c=e.cont_inner,l=e.cont_inner_b,q,n,g=p.initH,k=p.finalH,w=p.pqpanes;if(h.$cont)q=this._generateTables(null,null,h),e=h.$cont,e.empty(),e[0].innerHTML=w.v?["<div class='",
c,"'>",q,"</div><div class='",c,"'>",q,"</div>"].join(""):["<div class='",c,"'>",q,"</div>"].join(""),b=e.children("div").children("table"),p.tables[0]={$tbl:b,$cont:e};else{q=p.initV;n=p.finalV;var x=p.pdata,e=p.$cont;null!=b.editModel.indices&&p.blurEditor({force:!0});g={pageData:x,initV:q,finalV:n,initH:g,finalH:k,source:h.source};p._trigger("beforeTableView",null,g);q=this._generateTables(q,n,h);e.empty();0===p.totalVisibleRows?e.append("<div class='"+c+" pq-grid-norows' >"+b.strNoRows+"</div>"):
(h=f||d?"style='position:relative;'":"",e[0].innerHTML=w.h&&w.v?["<div class='",c,"'>",q,"</div><div class='",c,"'>",q,"</div><div class='",c," ",l,"'>",q,"</div><div class='",c," ",l,"'>",q,"</div>"].join(""):w.v?["<div class='",c,"' ",h," >",q,"</div><div class='",c,"' >",q,"</div>"].join(""):w.h?["<div class='",c,"' style='position:static;' >",q,"</div><div class='",c," ",l,"' style='position:static;' >",q,"</div>"].join(""):["<div class='",c,"' ",h," >",q,"</div>"].join(""));p.$tbl=e.children("div").children("table");
if(b.scrollModel.flexContent&&p.$tbl[0])a.onResize(p.$tbl[0],function(){var h=p.iRefresh;h.ignoreTResize||h.softRefresh()});this.setPaneEvents();p._trigger("refresh",null,g)}this.setPanes()};c.postRenderRow=function(h){var p=this.that,a=this.prColDef,b=p.iMerge,d=h.rowIndx,f;null!=h.colIndx&&(a=[{colIndx:h.colIndx,column:h.column}]);for(var e=0,c=a.length;e<c;e++)h=a[e],f=h.column.postRender,h=h.colIndx,b.ismergedCell(d,h)?b.isRootCell(d,h,"a")&&(h=b.getRootCell(d,h),f.call(p,h)):(h=p.normalize({rowIndx:d,
colIndx:h}),f.call(p,h))};c.setTimerPostRender=function(h,p,a){var b=this.that,d=this,f=b.pdata,e=function(h){return-1==b.options.postRenderInterval?h():setTimeout(h,0)};f&&f.length&&(d.postRenderTimeoutID=e(function(){var e=b.initV,c=b.options.freezeRows;h<e&&h>=c&&(h=e);f[h].pq_hidden||d.postRenderRow({column:a,colIndx:p,rowIndx:h+b.rowIndxOffset});h++;h<=b.finalV&&d.setTimerPostRender(h)}))};c.postRenderAll=function(){var h=this.that,p=this,a=h.pdata,b=h.options.postRenderInterval,h=function(h){return-1==
b?h():setTimeout(h,b)};a&&a.length&&(clearTimeout(p.postRenderTimeoutID),p.postRenderTimeoutID=h(function(){p.setTimerPostRender(0)}))};c.scrollView=function(){var h=this.that,p=this.options,a=p.virtualY;p.virtualX||h.hscroll.drag();a||h.vscroll.drag()};c.setPaneEvents=function(){var h=this.that,p=h.pqpanes,a=h.$cont.children("div"),b=h.iMouseSelection;if((h=h.$tbl)&&h.length)if(p.h&&p.v){var p=k(a[0]),h=k(a[1]),d=k(a[2]),a=k(a[3]);p.on("scroll",function(h){this.scrollLeft=this.scrollTop=0});h.on("scroll",
function(h){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)});d.on("scroll",function(h){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0});a.on("scroll",function(h){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})}else if(p.v)p=k(a[0]),a=k(a[1]),p.on("scroll",function(h){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=0}),a.on("scroll",function(h){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else if(p.h)p=k(a[0]),a=k(a[1]),p.on("scroll",
function(h){this.scrollTop=0;this.scrollLeft=b.getScrollLeft(!0)}),a.on("scroll",function(h){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)});else a.on("scroll",function(h){this.scrollTop=b.getScrollTop(!0);this.scrollLeft=b.getScrollLeft(!0)})};c.setPanes=function(){var h=this.that,p=h.pqpanes,a=h.$cont.children("div"),b=h.iRefresh,d=h.$tbl,f=h.options,e=h.calcWidthCols(-1,1*f.freezeCols)+1,c="flex"!==f.width||f.maxWidth?b.getEContWd():"";if(h.tables.length){var l=h.tables[0].$tbl,
q=h.tables[0].$cont,n=l.parent("div");p.v?(k(n[0]).css({width:e}),k(n[1]).css({left:e,width:c-e}),k(l[1]).css({left:-1*e})):k(n[0]).css({width:c});q.height(l[0].scrollHeight-1);b.setContHeight()}if(d&&d.length)if(b="flex"!==f.height||f.maxHeight?b.getEContHt():"",p.h&&p.v){var l=k(a[0]),q=k(a[1]),n=k(d[1]),g=k(a[2]),w=k(d[2]),a=k(a[3]),x=k(d[3]),d=h.calcHeightFrozenRows();l.css({width:e,height:d});q.css({left:e,width:c-e,height:d});n.css({left:-1*e});g.css({width:e,top:d,height:b-d});w.css({marginTop:-(d+
1)});a.css({left:e,width:c-e,top:d,height:b-d});x.css({marginTop:-(d+1),left:-1*e})}else p.v?(l=k(a[0]),a=k(a[1]),d=k(d[1]),l.css({width:e,height:b}),a.css({left:e,width:c-e,height:b}),d.css({left:-1*e})):p.h?(l=k(a[0]),a=k(a[1]),q=k(d[1]),d=h.calcHeightFrozenRows(),l.css({height:d,width:c}),a.css({width:c,top:d,height:b-d}),q.css({marginTop:-(d+1)})):a.css({width:c,height:b});f.showHeader&&(p.vH?(h.$header_left.css({width:e}),h.$header_right.css({left:e,width:c-e}),h.$header_right_inner.css({left:-e})):
h.$header_left.css({width:c}))};c.createColDefs=function(){for(var h=this.that,p=h.colModel,a=h.initH,b=h.finalH,h=h.options.freezeCols,d=[],f=[],e=0;e<=b;e++){if(e<a&&e>=h&&(e=a,e>b))throw"initH>finalH";var c=p[e];c.hidden||(d.push({column:c,colIndx:e}),c.postRender&&"function"==typeof c.postRender&&f.push({column:c,colIndx:e}))}this.colDef=d;this.prColDef=f};c._generateTables=function(h,p,a){a=a||{};var b=this.that,d=b.options,f=d.bootstrap,e=d.numberCell,c=!0,l=1*d.freezeRows,q=0,n=a.other,g=this.odd;
p=n?a.data.length-1:p;n?a=a.data:(a=b.pdata,this.setFrozenRip(a,l));if(n||null!=h&&null!=p){q=["pq-grid-table"];f.on&&q.push(f.tbody);d.columnBorders&&q.push("pq-td-border-right");d.rowBorders&&q.push("pq-td-border-top");q.push(d.wrap?"pq-wrap":"pq-no-wrap");d=["<table class='"+q.join(" ")+"' >"];d.push("<tr class='pq-row-hidden'>");if(e.show){var k=e.width;d.push("<td style='width:"+k+"px;' ></td>")}q=this.colDef;e=0;for(f=q.length;e<f;e++)k=q[e],b=k.colIndx,k=k.column.outerWidth,d.push("<td style='width:",
k,"px;' pq-col-indx='",b,"'></td>");d.push("</tr>");for(q=0;q<=p;q++)q<h&&q>=l&&(q=h),e=a[q],f=q,e&&e.pq_hidden||(g[f]=c=!c,b=e.pq_detail&&e.pq_detail.show,this._generateRow(e,f,d,n,b),b&&this._generateDetailRow(e,f,d));d.push("</table>");return d.join("")}};c.appendRow=function(h){var p=this.that,a=p.pdata,b=p.colModel,d=p.finalV;d+h>a.length&&(h=a.length-d);if(h){if(1<h)throw"noRows > 1";p._trigger("beforeTableView",null,{pageData:a,initV:d,finalV:d,initH:p.initH,finalH:p.finalH,colModel:b});p.refreshRow({rowIndxPage:d,
refresh:!1})}return h};c.prependRow=function(h){var p=this.that,a=p.options.freezeRows,b=p.calcVisibleRows(p.pdata,0,a),d=p.pdata,f=p.initV,e=p.colModel;if(p._mergeCells){if(b)for(b=0;b<a;b++)p.refreshRow({rowIndxPage:b,refresh:!1});p.refreshRow({rowIndxPage:f+1,refresh:!1})}p._trigger("beforeTableView",null,{pageData:d,initV:f,finalV:f,initH:p.initH,finalH:p.finalH,colModel:e});p.refreshRow({rowIndxPage:f,refresh:!1});return h};c.removeTopRow=function(h){for(var p=this.that,a=p.options.freezeRows,
b=p.calcVisibleRows(p.pdata,0,a),d=p.$tbl,f=k([]),e=0;e<d.length;e++)var c=k(d[e]).children("tbody").children("tr:gt(0)").slice(b,h+b),f=f.add(c);f.remove();if(p._mergeCells){if(b)for(e=0;e<a;e++)p.refreshRow({rowIndxPage:e,refresh:!1});p.refreshRow({rowIndxPage:p.initV,refresh:!1})}};c.removeBottomRow=function(h){var p=this.that.$tbl;if(h)for(var a=0;a<p.length;a++)k(p[a]).children("tbody").children("tr:gt(0)").slice(-h).remove()};c.format=function(){var h=k.datepicker,p=pq.formatNumber;return function(a,
b,d){if("date"==d){if(!isNaN(Date.parse(a)))return h.formatDate(b,new Date(a))}else return p(a,b)}}();c.renderCell=function(h){var p=this.that,a=[],b=[],d=h.Export,f=!1,e=this.options,c=["pq-grid-cell"];if(!h.other&&!d&&p._mergeCells){h=p.iMerge.renderCell(h);if(null==h)return"";h.rowspan&&(a.push("rowspan='"+h.rowspan+"'","colspan='"+h.colspan+"'"),e.mergeModel.flex||(f=!0,c.push("pq-merge-cell")));h.style&&b.push(h.style);h.cls&&c.push(h.cls)}var l=h.rowData,n=h.column,g=h.colIndx,k=n.dataIndx,
w=e.freezeCols,e=e.columnBorders;if(l){d||(a.push("pq-col-indx='"+g+"'"),"right"==n.align?c.push("pq-align-right"):"center"==n.align&&c.push("pq-align-center"),g==w-1&&e&&c.push("pq-last-frozen-col"),(g=n.cls)&&c.push(g),(g=p.iSelection.dirty?null:l.pq_cellselect)&&g[k]&&c.push(p.iCells.hclass));var x,w=l[k],g=(g=n.format)?this.format(w,g,n.dataType):w;h.dataIndx=k;h.cellData=w;h.formatVal=g;if(n.render&&(x=n.render.call(p,h))&&"string"!=typeof x){var w=x.attr,e=x.cls,m=x.style;w&&a.push(w);e&&c.push(e);
m&&b.push(m);x=x.text}null==x&&n._render&&(x=n._render.call(p,h));x&&"string"!=typeof x&&(w=x.attr,e=x.cls,m=x.style,w&&a.push(w),e&&c.push(e),m&&b.push(m),x=x.text);null==x&&(x=g);if(d)return x;if(""===x||void 0==x)x="&nbsp;";(h=l.pq_cellcls)&&(h=h[k])&&c.push(h);if(l=l.pq_cellattr)if(k=l[k]){var k=q(k),E;for(E in k)l=k[E],"style"==E?b.push(l):a.push(E+'="'+l+'"')}b=b.length?" style='"+b.join("")+"' ":"";return["<td class='",c.join(" "),"' ",a.join(" "),b," >",f?"<div class='pq-merge-cell-div'><div><div class='pq-merge-inner'>":
"",x,f?"</div></div></div>":"","</td>"].join("")}};c.setFrozenRip=function(h,p){if(h){for(var a;p--&&(a=h[p])&&a.pq_hidden;);this.frozenRip=p}};c.refreshRow=function(h,p){var a=this.that.pdata[h];this._generateRow(a,h,p,null,a.pq_detail&&a.pq_detail.show)};c._generateRow=function(h,p,a,b,d){var f=["pq-grid-row"];this.frozenRip===p&&f.push("pq-last-frozen-row");d&&f.push("pq-detail-master");var e=this.that,c=this.options,l=c.rowInit;d=c.numberCell;var n="",g="",k=e.rowIndxOffset,w=p+k;l&&(l=l.call(e,
{rowData:h,rowIndxPage:p,rowIndx:w}))&&(l.cls&&f.push(l.cls),n+=l.attr?" "+l.attr:"",g+=l.style?l.style:"");c.stripeRows&&this.odd[p]&&f.push("pq-grid-oddRow");h.pq_rowselect&&f.push(e.iRows.hclass);e=h.pq_rowcls;null!=e&&f.push(e);if(e=h.pq_rowattr){var e=q(e),x;for(x in e)n+=" "+x+'="'+e[x]+'"'}g=g?"style='"+g+"'":"";a.push("<tr pq-row-indx='",p,"' class='",f.join(" "),"' ",n," ",g," >");d.show&&a.push(["<td pq-col-indx='-1' class='pq-grid-number-cell'>",b?"&nbsp;":w+1,"</td>"].join(""));h={rowIndx:p+
k,rowIndxPage:p,other:b,rowData:h};p=this.colDef;b=0;for(f=p.length;b<f;b++)x=p[b],d=x.colIndx,h.column=x.column,h.colIndx=d,a.push(this.renderCell(h));a.push("</tr>");return a};c._generateDetailRow=function(h,p,a){var b=["pq-grid-row pq-detail-child"],d=this.that,f=d.options,e=f.numberCell;f.stripeRows&&this.odd[p]&&b.push("pq-grid-oddRow");h.pq_rowselect&&b.push(d.iRows.hclass);h=h.pq_rowcls;null!=h&&b.push(h);a.push("<tr pq-row-indx='"+p+"' class='"+b.join(" ")+"' >");e.show&&a.push("<td class='pq-grid-number-cell'>&nbsp;</td>");
a.push("<td class='pq-grid-cell pq-detail-child' colSpan='20'></td>");a.push("</tr>");return a};c={widgetEventPrefix:"pqgrid",_create:function(){var h=this,p=this.options,b=p.dataModel,d=p.bootstrap,f=d.on,c=p.roundCorners&&!f,q=p.ui,g=p.sortModel;this.BS_on=f;p.collapsible||(p.collapsible={on:!1,collapsed:!1});p.flexHeight&&(p.height="flex");p.flexWidth&&(p.width="flex");if(b.sortIndx){g.on=p.sortable;g.type=b.sorting;var v=[],z=b.sortIndx,b=b.sortDir;if(k.isArray(z)){for(var C=0;C<z.length;C++){var m=
b&&b[C]?b[C]:"up";v.push({dataIndx:z[C],dir:m})}g.single=!1}else v.push({dataIndx:z,dir:b?b:"up"}),g.single=!0;g.sorter=v}!1===p.virtualXHeader&&(p.virtualXHeader=null);this.setEditorPosTimer();this.iGenerateView=new e(this);this.iRefresh=new a.cRefresh(this);this.iKeyNav=new n(this);this.iIsValid=new l(this);this.tables=[];this.$tbl=null;this.iColModel=new a.cColModel(this);this.iSort=new a.cSort(this);this.iHeader=new a.cHeader(this);this._initTypeColumns();g=this.element;g.on("scroll"+this.eventNamespace,
function(){this.scrollTop=this.scrollLeft=0});v=f?d.grid:q.grid;z=f?"":q.header_o;b=f?"":q.bottom;d=f?d.top:q.top;g.empty().addClass("pq-grid "+v+" "+(c?" ui-corner-all":"")).html(["<div class='pq-grid-top ",d," ",c?" ui-corner-top":"","'><div class='pq-grid-title",c?" ui-corner-top":"","'>&nbsp;</div></div><div class='pq-grid-center' ><div class='pq-header-outer ",z,"'></div><div class='pq-grid-cont-outer' ><div class='pq-grid-cont' tabindex='0'></div></div></div><div class='pq-grid-bottom ",b," ",
c?" ui-corner-bottom":"","'><div class='pq-grid-footer'></div></div>"].join(""));this.$bottom=k("div.pq-grid-bottom",g);this._trigger("render",null,{dataModel:this.options.dataModel,colModel:this.colModel});this.$top=k("div.pq-grid-top",g);p.showTop||this.$top.css("display","none");this.$title=k("div.pq-grid-title",g);p.showTitle||this.$title.css("display","none");c=this.$grid_center=k("div.pq-grid-center",g).on("scroll",function(){this.scrollTop=0});this.$header_o=k("div.pq-header-outer",this.$grid_center).on("scroll",
function(){this.scrollLeft=this.scrollTop=0});this.$footer=k("div.pq-grid-footer",g);this.$cont_o=k(".pq-grid-cont-outer",c);d=this.$cont=k("div.pq-grid-cont",c);k(window).bind("resize"+h.eventNamespace+" orientationchange"+h.eventNamespace,function(a,p){h.onWindowResize(a,p)});d.on("click",".pq-grid-cell,.pq-grid-number-cell",function(a){if(!0!==k.data(a.target,h.widgetName+".preventClickEvent")&&k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onClickCell(a)});d.on("click","tr.pq-grid-row",
function(a){if(!0!==k.data(a.target,h.widgetName+".preventClickEvent")&&k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onClickRow(a)});d.on("contextmenu","td.pq-grid-cell",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onRightClickCell(a)});d.on("contextmenu","tr.pq-grid-row",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onRightClickRow(a)});d.on("dblclick","td.pq-grid-cell",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onDblClickCell(a)});
d.on("dblclick","tr.pq-grid-row",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onDblClickRow(a)});d.on("blur",function(){h.onblur()});d.on("focus",function(){h.onfocus()});d.on("mousedown",function(a){if(1===a.which){var p=k(a.target);if(p.closest(".pq-grid")[0]==h.element[0]){var b;b=p.closest(".pq-grid-cell:not(.pq-detail-child)");if(b.length&&(a.currentTarget=b[0],b=h._onCellMouseDown(a),!1===b))return!1;if(!a.isPropagationStopped()){p=p.closest(".pq-grid-row");if(p.length&&
(a.currentTarget=p[0],b=h._onRowMouseDown(a),!1===b))return!1;if(!a.isPropagationStopped())return h._onContMouseDown(a)}}}});d.on("mouseenter","td.pq-grid-cell",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onCellMouseEnter(a,k(this))});d.on("mouseenter","tr.pq-grid-row",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onRowMouseEnter(a,k(this))});d.on("mouseleave","td.pq-grid-cell",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onCellMouseLeave(a,
k(this))});d.on("mouseleave","tr.pq-grid-row",function(a){if(k(a.target).closest(".pq-grid")[0]==h.element[0])return h._onRowMouseLeave(a,k(this))});d.on("keyup",function(a){k(a.target).closest(".pq-grid")[0]==h.element[0]&&h._trigger("keyUp",a,null)});c.bind("mousewheel DOMMouseScroll",function(a){return h._onMouseWheel(a)});this.$hvscroll=k("<div class='pq-hvscroll-square ui-widget-content'></div>").appendTo(c);f=k("<div class='pq-vscroll'></div>").appendTo(c);this.prevVScroll=0;d=p.scrollModel;
void 0===d.lastColumn&&p.virtualX&&(d.lastColumn="auto");this.vscroll=pq.scrollbar(f,{pace:d.pace,theme:d.theme,bootstrap:p.bootstrap,steps:p.virtualY&&!d.smooth,direction:"vertical",cur_pos:0,pageRight:function(){h.iKeyNav.pageDown()},pageLeft:function(){h.iKeyNav.pageUp()},drag:function(a,p){h.iMouseSelection.syncViewWithScrollBarVert(p.ratio)},scroll:function(a,p){h.iRefresh.refreshVscroll(p)}});f=k("<div class='pq-hscroll'></div>").appendTo(c);"flex"===p.height&&f.css("position","relative");this.hscroll=
pq.scrollbar(f,{direction:"horizontal",pace:d.pace,bootstrap:p.bootstrap,theme:d.theme,steps:p.virtualX&&!d.smooth,cur_pos:0,drag:function(a,p){h.iMouseSelection.syncViewWithScrollBarHor(p.ratio)},scroll:function(){p.virtualX&&!p.scrollModel.smooth&&h.refresh()}});p.selectionModel["native"]||this.disableSelection();c.bind("keydown.pq-grid",function(a){k(a.target).closest(".pq-grid")[0]==h.element[0]&&h._onKeyPressDown(a)});this._refreshTitle();this.iRows=new a.cRows(this);this.iCells=new a.cCells(this);
this.generateLoading();this._initPager();this._refreshResizable();this._refreshDraggable();this.iResizeColumns=new a.cResizeColumns(this);this._mouseInit()},_mouseDown:function(h){var a=this;if(k(h.target).closest(".pq-editor-focus").length)this._blurEditMode=!0,window.setTimeout(function(){a._blurEditMode=!1},0);else return this._saveDims(),this._mousePQUpDelegate=function(h){return a._mousePQUp(h)},k(document).bind("mouseup"+this.eventNamespace,this._mousePQUpDelegate),this._super(h)},destroy:function(){this._trigger("destroy");
this._super();window.clearInterval(this._refreshEditorPosTimer);this.autoResizeTimeout&&clearTimeout(this.autoResizeTimeout);for(var h in this)delete this[h];this.options=void 0;k.fragments={}},_setOption:function(h,a){var b=this.options,d=b.dataModel;if("height"===h)"flex"===a?(d=this.vscroll,a&&d&&d.widget().hasClass("pq-sb-vert")&&(b.virtualY?d.option("cur_pos",0):d.option("ratio",0)),this.hscroll.widget().css("position","relative")):"flex"===b.height&&this.hscroll.widget().css("position",""),
b[h]=a;else if("width"===h&&"flex"==a)b[h]=a,d=this.hscroll,a&&d&&d.widget().hasClass("pq-sb-horiz")&&(b.virtualX?d.option("cur_pos",0):d.option("ratio",0));else if("title"==h)b[h]=a,this._refreshTitle();else if("roundCorners"==h)(b[h]=a)?(this.element.addClass("ui-corner-all"),this.$top.addClass("ui-corner-top"),this.$bottom.addClass("ui-corner-bottom")):(this.element.removeClass("ui-corner-all"),this.$top.removeClass("ui-corner-top"),this.$bottom.removeClass("ui-corner-bottom"));else if("virtualX"==
h)b[h]=a,this.hscroll.option("steps",a);else if("virtualY"==h)b[h]=a,this.vscroll.option("steps",a);else if("freezeCols"==h)a=parseInt(a),!isNaN(a)&&0<=a&&a<=this.colModel.length-2&&(b[h]=a);else if("freezeRows"==h)a=parseInt(a),!isNaN(a)&&0<=a&&(b[h]=a);else if("resizable"==h)b[h]=a,this._refreshResizable();else if("draggable"==h)b[h]=a,this._refreshDraggable();else if("scrollModel"==h)b[h]=a;else if("dataModel"==h)a.data!==d.data&&d.dataUF&&(d.dataUF.length=0),b[h]=a;else{if("groupModel"==h)throw"use groupOption() to set groupModel options.";
"pageModel"==h?b[h]=a:"selectionModel"===h?b[h]=a:"colModel"===h||"columnTemplate"==h?(b[h]=a,this.iColModel.init()):"disabled"===h?(this._super(h,a),!0===a?this._disable():this._enable()):"numberCell"===h?(b[h]=a,this.iRefresh.decidePanes()):"strLoading"===h?(b[h]=a,this._refreshLoadingString()):"showTop"===h?(b[h]=a,this.$top.css("display",a?"":"none")):"showTitle"===h?(b[h]=a,this.$title.css("display",a?"":"none")):"showToolbar"===h?(b[h]=a,this._toolbar.widget().css("display",a?"":"none")):"toolbar"==
h?b[h]=a:"collapsible"===h?(b[h]=a,this._createCollapse()):"showBottom"===h?(b[h]=a,this.$bottom.css("display",a?"":"none")):b[h]=a}return this}};c.options={cancel:"input,textarea,button,select,option,.pq-no-capture,.ui-resizable-handle",trigger:!1,bootstrap:{on:!1,thead:"table table-striped table-condensed table-bordered",tbody:"table table-condensed",grid:"panel panel-default",top:"",btn:"btn btn-default",groupModel:{icon:["glyphicon-triangle-bottom","glyphicon-triangle-right"]},header_active:"active"},
ui:{on:!0,grid:"ui-widget ui-widget-content",top:"ui-widget-header",bottom:"ui-widget-header",header_o:"ui-widget-header",header:"ui-state-default",header_active:"ui-state-active"},cls:{cont_inner:"pq-grid-cont-inner",cont_inner_b:"pq-grid-cont-inner-b"},distance:3,collapsible:{on:!0,toggle:!0,collapsed:!1,_collapsed:!1,refreshAfterExpand:!0,css:{zIndex:1E3}},colModel:null,columnBorders:!0,dataModel:{data:[],dataUF:[],cache:!1,dataType:"JSON",location:"local",sorting:"local",sortDir:"up",method:"GET"},
direction:"",draggable:!1,editable:!0,editModel:{cellBorderWidth:0,pressToEdit:!0,clicksToEdit:2,filterKeys:!0,keyUpDown:!0,reInt:/^([\-]?[1-9][0-9]*|[\-]?[0-9]?)$/,reFloat:/^[\-]?[0-9]*\.?[0-9]*$/,onBlur:"validate",saveKey:k.ui.keyCode.ENTER,onSave:"nextFocus",onTab:"nextFocus",allowInvalid:!1,invalidClass:"pq-cell-red-tr pq-has-tooltip",warnClass:"pq-cell-blue-tr pq-has-tooltip",validate:!0},editor:{select:!1,type:"textbox"},groupModel:{on:!1,title:[],titleDefault:"{0} ({1})",header:!0,headerMenu:!0,
menuItems:["merge","fixCols","grandSummary"],fixCols:!0,icon:["ui-icon-triangle-1-se","ui-icon-triangle-1-e"],dataIndx:[],collapsed:[],dir:[],showSummary:[],summaryEdit:!0,refreshOnChange:!0},summaryOptions:{number:"avg,sum,max,min",date:"count,max,min",string:"count"},summaryTitle:{avg:"Avg: {0}",count:"Count: {0}",max:"Max: {0}",min:"Min: {0}",sum:"Sum: {0}"},validation:{icon:"ui-icon-alert",cls:"ui-state-error",style:"padding:3px 10px;"},warning:{icon:"ui-icon-info",cls:"",style:"padding:3px 10px;"},
freezeCols:0,freezeRows:0,freezeBorders:!0,calcDataIndxFromColIndx:!0,height:400,hoverMode:"null",_maxColWidth:"99%",_minColWidth:50,minWidth:100,numberCell:{width:30,title:"",resizable:!0,minWidth:30,maxWidth:100,show:!0},pageModel:{curPage:1,totalPages:0,rPP:10,rPPOptions:[10,20,50,100]},resizable:!1,roundCorners:!0,rowBorders:!0,rowHeight:25,scrollModel:{pace:"fast",smooth:!1,horizontal:!0,lastColumn:"auto",autoFit:!1,theme:!0},selectionModel:{type:"cell",onTab:"nextFocus",row:!0,mode:"block"},
swipeModel:{on:!0,speed:20,ratio:.15,repeat:20},showBottom:!0,showHeader:!0,showTitle:!0,showToolbar:!0,showTop:!0,sortable:!0,sql:!1,stripeRows:!0,title:"&nbsp;",treeModel:null,virtualX:!1,virtualY:!1,width:"auto",wrap:!0,hwrap:!0};k.extend(!0,c.options,{strAdd:"Add",strDelete:"Delete",strEdit:"Edit",strGroup_header:"Drag a column here to group by that column",strGroup_merge:"Merge cells",strGroup_fixCols:"Fix columns",strGroup_grandSummary:"Grand summary",strLoading:"Loading",strNoRows:"No rows to display."});
k.widget("paramquery._pqGrid",k.ui.mouse,c);c=a._pqGrid.prototype;c.readCell=function(h,a,b,d,f){a=a.dataIndx;return b&&!1===b.isRootCell(d,f,"o")?void 0:h[a]};c.saveCell=function(h,a,b){h[a.dataIndx]=b};c._destroyResizable=function(){var h=this.element,a=h.data();(a.resizable||a.uiResizable||a["ui-resizable"])&&h.resizable("destroy")};c._disable=function(){null==this.$disable&&(this.$disable=k("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};c._enable=function(){this.$disable&&
(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};c._destroy=function(){this.loading&&this.xhr.abort();this._destroyResizable();this._destroyDraggable();this._mouseDestroy();this.element.off(this.eventNamespace);k(window).unbind(this.eventNamespace);k(document).unbind(this.eventNamespace);this.element.empty().css("height","").css("width","").removeClass("pq-grid ui-widget ui-widget-content ui-corner-all").removeData()};c.collapse=function(h){var a=this,b=this.element,d=this.options.collapsible,
f=d.$collapse.children("span"),e=function(){b.css("overflow","hidden");f.addClass("ui-icon-circle-triangle-s").removeClass("ui-icon-circle-triangle-n");b.hasClass("ui-resizable")&&b.resizable("destroy");a._toolbar&&a._toolbar.disable();d.collapsed=!0;d._collapsed=!0;d.animating=!1;a._trigger("collapse")};h=h?h:{};if(d._collapsed)return!1;d.htCapture=b.height();!1===h.animate?(b.height(23),e()):(d.animating=!0,b.animate({height:"23px"},function(){e()}))};c.expand=function(h){var a=this,b=this.element,
d=this.options.collapsible,f=d.htCapture,e=d.$collapse.children("span"),c=function(){b.css("overflow","");d._collapsed=!1;d.collapsed=!1;a._refreshResizable();d.refreshAfterExpand&&a.refresh();e.addClass("ui-icon-circle-triangle-n").removeClass("ui-icon-circle-triangle-s");a._toolbar&&a._toolbar.enable();d.animating=!1;a._trigger("expand")};h=h?h:{};if(!1===d._collapsed)return!1;!1===h.animate?(b.height(f),c()):(d.animating=!0,b.animate({height:f},function(){c()}))};c._createCollapse=function(){var h=
this,a=this.$top,b=this.BS_on,d=this.options.collapsible;d.$stripe||(a=k("<div class='pq-slider-icon pq-no-capture'  ></div>").appendTo(a),d.$stripe=a);d.on?d.$collapse||(d.$collapse=k(b?m("collapse-down"):g("circle-triangle-n")).appendTo(d.$stripe).click(function(a){d.collapsed?h.expand():h.collapse()})):d.$collapse&&(d.$collapse.remove(),delete d.$collapse);d.collapsed&&!d._collapsed?h.collapse({animate:!1}):!d.collapsed&&d._collapsed&&h.expand({animate:!1});d.toggle?d.$toggle||(d.$toggle=k(b?m("fullscreen"):
g("arrow-4-diag")).prependTo(d.$stripe).click(function(a){h.toggle()})):d.$toggle&&(d.$toggle.remove(),delete d.$toggle)};c.toggle=function(){var h=this.options,a=h.collapsible,b=this.element,d,f=this._maxim;d=f?"min":"max";var e=k(document.body);if(!1===this._trigger("beforeToggle",null,{state:d}))return!1;"min"==d?(h=f.eleObj,a=f.docObj,this.option({height:h.height,width:h.width,maxHeight:h.maxHeight,maxWidth:h.maxWidth}),b[0].style.cssText=h.cssText,e[0].style.cssText=a.cssText,k("html").css({overflow:"visible"}),
window.scrollTo(a.scrollLeft,a.scrollTop),this._maxim=null):(h={height:h.height,width:h.width,cssText:b[0].style.cssText,maxHeight:h.maxHeight,maxWidth:h.maxWidth},this.option({height:"100%",width:"100%",maxHeight:null,maxWidth:null}),b.css(k.extend({position:"fixed",left:0,top:0,margin:0},a.css)),a={scrollLeft:k(window).scrollLeft(),scrollTop:k(window).scrollTop(),cssText:e[0].style.cssText},e.css({height:0,width:0,overflow:"hidden",position:"static"}),k("html").css({overflow:"hidden"}),window.scrollTo(0,
0),this._maxim={eleObj:h,docObj:a});this._trigger("toggle",null,{state:d});this._refreshResizable();this.refresh();k(window).trigger("resize",{$grid:b,state:d})};c._mouseCapture=function(h){var a=this.options;return a.virtualX&&a.virtualY&&!a.scrollModel.smooth||!h.target?!1:k(h.target).closest(".pq-grid")[0]==this.element[0]?(h=a.swipeModel,!1==h.on||"touch"==h.on&&!k.support.touch?!1:!0):!1};c._saveDims=function(){var h=this.$tbl,a=this.$tbl_header;if(h)for(var b=0;b<h.length;b++){var d=h[b],f=
k(d);f.data("offsetHeight",Math.round(d.offsetHeight)-1);f.data("scrollWidth",Math.round(d.scrollWidth))}if(a)for(b=0;b<a.length;b++)d=a[b],h=k(d).parent(),h.data("offsetHeight",Math.round(d.offsetHeight)),h.data("scrollWidth",Math.round(d.scrollWidth))};c._mousePQUp=function(h){k(document).unbind("mouseup"+this.eventNamespace,this._mousePQUpDelegate);this._trigger("mousePQUp",h,null)};c._mouseStart=function(h){this.blurEditor({force:!0});return!0};c._mouseDrag=function(h){return!1==this._trigger("mouseDrag",
h,null)?!1:!0};c._mouseStop=function(h){return!1==this._trigger("mouseStop",h,null)?!1:!0};var b,f;c.onWindowResize=function(h,a){var d=this.options,e=this.element,c=e.parent();if(a){var l=a.$grid;if(l&&(l==e||0==e.closest(l).length))return}if(c.length&&(c[0]==document.body||"fixed"==e.css("position")?(e=window.innerHeight?window.innerHeight:k(window).height(),c=k(window).width()):(e=c.height(),c=c.width()),null==b||e!=b||c!=f)&&(b=e,f=c,!(k.support.touch&&d.editModel.indices&&k(document.activeElement).is(".pq-editor-focus")))){var q=
this,d=d.autoSizeInterval,d=void 0===d?0:d;this.autoResizeTimeout&&(clearTimeout(this.autoResizeTimeout),delete this.autoResizeTimeout);this.autoResizeTimeout=window.setTimeout(function(){q._refreshAfterResize();delete q.autoResizeTimeout},d)}};c._onMouseWheel=function(h){this._saveDims();var a=this.options,b=0,d=!1;h=h.originalEvent;var f=h.wheelDeltaX,e=h.wheelDeltaY,c=h.wheelDelta;if(f&&Math.abs(f)>Math.abs(e)){if("flex"==a.width)return!0;d=!0;b=f/120}else if(c){if(!this.iRefresh.vscroll)return!0;
b=c/120}else if(h.detail){if(!this.iRefresh.vscroll)return!0;b=-1*h.detail/3}b*=3;h=d?this.hscroll:this.vscroll;e=parseInt(h.option("cur_pos"));f=parseInt(h.option("num_eles"));if(!a.scrollModel.smooth&&(d&&a.virtualX||!d&&a.virtualY)){b=0<b?Math[1>b?"ceil":"floor"](b):Math[-1>b?"ceil":"floor"](b);a=e-b;0>a?a=0:a>f-1&&(a=f-1);if(a==e)return!0;h.option("cur_pos",e-b);h.scroll()}else{a=h.option("ratio");b=a-b/(f-1);1<b?b=1:0>b&&(b=0);if(a==b)return!0;h.option("ratio",b);h.drag()}return!1};c._onDblClickCell=
function(h){var a=k(h.currentTarget),b=this.getCellIndices({$td:a}),d=b.rowIndxPage,f=d+this.rowIndxOffset,b=b.colIndx;if(null!=b){if(!1==this._trigger("cellDblClick",h,{$td:a,rowIndxPage:d,rowIndx:f,colIndx:b,column:this.colModel[b],rowData:this.pdata[d]}))return!1;1<this.options.editModel.clicksToEdit&&this.isEditableRow({rowIndx:f})&&this.isEditableCell({colIndx:b,rowIndx:f})&&this.editCell({rowIndxPage:d,colIndx:b})}};c._onClickCont=function(h){};c._onClickRow=function(h){var a=k(h.currentTarget),
b=parseInt(a.attr("pq-row-indx")),d=b+this.rowIndxOffset;if(!isNaN(b)&&!1==this._trigger("rowClick",h,{$tr:a,rowIndxPage:b,rowIndx:d,rowData:this.pdata[b]}))return!1};c._onRightClickRow=function(h){var a=k(h.currentTarget),b=parseInt(a.attr("pq-row-indx")),d=b+this.rowIndxOffset;if(!isNaN(b)&&!1==this._trigger("rowRightClick",h,{$tr:a,rowIndxPage:b,rowIndx:d,rowData:this.pdata[b]}))return!1};c._onDblClickRow=function(h){var a=k(h.currentTarget),b=parseInt(a.attr("pq-row-indx")),d=this.getRowIndxOffset();
if(!1==this._trigger("rowDblClick",h,{$tr:a,rowIndxPage:b,rowIndx:b+d,rowData:this.pdata[b]}))return!1};c.getValueFromDataType=function(h,a,b){if("date"==a)return a=Date.parse(h),isNaN(a)?"":b?a:h;if("object"==a)return h;if("integer"==a)a=parseInt(h);else if("float"==a)a=parseFloat(h);else return"bool"==a?(a=k.trim(h).toLowerCase(),0==a.length?null:"true"==a||"yes"==a||"1"==a?!0:"false"==a||"no"==a||"0"==a?!1:Boolean(a)):k.trim(h);return isNaN(a)||null==a?null==h?h:null:a};var l=function(h){this.that=
h},d=l.prototype;d._isValidCell=function(h){var a=this.that,b=h.column,d=b.validations;if(!d||!d.length)return{valid:!0};var f=h.value,e=b.dataType,c=function(h){return a.getValueFromDataType(h,e,!0)};h=h.rowData;if(!h)throw"rowData required.";for(var l=0;l<d.length;l++){var q=d[l],n=q.type,g=!1,k=q.msg,w=q.value;if(!1!==q.on&&(null==f&&"function"!=typeof n?g=!1:"minLen"==n?(f=c(f),w=c(w),f.length>=w&&(g=!0)):"nonEmpty"==n?null!=f&&""!==f&&(g=!0):"maxLen"==n?(f=c(f),w=c(w),f.length<=w&&(g=!0)):"gt"==
n?(f=c(f),w=c(w),f>w&&(g=!0)):"gte"==n?(f=c(f),w=c(w),f>=w&&(g=!0)):"lt"==n?(f=c(f),w=c(w),f<w&&(g=!0)):"lte"==n?(f=c(f),w=c(w),f<=w&&(g=!0)):"neq"==n?(f=c(f),w=c(w),f!==w&&(g=!0)):"regexp"==n?(new RegExp(w)).test(f)&&(g=!0):"function"==typeof n?(w={column:b,value:f,rowData:h,msg:k},!1==n.call(a,w)?(g=!1,w.msg!=k&&(k=w.msg)):g=!0):g=!0,!g))return{valid:!1,msg:k,column:b,warn:q.warn,dataIndx:b.dataIndx,validation:q}}return{valid:!0}};d.isValidCell=function(h){var a=this.that,b=h.rowData,d=h.rowIndx,
f=h.value,e=h.valueDef,c=h.column,l=h.focusInvalid,q=a.options,n=q.bootstrap,g=h.allowInvalid,m=c.dataIndx,w=q.validation,x=q.warning,D=q.editModel,E=D.invalidClass,F=D.warnClass,D=document.activeElement;if(h.checkEditable&&!1==a.isEditableCell({rowIndx:d,dataIndx:m}))return{valid:!0};h=this._isValidCell({column:c,value:f,rowData:b});var f=h.valid,c=h.warn,H=h.msg;if(f)a.data({rowData:b,dataIndx:m,data:"pq_valid"})&&(a.removeClass({rowData:b,rowIndx:d,dataIndx:m,cls:F+" "+E}),a.removeData({rowData:b,
dataIndx:m,data:"pq_valid"}));else var w=k.extend({},c?x:w,h.validation),I=w.css,P=w.cls,L=w.icon,O=w.style;if(g||c){if(f)return{valid:!0};a.addClass({rowData:b,rowIndx:d,dataIndx:m,cls:c?F:E});a.data({rowData:b,dataIndx:m,data:{pq_valid:{css:I,icon:L,style:O,msg:H,cls:P}}});return h}if(!f){if(null==d&&(b=a.getRowIndx({rowData:b,dataUF:!0}),d=b.rowIndx,null==d||b.uf))return h.uf=b.uf,h;if(l){var N;if(!e)a.goToPage({rowIndx:d}),d={rowIndx:d,dataIndx:m},d=a.normalize(d),N=a.getCell(d),a["cell"==q.selectionModel.type?
"setSelection":"scrollCell"](d),a.focus(d);else if(k(D).hasClass("pq-editor-focus")&&(e=q.editModel.indices)){q=e.rowIndx;e=e.dataIndx;if(null!=d&&d!=q)throw"incorrect usage of isValid rowIndx: "+d;if(m!=e)throw"incorrect usage of isValid dataIndx: "+m;a.editCell({rowIndx:q,dataIndx:m})}var K;if(N||(K=a.getEditCell())&&K.$cell){a=N||K.$cell;a.attr("title",H);N="tooltip";K="open";n.on&&n.tooltip&&(N=n.tooltip,K="show");try{a[N]("destroy")}catch(M){}a[N]({trigger:"manual",position:{my:"left center+5",
at:"right center"},content:function(){return(""==L?"":"<span class='ui-icon "+L+" pq-tooltip-icon'></span>")+H},open:function(h,a){var b=a.tooltip;P&&b.addClass(P);if(O){var p=b.attr("style");b.attr("style",p+";"+O)}I&&b.tooltip.css(I)}})[N](K)}}return h}if(e&&(K=a.getEditCell())&&K.$cell){a=K.$cell;a.removeAttr("title");try{a.tooltip("destroy")}catch(G){}}return{valid:!0}};c.isValid=function(h){return this.iIsValid.isValid(h)};d.isValid=function(h){h=h||{};var a=this.that,b=h.allowInvalid,d=h.focusInvalid,
f=h.checkEditable,b=null==b?!1:b,e=h.dataIndx;if(null!=e){var c=a.columns[e],l=h.rowData||a.getRowData(h),q=h.hasOwnProperty("value"),a=q?h.value:l[e],a=this.isValidCell({rowData:l,checkEditable:f,rowIndx:h.rowIndx,value:a,valueDef:q,column:c,allowInvalid:b,focusInvalid:d});return a.valid||a.warn?{valid:!0}:a}if(null!=h.rowIndx||null!=h.rowIndxPage||null!=h.rowData)for(var l=h.rowData||a.getRowData(h),n=a.colModel,q=[],g=0,k=n.length;g<k;g++){if(c=n[g],!c.hidden&&(e=c.dataIndx,a=l[e],a=this.isValidCell({rowData:l,
value:a,column:c,rowIndx:h.rowIndx,checkEditable:f,allowInvalid:b,focusInvalid:d}),!a.valid&&!a.warn))if(b)q.push({rowData:l,dataIndx:e,column:c});else return a}else{h=h.data?h.data:a.options.dataModel.data;q=[];if(!h)return null;g=0;for(k=h.length;g<k;g++){l=h[g];if(f&&(c=this.getRowIndx({rowData:l}).rowIndx,null==c||!1==a.isEditableRow({rowData:l,rowIndx:c})))continue;l=this.isValid({rowData:l,rowIndx:c,checkEditable:f,allowInvalid:b,focusInvalid:d});e=l.cells;if(!1===b){if(!l.valid)return l}else e&&
e.length&&(q=q.concat(e))}}return b&&q.length?{cells:q,valid:!1}:{valid:!0}};c.isValidChange=function(a){a=a||{};var b=this.getChanges(),b=b.updateList.concat(b.addList);a.data=b;return this.isValid(a)};c.isEditableRow=function(a){var b=this.options.editable;return null!=b?"function"==typeof b?b.call(this,this.normalize(a)):b:!0};c.isEditableCell=function(a){a=this.normalize(a);var b=a.column,d=b.editable;return a.checkVisible&&b.hidden?!1:null!=d?"function"==typeof d?d.call(this,a):d:!0};c._onContMouseDown=
function(a){this.blurEditor({blurIfFocus:!0});if(!1===this._trigger("contMouseDown",a,null))return!1;var b=k(a.target);a=b.closest(".pq-grid-cell,.pq-grid-number-cell");b=b.closest(".pq-grid-row");a.length||b.length||(a=this.$cont[0],a.setAttribute("tabindex",0),a.focus());return!0};c._onCellMouseDown=function(a){var b=k(a.currentTarget),d=this.getCellIndices({$td:b});if(null!=d.rowIndx)return d=this.iMerge.getRootCell(d.rowIndx,d.colIndx,"o"),d=this.normalize(d),d.$td=b,!1==this._trigger("cellMouseDown",
a,d)?!1:!0};c._onRowMouseDown=function(a){var b=k(a.currentTarget),d=this.getRowIndx({$tr:b});d.$tr=b;return!1==this._trigger("rowMouseDown",a,d)?!1:!0};c._onCellMouseEnter=function(a,b){var d=this.options,f=this.getCellIndices({$td:b});if(null!=f.rowIndx&&null!=f.colIndx){if(!1===this._trigger("cellMouseEnter",a,f))return!1;"cell"==d.hoverMode&&this.highlightCell(b);return!0}};c._onRowMouseEnter=function(a,b){var d=this.options,f=this.getRowIndx({$tr:b}),e=f.rowIndxPage;if(!1===this._trigger("rowMouseEnter",
a,f))return!1;"row"==d.hoverMode&&this.highlightRow(e);return!0};c._onCellMouseLeave=function(a,b){"cell"==this.options.hoverMode&&this.unHighlightCell(b);return!0};c._onRowMouseLeave=function(a,b){var d=this.getRowIndx({$tr:b}).rowIndxPage;"row"==this.options.hoverMode&&this.unHighlightRow(d);return!0};c.enableSelection=function(){this.element.removeClass("pq-disable-select").off("selectstart"+this.eventNamespace)};c.disableSelection=function(){this.element.addClass("pq-disable-select").on("selectstart"+
this.eventNamespace,function(a){if(a.target){var b=k(a.target);if(b.is("input,textarea,select")||b.closest(".pq-native-select").length)return!0;a.preventDefault()}})};c._onClickCell=function(a){var b=this.options.editModel,d=k(a.currentTarget),f=this.getCellIndices({$td:d}),f=this.iMerge.getRootCell(f.rowIndx,f.colIndx,"o"),f=this.normalize(f),e=f.rowIndx,c=f.colIndx;f.$td=d;f.evt=a;if(!1==this._trigger("cellClick",a,f))return!1;null==c||0>c||1==b.clicksToEdit&&this.isEditableRow({rowIndx:e})&&this.isEditableCell({colIndx:c,
rowIndx:e})&&this.editCell(f)};c._onRightClickCell=function(a){var b=k(a.currentTarget),d=this.getCellIndices({$td:b}),f=d.rowIndxPage,e=f+this.rowIndxOffset,d=d.colIndx,c=this.colModel;if(null!=d&&(c=c[d],!1==this._trigger("cellRightClick",a,{$td:b,rowIndxPage:f,rowIndx:e,colIndx:d,dataIndx:c.dataIndx,column:c,rowData:this.pdata[f]})))return!1};c.highlightCell=function(a){a.addClass("pq-grid-cell-hover ui-state-hover")};c.unHighlightCell=function(a){a.removeClass("pq-grid-cell-hover ui-state-hover")};
c.highlightRow=function(a){isNaN(a)||(a=this.getRow({rowIndxPage:a}))&&a.addClass("pq-grid-row-hover ui-state-hover")};c.unHighlightRow=function(a){isNaN(a)||(a=this.getRow({rowIndxPage:a}))&&a.removeClass("pq-grid-row-hover ui-state-hover")};c._getCreateEventData=function(){return{dataModel:this.options.dataModel,data:this.pdata,colModel:this.options.colModel}};c._findCellFromEvt=function(a){a=k(a.target).closest(".pq-grid-cell");if(null==a||0==a.length)return{rowIndxPage:null,colIndx:null,$td:null};
var b=this.getCellIndices({$td:a});b.$td=a;return b};c._initPager=function(){var a=this,b=a.options,d=b.pageModel;d.type&&(b={bootstrap:b.bootstrap,change:function(b,d){a.blurEditor({force:!0});var p=a.options.pageModel;void 0!=d.curPage&&(p.prevPage=p.curPage,p.curPage=d.curPage);void 0!=d.rPP&&(p.rPP=d.rPP);"remote"==p.type?a.remoteRequest({callback:function(){a._onDataAvailable({apply:!0,header:!1})}}):a.refreshView({header:!1,source:"pager"})},refresh:function(b){a.refreshDataAndView()}},b=k.extend(b,
d),this.pagerW=pq.pager(d.appendTo?d.appendTo:this.$footer,b))};c.generateLoading=function(){this.$loading&&this.$loading.remove();this.$loading=k("<div class='pq-loading'></div>").appendTo(this.element);k(["<div class='pq-loading-bg'></div><div class='pq-loading-mask ui-state-highlight'><div>",this.options.strLoading,"...</div></div>"].join("")).appendTo(this.$loading);this.$loading.find("div.pq-loading-bg").css("opacity",.2)};c._refreshLoadingString=function(){this.$loading.find("div.pq-loading-mask").children("div").html(this.options.strLoading)};
c.showLoading=function(){null==this.showLoadingCounter&&(this.showLoadingCounter=0);this.showLoadingCounter++;this.$loading.show()};c.hideLoading=function(){0<this.showLoadingCounter&&this.showLoadingCounter--;this.showLoadingCounter||this.$loading.hide()};c.refreshDataFromDataModel=function(a){a=a||{};var b=this.options,d=b.pageModel,f=b.dataModel.data,e,c=d.type;e=this._queueATriggers;for(var l in e){var q=e[l];delete e[l];this._trigger(l,q.evt,q.ui)}this._trigger("beforeRefreshData",null,{});this.rowIndxOffset=
0;"local"==c?(d.totalRecords=f.length,d.totalPages=b=Math.ceil(f.length/d.rPP),d.curPage>b&&(d.curPage=b),b&&!d.curPage&&(d.curPage=1),b=(d.curPage-1)*d.rPP,e=d.curPage*d.rPP,e>f.length&&(e=f.length),this.pdata=f.slice(b,e)):"remote"==c?(d.totalPages=b=Math.ceil(d.totalRecords/d.rPP),d.curPage>b&&(d.curPage=b),b&&!d.curPage&&(d.curPage=1),e=d.rPP,e>f.length&&(e=f.length),this.pdata=f.slice(0,e)):this.pdata=b.backwardCompat?f.slice(0):f;if("local"==c||"remote"==c)this.rowIndxOffset=d.rPP*(d.curPage-
1);this._trigger("dataReady",null,{source:a.source})};c.getQueryStringCRUD=function(){return""};c.remoteRequest=function(a){this.loading&&this.xhr.abort();a=a||{};var b=this,d="",f="",e=this.options,c=!1,l=this.colModel,q=e.dataModel,n=e.sortModel,g=e.filterModel,m=e.pageModel;if("function"==typeof q.getUrl)(e=q.getUrl.call(this,{colModel:l,dataModel:q,sortModel:n,groupModel:e.groupModel,pageModel:m,filterModel:g}))&&e.url&&(d=e.url),e&&e.data&&(f=e.data);else if("string"==typeof q.url){var d=q.url,
f={},e={},B={};"remote"==n.type&&(a.initBySort||this.sort({initByRemote:!0}),(n=this.iSort.getQueryStringSort())&&(f={pq_sort:n}));"remote"==m.type&&(B={pq_curpage:m.curPage,pq_rpp:m.rPP});"local"!=g.type&&(n=this.iFilterData.getQueryStringFilter())&&(c=!0,e={pq_filter:n});var n=q.postData,w=q.postDataOnce;n&&"function"==typeof n&&(n=n.call(this,{colModel:l,dataModel:q}));f=k.extend({pq_datatype:q.dataType},e,B,f,n,w)}d&&(this.loading=!0,this.showLoading(),this.xhr=k.ajax({url:d,dataType:q.dataType,
async:null==q.async?!0:q.async,cache:q.cache,contentType:q.contentType,type:q.method,data:f,beforeSend:function(a,h){if("function"==typeof q.beforeSend)return q.beforeSend.call(b,a,h)},success:function(d,f,e){"function"==typeof q.getData&&(d=q.getData.call(b,d,f,e));q.data=d.data;"remote"==m.type&&(d.curPage&&(m.curPage=d.curPage),d.totalRecords&&(m.totalRecords=d.totalRecords));b.hideLoading();b.loading=!1;b._trigger("load",null,{dataModel:q,colModel:l});a.callback&&a.callback();c&&(b._queueATriggers.filter=
{ui:{type:"remote",filterModel:g}})},error:function(a,h,d){b.hideLoading();b.loading=!1;if("function"==typeof q.error)q.error.call(b,a,h,d);else if("abort"!=d)throw"Error : "+d;}}))};c._refreshTitle=function(){this.$title.html(this.options.title)};c._destroyDraggable=function(){var a=this.element,b=a.parent(".pq-wrapper");b.length&&b.data("draggable")&&(b.draggable("destroy"),this.$title.removeClass("pq-draggable pq-no-capture"),a.unwrap(".pq-wrapper"))};c._refreshDraggable=function(){var a=this.element,
b=this.$title;this.options.draggable?(b.addClass("pq-draggable pq-no-capture"),a.parent(".pq-wrapper").length||a.wrap("<div class='pq-wrapper' />"),a.parent(".pq-wrapper").draggable({handle:b})):this._destroyDraggable()};c._refreshResizable=function(){var a=this,b=this.element,d=this.options,f=-1<(d.width+"").indexOf("%"),e=-1<(d.height+"").indexOf("%"),c="auto"==d.width,l="flex"==d.width,q="flex"==d.height;if(!d.resizable||(q||e)&&(l||f||c))this._destroyResizable();else{var n="e,s,se";if(q||e)n=
"e";else if(l||f||c)n="s";f=!0;b.hasClass("ui-resizable")&&(e=b.resizable("option","handles"),n==e?f=!1:this._destroyResizable());f&&b.resizable({helper:"ui-state-default",handles:n,minWidth:d.minWidth,minHeight:d.minHeight?d.minHeight:100,delay:0,start:function(a,h){k(h.helper).css({opacity:.5,background:"#ccc",border:"1px solid steelblue"})},resize:function(a,h){},stop:function(b,f){var p=a.element,e=p[0],c=d.width,l=d.height,q=-1<(c+"").indexOf("%"),n=-1<(l+"").indexOf("%"),r=!1;e.style.width=
e.offsetWidth+3+"px";e.style.height=e.offsetHeight+3+"px";n||"flex"==l||(r=!0,d.height=e.offsetHeight);q||"auto"==c||"flex"==c||(r=!0,d.width=e.offsetWidth);a.refresh();p.css("position","relative");r&&k(window).trigger("resize")}})}};c._refreshAfterResize=function(){var a=this.options,b=a.width,d=a.height,a=-1!=(b+"").indexOf("%")?!0:!1,b="auto"===b,d=-1!=(d+"").indexOf("%")?!0:!1;(a||b||d)&&this.refresh()};c.refresh=function(a){this.iRefresh.refresh(a)};c.refreshView=function(a){null!=this.options.editModel.indices&&
this.blurEditor({force:!0});this.refreshDataFromDataModel(a);this.refresh(a)};c._refreshPager=function(){var a=this.options,b=a.pageModel,d=b.rPP,f=b.totalRecords;b.type?(b=a.pageModel,this.pagerW||this._initPager(),this.pagerW.option(b),f>d?this.$bottom.css("display",""):a.showBottom||this.$bottom.css("display","none")):(this.pagerW&&(this.pagerW.destroy(),this.pagerW=null),a.showBottom?this.$bottom.css("display",""):this.$bottom.css("display","none"))};c.getInstance=function(){return{grid:this}};
c.refreshDataAndView=function(a){if("remote"==this.options.dataModel.location){var b=this;this.remoteRequest({callback:function(){b._onDataAvailable(a)}})}else this._onDataAvailable(a)};c.getColIndx=function(a){var b=a.dataIndx;a=a.column;var d;if(a)d=!0;else if(void 0===b)throw"dataIndx / column NA";var f=this.colModel,e=f.length;if(d)for(b=0;b<e;b++){if(f[b]==a)return b}else if(b=this.colIndxs[b],null!=b)return b;return-1};c.getColumn=function(a){if(null==a.dataIndx)throw"dataIndx N/A";return this.columns[a.dataIndx]};
c._generateCellRowOutline=function(){var a=this.options,b=a.editModel;if(this.$div_focus){if(a.debug)throw"this.$div_focus already present assert failed";}else a=this.element,b.inline&&(a=this.getCell(b.indices),a.css("padding",0).empty()),this.$div_focus=k("<div class='pq-editor-outer'><div class='pq-editor-inner'></div></div>").appendTo(a),this.$div_focus.css("zIndex",a.zIndex()+5),b=k.extend({all:!0},b.indices),b=this.getCell(b),b.css("height",b[0].offsetHeight),b.empty(),this.refreshEditorPos()};
c._removeEditOutline=function(a){if(this.$div_focus){a=this.$div_focus.find(".pq-editor-focus");a.hasClass("hasDatepicker")&&a.datepicker("hide").datepicker("destroy");if(a[0]==document.activeElement){var b=this._blurEditMode;this._blurEditMode=!0;a.blur();this._blurEditMode=b}this.$div_focus.remove();delete this.$div_focus;a=this.options.editModel;b=k.extend({},a.indices);a.indices=null;b.rowData=void 0;this.refreshCell(b)}};c.refreshEditorPos=function(){var a=this.options.editModel,b=a.cellBorderWidth,
d=this.$div_focus,f=this.getCell(a.indices);if(!f||!f.length)return!1;var a=f[0].offsetWidth,e=f[0].offsetHeight,c=this.element.offset(),f=f.offset();d.css({height:e,width:a-1,borderWidth:b,left:f.left-c.left-1,top:f.top-c.top-1})};c.setEditorPosTimer=function(){var a=this,b=this.options;this._refreshEditorPosTimer&&(window.clearInterval(this._refreshEditorPosTimer),this._refreshEditorPosTimer=null);this._refreshEditorPosTimer=window.setInterval(function(){b.editModel.indices&&a.refreshEditorPos()},
200)};c.get$Tbl=function(a,b){var d=this.$tbl,f=[];if(d&&d.length){var e=this.pqpanes,c=this.options,l=c.freezeRows,c=c.freezeCols;e.h&&e.v?null==b?a>=l?f.push(d[2],d[3]):f.push(d[0],d[1]):f=b>=c&&a>=l?d[3]:b<c&&a>=l?d[2]:b>=c&&a<l?d[1]:d[0]:f=e.v?null==b?d:b>=c?d[1]:d[0]:e.h?a>=l?d[1]:d[0]:d[0];if(f)return k(f)}};c.scrollCell=function(a){this.scrollRow(a);this.scrollColumn(a)};c.scrollY=function(a){this.vscroll.option("cur_pos",a);this.vscroll.scroll()};c.scrollRow=function(a){var b=this.options;
a=this.normalize(a);var d=a.rowIndxPage,f=a.rowData;if(!this.pdata||d>=this.pdata.length||!f||f.pq_hidden)return!1;b.virtualY?this._scrollRowVirtual(a):this.iMouseSelection.scrollRowNonVirtual(a)};c._scrollRowVirtual=function(a){var b=this.options,d=a.rowIndxPage,f=this.iHierarchy?!0:!1,e=a.rowIndx;a=this.vscroll;var c=this.scrollCurPos,d=null==d?e-this.rowIndxOffset:d,e=parseInt(b.freezeRows);if(!(d<e)&&(b=this._calcCurPosFromRowIndxPage(d),null!=b)){b<c&&(a.option("cur_pos",b),a.scroll());var l=
this.get$Tbl(d);if(!l||!l.length)return null;var q=l.children("tbody").children("tr[pq-row-indx="+d+"]"),n=d=q.last();1<q.length&&(n=q.first());var g=d[0],q=parseInt(l.css("marginTop"));if(void 0==g)a.option("cur_pos",b),a.scroll();else{var g=g.offsetTop+g.offsetHeight,k=this.$cont[0].offsetHeight,m=this._getSBHeight(),n=n.prev("tr");if(!n.hasClass("pq-row-hidden")&&!n.hasClass("pq-last-frozen-row")&&g>k-m-q){n=g-(k-m-q);q=l.children().children("tr");g=l=0;e?(e=q.filter("tr.pq-last-frozen-row").last().next(),
0==e.length&&(e=q.filter("tr.pq-row-hidden").next())):e=q.filter("tr.pq-row-hidden").next();do{if(!e.length)break;l+=e[0].offsetHeight;if(e[0]==d[0])break;else if(f&&!1!=e.hasClass("pq-detail-child")||g++,l>=n)break;e=e.next()}while(1);f=c+g;f>b&&(f=b);c=a.option("num_eles");c<f+1&&(c=f+1);a.option({num_eles:c,cur_pos:f});a.scroll()}}}};c.blurEditor=function(a){if(this.$div_focus){var b=this.$div_focus.find(".pq-editor-focus");if(a&&a.blurIfFocus)document.activeElement==b[0]&&b.blur();else return b.triggerHandler("blur",
a)}};c._scrollColumnVirtual=function(a){var b=a.colIndx,d=this.hscroll,b=null==b?this.colIndxs[a.dataIndx]:b;a=this.options.freezeCols;var f=this._calcRightEdgeCol(b).width,e=this.iRefresh.getEContWd();if(f>e){for(var f=this.calcWidthCols(-1,b+1)-e,e=this.colModel,c=e.length,l=0,q=0,n=a;n<c;n++){var g=e[n];g.hidden||(l+=g.outerWidth);if(n==b){q=n-a-this._calcNumHiddenUnFrozens(n);break}else if(l>=f){q=n-a-this._calcNumHiddenUnFrozens(n)+1;break}}d.option("cur_pos",q);d.scroll();return!0}return b>=
a&&b<this.initH?(b=b-a-this._calcNumHiddenUnFrozens(b),d.option("cur_pos",b),d.scroll(),!0):!1};c.scrollColumn=function(a){var b=this.options;return"flex"!==b.width||b.maxWidth?b.virtualX?this._scrollColumnVirtual(a):this.iMouseSelection.scrollColumnNonVirtual(a):!1};c.selection=function(a){if(a){var b=a.method,d,f=a.type;"row"==f?d=this.iRows[b](a):"cell"==f&&(d=this.iCells[b](a));if("add"==b||"remove"==b||"removeAll"==b)this.iSelection.dirty=!0,this.iSelection._trigger();return d}a=this.iSelection;
a.isDirty()&&a.refresh();return a};c.goToPage=function(a){var b=this.options.pageModel;if("local"==b.type||"remote"==b.type){var d=a.rowIndx,f=b.rPP;a=null==a.page?Math.ceil((d+1)/f):a.page;a!=b.curPage&&(b.curPage=a,"local"==b.type?this.refreshView():this.refreshDataAndView())}};c.setSelection=function(a){if(null==a)return this.iSelection.removeAll(),!0;var b=this.pdata;if(!b||!b.length)return!1;a=this.normalize(a);var b=a.rowIndx,d=a.rowIndxPage,f=a.colIndx;a.rowData&&null==b&&(d=this.getRowIndx(a),
a.rowIndx=b=d.rowIndx,a.rowIndxPage=d.rowIndxPage);if(null==b||0>b||0>f||f>=this.colModel.length)return!1;this.goToPage(a);d=b-this.rowIndxOffset;this.scrollRow({rowIndxPage:d});null==f?this.range({r1:b}).select():(this.scrollColumn({colIndx:f}),this.range({r1:b,c1:f}).select());!1!==a.focus&&this.focus({rowIndxPage:d,colIndx:null==f?this.getFirstVisibleCI():f})};c.getColModel=function(){return this.colModel};c.saveEditCell=function(a){var b=this.options,d=b.editModel;if(!d.indices)return null;var f=
k.extend({},d.indices);a=a?a.evt:null;var e=f.rowIndxPage,d=e+this.rowIndxOffset,c=this.colModel[f.colIndx],f=c.dataIndx,l=this.pdata[e],q=b.dataModel,n;if(null==l)return null;if(null!=e){b=this.getEditCellData();if(k.isPlainObject(b)){n={};for(var g in b)n[g]=l[g]}else n=this.readCell(l,c);"<br>"==b&&(b="");null==n&&""===b&&(b=null);g={rowIndx:d,rowIndxPage:e,dataIndx:f,column:c,newVal:b,value:b,oldVal:n,rowData:l,dataModel:q};if(!1===this._trigger("cellBeforeSave",a,g))return!1;e={};c=!1;k.isPlainObject(b)?
(e=b,c=!0):e[f]=b;if(!1===this.updateRow({row:e,rowIndx:d,refresh:c,silent:!0,source:"edit",checkEditable:!1}))return!1;this._trigger("cellSave",a,g);return!0}};c._addInvalid=function(a){};c._digestData=function(a){if(!1===this._trigger("beforeValidate",null,a))return!1;var b=this.options,d=b.editModel,f=b.dataModel,e=f.data,c=b.colModel,l=b.pageModel,q=b.historyModel,n=a.validate,n=null==n?d.validate:n,g="remote"==l.type,k=a.allowInvalid,k=null==k?d.allowInvalid:k,m=b.trackModel,d=a.track,d=null==
d?null==b.track?m.on:b.track:d,w=a.history,w=null==w?q.on:w,x=this.iHistory,q=this.iUCData,D=a.checkEditable,D=null==D?!0:D,E=a.checkEditableAdd,E=null==E?D:E,m=this.saveCell,F=this.columns,H=this.colIndxs,I=a.source,P=this.rowIndxOffset,L=this.getValueFromDataType,O=a.rowList,N=O.length;e||(e=b.dataModel.data=[]);for(var K=[],M=0;M<N;M++){var G=O[M],J=G.newRow,T=G.rowData,Q=G.type,W=G.checkEditable,R=G.rowIndx,X=G.oldRow;null==W&&("update"==Q?W=D:"add"==Q&&(W=E));if("update"==Q){if(!X)throw"oldRow required while update";
if(W&&!0!==b.editable&&!1===this.isEditableRow({rowIndx:R,rowData:T}))continue}else if("delete"==Q){K.push(G);continue}if("add"==Q)for(var U=0,Y=c.length;U<Y;U++){var V=c[U],S=V.dataIndx;J[S]=J[S]}for(S in J)if(V=F[S],U=H[S],V)if(W&&null!=V.editable&&!1===this.isEditableCell({rowIndx:R,colIndx:U,dataIndx:S}))delete J[S];else{var Z=V.dataType,U=L(J[S],Z),Y=X?X[S]:void 0,Y=void 0!==Y?L(Y,Z):void 0;J[S]=U;if(n&&V.validations)if("edit"==I&&!1===k){if(V=this.isValid({focusInvalid:!0,dataIndx:S,rowIndx:R,
value:U}),!1==V.valid&&!V.warn)return!1}else V=this.iIsValid.isValidCell({column:V,rowData:"add"==Q?J:T,allowInvalid:k,value:U}),!1===V.valid&&(!1!==k||V.warn||delete J[S]);"update"==Q&&U===Y&&(delete J[S],X&&delete X[S])}if(J)if("update"==Q)for(S in J){K.push(G);break}else K.push(G)}O=a.rowList=K;N=O.length;if(!N)return"edit"==I?null:!1;w&&(x.increment(),x.push({rowList:O}));for(M=0;M<N;M++)if(G=O[M],Q=G.type,J=G.newRow,R=G.rowIndx,b=G.rowIndxPage,T=G.rowData,"update"==Q)for(S in d&&q.update({rowData:T,
row:J,refresh:!1}),J)V=F[S],U=J[S],m(T,V,U);else if("add"==Q)d&&q.add({rowData:J}),null==R&&null==b?e.push(J):(b=R-P,b=g?b:R,e.splice(b,0,J)),g&&l.totalRecords++;else if("delete"==Q){b=this.getRowIndx({rowData:T,dataUF:!0});c=b.uf;R=b.rowIndx;if(d)q["delete"]({rowIndx:R,rowData:T});b=R-P;b=g?b:R;c?f.dataUF.splice(R,1):(b=e.splice(b,1))&&b.length&&g&&l.totalRecords--}this._trigger("change",null,a);return!0};c.refreshColumn=function(a){a=this.normalize(a);var b=this.initV,d=this.finalV,f=this.options.freezeRows,
e=a.colIndx,c=a.dataIndx,l=a.column;a.skip=!0;for(var q=0;q<=d;q++)q<b&&q>=f&&(q=b),a.rowIndxPage=q,this.refreshCell(a);this._trigger("refreshColumn",null,{column:l,colIndx:e,dataIndx:c});this.iRefresh.softRefresh()};c.refreshCell=function(a){a=this.normalize(a);if(this.pdata){var b=a.skip,d=a.rowIndx,f=a.rowIndxPage,e=a.colIndx,c=this.iMerge;if(a.rowData){var l=this.getCell({all:!0,rowIndxPage:f,colIndx:e});if(l&&0<l.length){var q=a;c.ismergedCell(d,e)&&(q=c.getRootCell(d,e,"a"));var d=this.iGenerateView.renderCell(q),
n;d&&(l.replaceWith(d),(n=this._focusElement)&&n.rowIndxPage==f&&this.focus(),b||(this._trigger("refreshCell",null,a),this.iRefresh.softRefresh()))}}}};c.refreshRow=function(a){a=this.normalize(a);if(this.pdata){var b=a.rowIndx,d=a.rowIndxPage,f=this.options,e=f.freezeRows,c=a.rowData;if(!c||c.pq_hidden||d>this.finalV||d<this.initV&&d>=e)return null;var l=this.getRow({all:!0,rowIndxPage:d}),q,n=[];this.iGenerateView.refreshRow(d,n);n=n.join("");if(l&&l.length)l.replaceWith(n);else if(f.virtualY)if(d==
this.finalV)this.$tbl.append(n);else if(d==this.initV)for(f=this.$tbl,l=0;l<f.length;l++)k(f[l]).children("tbody").children(e?".pq-last-frozen-row":"tr:first").after(n);else throw"refreshRow > rip not found";else return!1;(q=this._focusElement)&&q.rowIndxPage==d&&this.focus();this._trigger("refreshRow",null,{rowData:c,rowIndx:b,rowIndxPage:d});!1!==a.refresh&&this.iRefresh.softRefresh();return!0}};c.quitEditMode=function(a){if(!this._quitEditMode){var b=!1,d=!1,f=!1,e=this.options.editModel,c=e.indices,
l=void 0;this._quitEditMode=!0;a&&(b=a.old,d=a.silent,f=a.fireOnly,l=a.evt);c&&(d||b||this._trigger("editorEnd",l,c),f||(this._removeEditOutline(a),e.indices=null));this._quitEditMode=null}};c.getViewPortRowsIndx=function(){return{beginIndx:this.initV,endIndx:this.finalV}};c.getViewPortIndx=function(){return{initV:this.initV,finalV:this.finalV,initH:this.initH,finalH:this.finalH}};c.getRowIndxOffset=function(){return this.rowIndxOffset};c.getEditCell=function(){var a=this.options.editModel;if(a.indices){var a=
this.getCell(a.indices),b=this.$div_focus.children(".pq-editor-inner"),d=b.find(".pq-editor-focus");return{$td:a,$cell:b,$editor:d}}return{}};c.editCell=function(a){a=this.normalize(a);var b=this.iMerge,d=a.rowIndx,f=a.colIndx;if(b.ismergedCell(d,f)&&(b=b.getRootCell(d,f,"o"),b.rowIndx!=a.rowIndx||b.colIndx!=a.colIndx))return!1;this.scrollRow(a);this.scrollColumn(a);if((b=this.getCell(a))&&b.length)return this._editCell(a)};c.getFirstEditableColIndx=function(a){if(null==a.rowIndx)throw"rowIndx NA";
if(!this.isEditableRow(a))return-1;for(var b=this.colModel,d=0;d<b.length;d++)if(a.colIndx=d,this.isEditableCell(a)&&!b[d].hidden)return d;return-1};c.editFirstCellInRow=function(a){var b=this.rowIndxOffset,d=a.rowIndx;a=a.rowIndxPage;d=null==d?a+b:d;a=null==a?d-b:a;b=this.getFirstEditableColIndx({rowIndx:d});-1!=b&&this.editCell({rowIndxPage:a,colIndx:b})};c._editCell=function(b){var d=this.normalize(b),f=this;b=d.evt;var e=d.rowIndxPage,c=d.colIndx,l=f.pdata;if(!l||e>=l.length)return!1;var q=this.options,
n=q.editModel,l=l[e],g=d.rowIndx,m=this.colModel[c],C=m.dataIndx,B=f.readCell(l,m),w={rowIndx:g,rowIndxPage:e,cellData:B,rowData:l,dataIndx:C,colIndx:c,column:m},x=m.editor,x="function"==typeof x?x.call(this,w):x;void 0===x&&"function"==typeof q.geditor&&(x=q.geditor.call(this,w));if(!1!==x){x&&x.getData&&(n._getData=x.getData);var D=q.editor,E=x?k.extend({},D,x):D,q=!1;if(n.indices){x=n.indices;if(x.rowIndxPage==e&&x.colIndx==c){this.refreshEditorPos();var F=this.$div_focus.find(".pq-editor-focus");
window.setTimeout(function(){F.focus()},0);return!1}if(!1===this.blurEditor({evt:b}))return!1;this.quitEditMode({evt:b})}n.indices={rowIndxPage:e,rowIndx:g,colIndx:c,column:m,dataIndx:C};this._generateCellRowOutline();x=this.$div_focus.children(".pq-editor-inner");"right"==m.align?x.addClass("pq-align-right"):"center"==m.align?x.addClass("pq-align-center"):x.addClass("pq-align-left");w.$cell=x;var H,I=E.type,d=null==d.select?E.select:d.select,P=E.init,L=E.valueIndx,O=E.dataMap,N=E.mapIndices,N=N?
N:{},K=E.cls||"",K="function"===typeof K?K.call(this,w):K;H="pq-editor-focus "+K;var K=H+" pq-cell-editor ",M=E.attr||"",M="function"===typeof M?M.call(this,w):M,G=E.style||"",G=(G="function"===typeof G?G.call(this,w):G)?"style='"+G+"'":"";w.cls=H;w.attr=M;"function"==typeof I&&(H=I.call(this,w))&&(I=H);D._type=I;"checkbox"==I?(E=E.subtype,x.html("<input "+(B?"checked='checked'":"")+" class='"+K+"' "+M+" "+G+" type=checkbox name='"+C+"' />"),D=x.children("input"),"triple"==E&&(D.pqval({val:B}),x.click(function(a){k(this).children("input").pqval({incr:!0})}))):
"textarea"==I||"select"==I||"textbox"==I?("textarea"==I?H="<textarea class='"+K+"' "+M+" "+G+" name='"+C+"' ></textarea>":"select"==I?(D=E.options||[],"function"===typeof D&&(D=D.call(this,w)),K=[M," class='",K,"' ",G," name='",C,"'"].join(""),H=a.select({options:D,attr:K,prepend:E.prepend,labelIndx:E.labelIndx,valueIndx:L,groupIndx:E.groupIndx,dataMap:O})):H="<input class='"+K+"' "+M+" "+G+" type=text name='"+C+"' />",k(H).appendTo(x).val("select"==I&&null!=L&&(N[L]||this.columns[L])?N[L]?l[N[L]]:
l[L]:B)):I&&"contenteditable"!=I||(x.html("<div contenteditable='true' tabindx='0' "+G+" "+M+" class='"+K+"'></div>"),x.children().html(B),q=!0);"function"==typeof P&&P.call(this,w);var f=this,F=x.children(".pq-editor-focus"),J=n.filterKeys;(B=m.editModel)&&void 0!==B.filterKeys&&(J=B.filterKeys);var T={$cell:x,$editor:F,dataIndx:C,column:m,colIndx:c,rowIndx:g,rowIndxPage:e,rowData:l};n.indices=T;F.data({FK:J}).on("click",function(a){k(this).focus()}).on("keydown",function(a){f.iKeyNav._keyDownInEdit(a)}).on("keypress",
function(a){return f.iKeyNav._keyPressInEdit(a,{FK:J})}).on("keyup",function(a){return f.iKeyNav._keyUpInEdit(a,{FK:J})}).on("blur",function(a,b){var d=f.options.editModel,h=d.onBlur,e="save"==h,c="validate"==h,p=d.cancelBlurCls,l=b?b.force:!1;if(!f._quitEditMode&&!f._blurEditMode&&d.indices){d=k(a.target);if(!l){if(!1===f._trigger("editorBlur",a,T)||!h||p&&d.hasClass(p))return;if(d.hasClass("hasDatepicker")){if(d.datepicker("widget").is(":visible"))return!1}else if(d.hasClass("ui-autocomplete-input")){if(d.autocomplete("widget").is(":visible"))return}else if(d.hasClass("ui-multiselect")){if(k(".ui-multiselect-menu").is(":visible")||
k(document.activeElement).closest(".ui-multiselect-menu").length)return}else if(d.hasClass("pq-select-button")&&(k(".pq-select-menu").is(":visible")||k(document.activeElement).closest(".pq-select-menu").length))return}f._blurEditMode=!0;if(!f.saveEditCell({evt:a,silent:l||e||!c})&&!l&&c)return f._deleteBlurEditMode(),!1;f.quitEditMode({evt:a});f._deleteBlurEditMode()}}).on("focus",function(a){f._trigger("editorFocus",a,T)});f._trigger("editorBegin",b,T);F.focus();window.setTimeout(function(){!1===
k(document.activeElement).hasClass("pq-editor-focus")&&(f.element?f.element.find(".pq-editor-focus"):k()).focus()},0);if(d)if(q)try{var Q=F[0],W=document.createRange();W.selectNodeContents(Q);var R=window.getSelection();R.removeAllRanges();R.addRange(W)}catch(X){}else F.select()}};c._deleteBlurEditMode=function(a){var b=this;a=a?a:{};b._blurEditMode&&(a.timer?window.setTimeout(function(){delete b._blurEditMode},0):delete b._blurEditMode)};c.getRow=function(a){var b=this.normalize(a);a=b.rowIndxPage;
var b=b.all?this.$tbl:this.get$Tbl(a),d=k();if(b&&b.length){var f=b.children("tbody");null!=a&&(d=f.children("tr[pq-row-indx="+a+"]"),d.length>b.length&&(d=d.filter(".pq-detail-master")))}return d};c.getCell=function(a){var b=a.all,d=this.options,f=this.normalize(a);a=f.rowIndxPage;var e=f.rowIndx,c=f.colIndx,l=this.iMerge;if(l.ismergedCell(e,c)){d=l.getRootCell(e,c,"a");e=l.getRootCell(e,c,"o");if(!(a===e.rowIndxPage&&c===e.colIndx||a===d.rowIndxPage&&c===d.colIndx))return k();a=d.rowIndxPage;c=
e.colIndx}else if(a>=d.freezeRows&&(a<this.initV||a>this.finalV)||c>=d.freezeCols&&(c<this.initH||c>this.finalH)||!f.rowData||!f.column||f.rowData.pq_hidden||f.column.hidden)return k();return(b=b?this.$tbl:this.get$Tbl(a,c))&&b.length?b.children().children("tr[pq-row-indx="+a+"]").children("[pq-col-indx="+c+"]"):k()};c.getCellHeader=function(a){var b=a.colIndx;a=a.dataIndx;b=null==b?this.colIndxs[a]:b;a=this.$tbl_header;var d=this.options.freezeCols;return a?(1<a.length&&(a=b>=d?k(a[1]):k(a[0])),
b=a.find("[pq-col-indx="+b+"].pq-grid-col-leaf")):k()};c.getEditorIndices=function(){var a=this.options.editModel.indices;return a?k.extend({},a):null};c.getEditCellData=function(){var a=this.options,b=a.editModel,d=b.indices;if(!d)return null;var f=d.colIndx,e=d.rowIndxPage,c=d.rowIndx,l=this.colModel[f],q=l.editor,n=a.editor,a=q?k.extend({},n,q):n,g=a.valueIndx,m=a.labelIndx,q=(q=a.mapIndices)?q:{},B=l.dataIndx,w=this.$div_focus.children(".pq-editor-inner"),x,D=b._getData||a.getData;b._getData=
void 0;if("function"==typeof D)x=D.call(this,{$cell:w,rowData:d.rowData,dataIndx:B,rowIndx:c,rowIndxPage:e,column:l,colIndx:f});else if(b=n._type,"checkbox"==b)x=w.children(),x="triple"==a.subtype?x.pqval():x.is(":checked")?!0:!1;else if("contenteditable"==b)x=w.children().html();else if((d=w.find('*[name="'+B+'"]'))&&d.length)if("select"==b&&null!=g)if(q[g]||this.columns[g]){if(x={},x[q[g]?q[g]:g]=d.val(),x[q[m]?q[m]:m]=d.find("option:selected").text(),a=a.dataMap)if(b=d.find("option:selected").data("map"))for(d=
0;d<a.length;d++)f=a[d],x[q[f]?q[f]:f]=b[f]}else x=d.val();else x=d.val();else(d=w.find(".pq-editor-focus"))&&d.length&&(x=d.val());return x};c.getCellIndices=function(a){a=a.$td;if(null==a||0==a.length||a.closest(".pq-grid")[0]!=this.element[0])return{};var b=a.parent("tr").attr("pq-row-indx"),d;null!=b&&(b=parseInt(b),d=b+this.rowIndxOffset);a=a.attr("pq-col-indx");null!=a&&(a=parseInt(a));return this.iMerge.getRootCell(d,a,"o")};c.getRowsByClass=function(a){var b=this.options,d="remote"==b.pageModel.type,
f=this.rowIndxOffset,b=b.dataModel.data,e=[];if(null==b)return e;for(var c=0,l=b.length;c<l;c++){var q=b[c];if(q.pq_rowcls&&(a.rowData=q,this.hasClass(a))){var q={rowData:q},n=d?c+f:c,g=n-f;q.rowIndx=n;q.rowIndxPage=g;e.push(q)}}return e};c.getCellsByClass=function(a){var b=this.options,d="remote"==b.pageModel.type,f=this.rowIndxOffset,b=b.dataModel.data,e=[];if(null==b)return e;for(var c=0,l=b.length;c<l;c++){var q=b[c],n=d?c+f:c,g=q.pq_cellcls;if(g)for(var k in g)g={rowData:q,rowIndx:n,dataIndx:k,
cls:a.cls},this.hasClass(g)&&(g=this.normalize(g),e.push(g))}return e};c.data=function(a){var b=a.dataIndx,d=a.colIndx,b=null!=d?this.colModel[d].dataIndx:b,d=a.data,f=null==d||"string"==typeof d?!0:!1;a=a.rowData||this.getRowData(a);if(!a)return{data:null};if(null==b){b=a.pq_rowdata;if(f){var e;null!=b&&(e=null==d?b:b[d]);return{data:e}}d=k.extend(!0,a.pq_rowdata,d);a.pq_rowdata=d}else{var c=a.pq_celldata;if(f)return null!=c&&(b=c[b],e=null==d||null==b?b:b[d]),{data:e};c||(a.pq_celldata={});d=k.extend(!0,
a.pq_celldata[b],d);a.pq_celldata[b]=d}};c.attr=function(a){var b=a.rowIndx,d=a.dataIndx,f=a.colIndx,d=null!=f?this.colModel[f].dataIndx:d,f=a.attr,e=null==f||"string"==typeof f?!0:!1,c=this.rowIndxOffset,l=a.refresh;a=a.rowData||this.getRowData(a);if(!a)return{attr:null};e||!1===l||null!=b||(b=this.getRowIndx({rowData:a}).rowIndx);if(null==d){d=a.pq_rowattr;if(e){var n;null!=d&&(n=null==f?d:d[f]);return{attr:n}}f=k.extend(!0,a.pq_rowattr,f);a.pq_rowattr=f;!1!==l&&null!=b&&(b=this.getRow({rowIndxPage:b-
c}))&&(d=q(f),b.attr(d))}else{var g=a.pq_cellattr;if(e)return null!=g&&(b=g[d],n=null==f||null==b?b:b[f]),{attr:n};g||(a.pq_cellattr={});f=k.extend(!0,a.pq_cellattr[d],f);a.pq_cellattr[d]=f;!1!==l&&null!=b&&(b=this.getCell({rowIndxPage:b-c,dataIndx:d}))&&(d=q(f),b.attr(d))}};var q=function(a){var b={},d;for(d in a){var f=a[d];if(f)if("title"==d)f=f.replace(/\"/g,"&quot;"),b[d]=f;else if("style"==d&&"object"==typeof f){var e=[],c,l;for(l in f)(c=f[l])&&e.push(l+":"+c);(f=e.join(";")+(e.length?";":
""))&&(b[d]=f)}else"object"==typeof f&&(f=JSON.stringify(f)),b[d]=f}return b};c.removeData=function(a){var b=a.dataIndx,d=a.colIndx,b=null!=d?this.colModel[d].dataIndx:b,d=a.data,d=null==d?[]:d,d="string"==typeof d?d.split(" "):d,f=d.length,e=a.rowData||this.getRowData(a);if(e)if(null==b){if(b=e.pq_rowdata){if(f)for(a=0;a<f;a++){var c=d[a];delete b[c]}f&&!k.isEmptyObject(b)||delete e.pq_rowdata}}else if((e=e.pq_celldata)&&e[b]){var l=e[b];if(f)for(a=0;a<f;a++)c=d[a],delete l[c];f&&!k.isEmptyObject(l)||
delete e[b]}};c.removeAttr=function(a){var b=a.rowIndx,d=a.dataIndx,f=a.colIndx,d=null!=f?this.colModel[f].dataIndx:d,e=a.attr,e=null==e?[]:e,e="string"==typeof e?e.split(" "):e,c=e.length,f=b-this.rowIndxOffset,l=a.refresh,q=a.rowData||this.getRowData(a);if(q)if(!1!==l&&null==b&&(b=this.getRowIndx({rowData:q}).rowIndx),null==d){if(d=q.pq_rowattr){if(c)for(a=0;a<c;a++){var n=e[a];delete d[n]}else for(n in d)e.push(n);c&&!k.isEmptyObject(d)||delete q.pq_rowattr}!1!==l&&null!=b&&e.length&&(e=e.join(" "),
(b=this.getRow({rowIndxPage:f}))&&b.removeAttr(e))}else{if((q=q.pq_cellattr)&&q[d]){var g=q[d];if(c)for(a=0;a<c;a++)n=e[a],delete g[n];else for(n in g)e.push(n);c&&!k.isEmptyObject(g)||delete q[d]}!1!==l&&null!=b&&e.length&&(e=e.join(" "),(b=this.getCell({rowIndxPage:f,dataIndx:d}))&&b.removeAttr(e))}};c.normalize=function(a){var b={},d;for(d in a)b[d]=a[d];var f=b.rowIndx,e=b.rowIndxPage;a=b.dataIndx;d=b.colIndx;if(null!=e||null!=f){var c=this.rowIndxOffset,f=null==f?parseInt(e,10)+c:f,e=null==e?
parseInt(f,10)-c:e;b.rowIndx=f;b.rowIndxPage=e;b.rowData=b.rowData||this.getRowData(b)}if(null!=d||null!=a)f=this.colModel,a=null==a?f[d]?f[d].dataIndx:void 0:a,d=null==d?this.colIndxs[a]:d,b.column=f[d],b.colIndx=d,b.dataIndx=a;return b};c.addClass=function(a){var b=this.normalize(a),d=b.rowIndxPage,f=b.dataIndx,e=pq.arrayUnique;a=b.cls;var c=b.refresh,l=b.rowData;if(l)if(!1!==c&&null==d&&(d=this.getRowIndx({rowData:l}).rowIndxPage),null==f){var f=l.pq_rowcls,q;q=e((f?f+" "+a:a).split(/\s+/)).join(" ");
l.pq_rowcls=q;!1!==c&&null!=d&&(d=this.getRow({rowIndxPage:d}))&&d.addClass(a)}else{b=[];"function"!=typeof f.push?b.push(f):b=f;var n=l.pq_cellcls;n||(n=l.pq_cellcls={});for(var l=0,g=b.length;l<g;l++)f=b[l],q=(q=n[f])?q+" "+a:a,q=e(q.split(/\s+/)).join(" "),n[f]=q,!1!==c&&null!=d&&(f=this.getCell({rowIndxPage:d,dataIndx:f}))&&f.addClass(a)}};c.removeClass=function(a){var b=this.normalize(a),d=b.rowIndx,f=b.rowData,e=b.dataIndx;a=b.cls;b=b.refresh;if(f){var c=f.pq_cellcls,l=f.pq_rowcls;!1!==b&&null==
d&&(d=this.getRowIndx({rowData:f}).rowIndx);if(null==e)l&&(f.pq_rowcls=this._removeClass(l,a),null!=d&&!1!==b&&(d=this.getRow({rowIndx:d}))&&d.removeClass(a));else if(c){l=[];"function"!=typeof e.push?l.push(e):l=e;for(var q=0,n=l.length;q<n;q++){var e=l[q],g=c[e];g&&(f.pq_cellcls[e]=this._removeClass(g,a),null!=d&&!1!==b&&(e=this.getCell({rowIndx:d,dataIndx:e}))&&e.removeClass(a))}}}};c.hasClass=function(a){var b=a.dataIndx,d=a.cls;a=this.getRowData(a);d=new RegExp("\\b"+d+"\\b");return a?null==
b?(b=a.pq_rowcls)&&d.test(b)?!0:!1:(a=a.pq_cellcls)&&a[b]&&d.test(a[b])?!0:!1:null};c._removeClass=function(a,b){if(a&&b){for(var d=a.split(/\s+/),f=b.split(/\s+/),e=[],c=0,l=d.length;c<l;c++){for(var q=d[c],n=!1,g=0,k=f.length;g<k;g++)if(q===f[g]){n=!0;break}n||e.push(q)}return 1<e.length?e.join(" "):1===e.length?e[0]:null}};c.getRowIndx=function(a){var b=a.$tr,d=a.rowData,f=this.rowIndxOffset;if(d){var e=this.options.dataModel,b=this.get_p_data(),c=!1;a=a.dataUF?e.dataUF:null;e=!1;if(b)for(var l=
0,q=b.length;l<q;l++)if(b[l]==d){e=!0;break}if(!e&&a)for(c=!0,l=0,q=a.length;l<q;l++)if(a[l]==d){e=!0;break}return e?{rowIndxPage:c?void 0:l-f,uf:c,rowIndx:l,rowData:d}:{}}if(null==b||0==b.length)return{};d=b.attr("pq-row-indx");if(null==d)return{};d=parseInt(d);return{rowIndxPage:d,rowIndx:d+f}};c.search=function(a){var b=this.options,d=a.row;a=a.first;for(var f=[],e=this.rowIndxOffset,c="remote"==b.pageModel.type,b=b.dataModel.data,l=0,q=b.length;l<q;l++){var n=b[l],g=!0,k;for(k in d)d[k]!==n[k]&&
(g=!1);if(g&&(n=this.normalize({rowIndx:c?l+e:l}),f.push(n),a))break}return f};var n=function(a){this.options=a.options;this.that=a},d=n.prototype;d._incrRowIndx=function(a,b){var d=this.that,f=a;b=1;for(var d=d.pdata,e=0,c=a+1,l=d.length;c<l&&(d[c].pq_hidden||(e++,f=c,e!=b));c++);return f};d._decrRowIndx=function(a,b){var d=a,f=this.that.pdata;b=1;for(var e=0,c=a-1;0<=c&&(f[c].pq_hidden||(e++,d=c,e!=b));c--);return d};d._decrRowIndx2=function(a,b){var d=this.that,f=a+d.rowIndxOffset,e=d.iMerge,d=
d.pdata;if(e.ismergedCell(f,b)){var c=e.getRootCell(f,b,"a"),f=e.getData(f,b,"proxy_cell");b=c.colIndx;b=f?f.colIndx:b}for(f=a-1;0<=f;f--)if(!d[f].pq_hidden){a=f;break}return{rowIndxPage:a,colIndx:b}};d._incrRowIndx2=function(a,b){var d=this.that,f=a+d.rowIndxOffset,e=d.iMerge,c,d=d.pdata;if(c=e.ismergedCell(f,b)){var l=e.getRootCell(f,b,"a"),f=e.getData(f,b,"proxy_cell");b=l.colIndx;a=c.rowspan?a+c.rowspan-1:0;b=f?f.colIndx:b}f=a+1;for(e=d.length;f<e;f++)if(!d[f].pq_hidden){a=f;break}return{rowIndxPage:a,
colIndx:b}};c.addColumn=function(a){for(var b=a.colList||[{colIndx:a.colIndx,column:a.column}],d=!1!==a.history,f=this.options.colModel,e=0;e<b.length;e++){var c=b[e].colIndx,l=b[e].column;void 0==l.dataIndx&&(l.dataIndx=Math.random());null==c&&(c=b.colIndx=f.length);f.splice(c,0,l)}this.iColModel.init();d&&(this.iHistory.increment(),b.type="add",this.iHistory.push({colList:b}));this._trigger("addColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};c.deleteColumn=function(a){for(var b=a.colList||
[{colIndx:a.colIndx}],d=!1!==a.history,f=this.options.colModel,e=b.length-1;0<=e;e--){var c=b[e],l=f.splice(c.colIndx,1)[0];c.column=l}this.iColModel.init();d&&(this.iHistory.increment(),b.type="delete",this.iHistory.push({colList:b}));this._trigger("deleteColumn",null,{colList:b});!1!==a.refresh&&this.refreshView()};d._incrIndx=function(a,b,d){var f=this.that,e=f.iMerge,c,l,q,n,g=f.pdata,k=f.rowIndxOffset,m=f[d?"getLastVisibleRIP":"getFirstVisibleRIP"](),w=f.colModel,x=w.length;if(null==b){if(a==
m)return null;a=this[d?"_incrRowIndx":"_decrRowIndx"](a);return{rowIndxPage:a}}do{l=a+k;if(f=e.ismergedCell(l,b))!n&&(c=e.getData(l,b,"proxy_cell"))&&(q=c.rowIndx-k,g[q].pq_hidden||(a=q)),g[a].pq_hidden&&(a=e.getRootCell(l,b).rowIndxPage),!n&&d&&(b+=f&&f.colspan?f.colspan-1:0);b=d?b+1:b-1;if(d&&b>=x||!d&&0>b){if(a==m)return null;a=this[d?"_incrRowIndx":"_decrRowIndx"](a);b=d?0:x-1}n=w[b]}while(n&&n.hidden);return{rowIndxPage:a,colIndx:b}};d._incrEditIndx=function(a,b,d){var f=this.that,e=f.colModel,
c=e.length,l=f.iMerge,q,n=f.rowIndxOffset,g=f[d?"getLastVisibleRIP":"getFirstVisibleRIP"]();do{var k=a+n;if(q=l.ismergedCell(k,b)){if(k=l.getData(k,b,"proxy_edit_cell"))k=k.rowIndx,a=k-n;b=d?b+q.colspan:b-1}else b=d?b+1:b-1;if(d&&b>=c||!d&&0>b){if(a==g)return null;do if(a=this[d?"_incrRowIndx":"_decrRowIndx"](a),b=f.isEditableRow({rowIndxPage:a}),a==g&&!1==b)return null;while(!1==b);b=d?0:c-1}k=a+n;if(q=l.ismergedCell(k,b))a=l.getRootCell(k,b,"o"),l.setData(a.rowIndx,a.colIndx,{proxy_edit_cell:{rowIndx:k,
colIndx:b}}),k=a.rowIndx,b=a.colIndx;q=e[b];var m=f.isEditableCell({rowIndx:k,colIndx:b,checkVisible:!0}),w=q.editor,w="function"==typeof w?w.call(f,f.normalize({rowIndx:k,colIndx:b})):w;a=k-n}while(q&&(q.hidden||!1==m||!1===w));return{rowIndxPage:a,colIndx:b}};d.getMergeCell=function(a,b){var d=this.that,f=d.options,e=d.iMerge,c,l;e.ismergedCell(a,b)&&(l=e.getRootCell(a,b,"o"),e.setData(l.rowIndx,l.colIndx,{proxy_cell:{rowIndx:a,colIndx:b}}),f.virtualY&&(c=e.getRootCell(a,b,"a")));c||(a=this.getVisibleRowIndx(a),
b=this.getVisibleColIndx(b),c=d.normalize({rowIndx:a,colIndx:b}));return c};d.getVisibleRowIndx=function(a){for(var b=this.that,d=b.pdata.length,f=a-b.rowIndxOffset,e=b.getRowData({rowIndx:a});e.pq_hidden&&f<d-1;)f++,a++,e=b.getRowData({rowIndx:a});return a};d.getVisibleColIndx=function(a){for(var b=this.that.colModel,d=b.length,f=b[a];f.hidden&&a<d-1;)a++,f=b[a];return a};c._onKeyPressDown=function(a){if(0<k(a.target).closest(".pq-grid-header").length)return!1==this._trigger("headerKeyDown",a,null)?
!1:!0;if(!1===this.iKeyNav._bodyKeyPressDown(a)||!1==this._trigger("keyDown",a,null))return!1};d._saveAndMove=function(a,b){if(null==a)return b.preventDefault(),!1;var d=this.that,f=a.rowIndxPage,e=a.colIndx;d._blurEditMode=!0;if(!1===d.saveEditCell({evt:b})||!d.pdata)return d.pdata||d.quitEditMode(b),d._deleteBlurEditMode({timer:!0,msg:"_saveAndMove saveEditCell"}),b.preventDefault(),!1;d.quitEditMode(b);if(a.incr)var c=this[a.edit?"_incrEditIndx":"_incrIndx"](f,e,!b.shiftKey),f=c?c.rowIndxPage:
f,e=c?c.colIndx:e;d.scrollRow({rowIndxPage:f});d.scrollColumn({colIndx:e});this.select({rowIndx:f+d.rowIndxOffset,colIndx:e,evt:b});a.edit&&d._editCell({rowIndxPage:f,colIndx:e});d._deleteBlurEditMode({timer:!0,msg:"_saveAndMove"});b.preventDefault();return!1};d._keyPressInEdit=function(a,b){var d=this.that,f=d.options.editModel.indices;b=b?b:{};var e=b.FK,c="Backspace Left Right Up Down Del Home End".split(" "),l=f.column.dataType;return a.key&&-1!==k.inArray(a.key,c)?!0:!1===d._trigger("editorKeyPress",
a,k.extend({},f))||e&&("float"==l||"integer"==l)&&(d="float"==l?"0123456789.-":"0123456789-",f=(f=a.charCode)?f:a.keyCode,(f=String.fromCharCode(f))&&-1==d.indexOf(f))?!1:!0};d.getValText=function(a){a=a[0].nodeName.toLowerCase();var b="text";-1!=k.inArray(a,["input","textarea","select"])&&(b="val");return b};d._keyUpInEdit=function(a,b){var d=this.that,f=d.options;b=b?b:{};var e=b.FK,f=f.editModel,c=f.indices;d._trigger("editorKeyUp",a,k.extend({},c));d=c.column.dataType;if(e&&("float"==d||"integer"==
d)){var e=k(a.target),c="integer"==d?f.reInt:f.reFloat,f=this.getValText(e),l=e.data("oldVal"),q=e[f]();if(!1==c.test(q))if(c.test(l))e[f](l);else if(d="float"==d?parseFloat(l):parseInt(l),isNaN(d))e[f](0);else e[f](d)}};d._keyDownInEdit=function(a){var b=this.that,d=b.options,f=d.editModel.indices;if(f){var e=k(a.target),c=k.ui.keyCode,l=d.editModel,q=k.extend({},f),f=q.rowIndxPage,d=q.colIndx,n=q.column.editModel,l=n?k.extend({},l,n):l,n=this.getValText(e);e.data("oldVal",e[n]());if(!1==b._trigger("editorKeyDown",
a,q))return!1;if(a.keyCode==c.TAB||a.keyCode==l.saveKey)return b=a.keyCode==c.TAB?l.onTab:l.onSave,q={rowIndxPage:f,colIndx:d,incr:b?!0:!1,edit:"nextEdit"==b},this._saveAndMove(q,a);if(a.keyCode==c.ESCAPE)return b.quitEditMode({evt:a}),b.focus({rowIndxPage:f,colIndx:d}),a.preventDefault(),!1;if(a.keyCode==c.PAGE_UP||a.keyCode==c.PAGE_DOWN)return a.preventDefault(),!1;if(l.keyUpDown&&!a.altKey){if(a.keyCode==c.DOWN)return q=this._incrRowIndx2(f,d),this._saveAndMove(q,a);if(a.keyCode==c.UP)return q=
this._decrRowIndx2(f,d),this._saveAndMove(q,a)}}};d.select=function(a){var b=this.that,d=this,f=a.rowIndx,e=a.colIndx,c=a.evt;a=this.getMergeCell(f,e);var f=a.rowIndx,e=a.colIndx,l=a.rowIndxPage;a=b.options;var q=b.iSelection,n=a.selectionModel,g=n.type,m="row"==g,B="cell"==g;(a.realFocus?function(a){clearTimeout(d.timeoutID);d.timeoutID=setTimeout(function(){a()},0)}:function(a){a()})(function(){b.scrollCell({rowIndx:f,colIndx:e});var a=q.address();if(c.shiftKey&&c.keyCode!==k.ui.keyCode.TAB&&n.type&&
"single"!=n.mode&&a.length){var d=a[a.length-1],h=d.firstR,g=d.firstC,A=d.type,z=!1;"column"==A?(d.c1=g,d.c2=e,d.r1=d.r2=d.type=void 0):"row"==A?(d.r1=h,d.r2=f,d.c1=d.c2=d.type=void 0):(a={r1:h,r2:f,c1:g,c2:e,firstR:h,firstC:g},z=!0);b.range(a,z).select()}else m?b.range({r1:f,firstR:f},!1).select():B&&b.range({r1:f,c1:e,firstR:f,firstC:e}).select();b.focus({rowIndxPage:l,colIndx:e})})};d._bodyKeyPressDown=function(a){var b=this.that,d=b.rowIndxOffset,f,e,c;c=this.options;var l=b.iMerge,q=b._focusElement,
n=c.selectionModel,g=c.editModel,m=a.ctrlKey||a.metaKey,B=k.ui.keyCode,w=a.keyCode;if(g.indices)b.$div_focus.find(".pq-cell-focus").focus();else{if(q){if(c=document.activeElement,"pq-grid-cont"!=c.className&&"TD"!=c.nodeName.toUpperCase()&&"pq-grid-excel"!=c.id)return}else{q=k(a.target);if(!q.hasClass("pq-grid-cell"))return;q=b.getCellIndices({$td:q})}var x=b.normalize(q);e=x.rowIndxPage;f=x.rowIndx;c=x.colIndx;var D=b.pdata,E=x,q=!0;if(null!=f&&null!=c&&null!=x.rowData){l.ismergedCell(f,c)&&(x=E=
l.getRootCell(f,c,"o"),e=x.rowIndxPage,f=x.rowIndx,c=x.colIndx,w==B.PAGE_UP||w==B.PAGE_DOWN||w==B.SPACE||w==B.HOME||w==B.END)&&(l=l.getData(f,c,"proxy_cell"))&&(l=l.rowIndx-d,D[l].pq_hidden||(e=l,f=e+d));if(!1==b._trigger("cellKeyDown",a,E))return!1;if(w==B.LEFT||w==B.RIGHT||w==B.UP||w==B.DOWN||n.onTab&&w==B.TAB)b=null,w==B.LEFT||w==B.TAB&&a.shiftKey?b=this._incrIndx(e,c,!1):w==B.RIGHT||w==B.TAB&&!a.shiftKey?b=this._incrIndx(e,c,!0):w==B.UP?b=this._decrRowIndx2(e,c):w==B.DOWN&&(b=this._incrRowIndx2(e,
c)),b&&(f=b.rowIndxPage+d,this.select({rowIndx:f,colIndx:b.colIndx,evt:a}));else if(w==B.PAGE_DOWN||w==B.SPACE||w==B.PAGE_UP){if(b=this[w==B.PAGE_UP?"pageUp":"pageDown"](e))e=b.rowIndxPage,null!=e&&this.select({rowIndx:e+d,colIndx:c,evt:a})}else w==B.HOME?(m?f=b.getFirstVisibleRIP()+d:c=b.getFirstVisibleCI(),this.select({rowIndx:f,colIndx:c,evt:a})):w==B.END?(m?f=b.getLastVisibleRIP()+d:c=b.getLastVisibleCI(),this.select({rowIndx:f,colIndx:c,evt:a})):w==B.ENTER?(e=E.rowIndxPage,c=E.colIndx,(n=b.getCell({rowIndxPage:e,
colIndx:c}))&&0<n.length&&(f=e+d,d=b.isEditableRow({rowIndx:f}),B=b.isEditableCell({rowIndx:f,colIndx:c}),d&&B?b.editCell({rowIndxPage:e,colIndx:c}):(b=n.find("button"),b.length&&k(b[0]).click()))):m&&"65"==w?(b=b.iSelection,"row"==n.type&&"single"!=n.mode?b.selectAll({type:"row",all:n.all}):"cell"==n.type&&"single"!=n.mode&&b.selectAll({type:"cell",all:n.all})):g.pressToEdit&&(32<=w&&127>=w||189==w)&&!m?46==w?b.clear():(e=E.rowIndxPage,c=E.colIndx,(n=b.getCell({rowIndxPage:e,colIndx:c}))&&0<n.length&&
(f=e+d,d=b.isEditableRow({rowIndx:f}),B=b.isEditableCell({rowIndx:f,colIndx:c}),d&&B&&b.editCell({rowIndxPage:e,colIndx:c,select:!0})),q=!1):q=!1;q&&a.preventDefault()}}};d.incrPageSize=function(){for(var a=this.that,b=a.$tbl,d=b.children("tbody").children(".pq-grid-row"),b=parseInt(b.css("marginTop")),b=a.iRefresh.getEContHt()-b,f=d.length-1;0<=f;f--){var e=d[f];if(e.offsetTop<b)break}return{rowIndxPage:a.getRowIndx({$tr:k(e)}).rowIndxPage}};d.pageNonVirtual=function(a,b){var d=this.that,f=d.$cont[0].offsetHeight-
d._getSBHeight(),e=d.getRow({rowIndxPage:a}),c=0,l=0,q=k(e[0])[b]("tr.pq-grid-row"),n=q.length;if(0<n){do{e=q[l];c+=e.offsetHeight;if(c>=f)break;l++}while(l<n);l=0<l?l-1:l;do if(e=k(q[l]),a=d.getRowIndx({$tr:e}).rowIndxPage,null!=a)break;else l--;while(0<=l)}return a};d.pageDown=function(a){var b=this.that,d=b.options,f=b.vscroll,e=f.option("cur_pos"),c=f.option("num_eles"),l=f.option("ratio");if(d.virtualY){if(e<c-1){a=this.incrPageSize().rowIndxPage;var q=b._calcCurPosFromRowIndxPage(a);if(null==
q)return;f.option("cur_pos",q);f.scroll()}}else null!=a?a=this.pageNonVirtual(a,"nextAll"):1>l&&(d=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(-1*d),b.syncScrollBarVert());return{rowIndxPage:a,curPos:q}};d.pageUp=function(a){var b=this.that,d=b.vscroll;if(b.options.virtualY){if(0<d.option("cur_pos")){a=this.decrPageSize().rowIndxPage;var f=b._calcCurPosFromRowIndxPage(a);if(null==f)return;d.option("cur_pos",f);d.scroll()}}else d=d.option("ratio"),null!=a?a=this.pageNonVirtual(a,"prevAll"):
0<d&&(d=b.iRefresh.getEContHt(),b=b.iMouseSelection,b.updateTableY(d),b.syncScrollBarVert());return{rowIndxPage:a,curPos:f}};d.decrPageSize=function(){var a=this.that,b=a.$tbl.children("tbody").children(".pq-grid-row"),d=a.options.freezeRows,f=a.pdata,e,c=0;if(b.length){var l;d?(l=b.filter("tr.pq-last-frozen-row"),l.length&&(l=l.next())):2<=b.length&&(l=k(b[1]));if(l&&l.length)for(e=c=a.getRowIndx({$tr:l}).rowIndxPage,b=0,a=a.pageSize-3;0<=c&&(f[c].pq_hidden||(b++,e=c,!(b>=a)));c--);}return{rowIndxPage:e}};
c._calcNumHiddenFrozens=function(){for(var a=0,b=this.options.freezeCols,d=0;d<b;d++)this.colModel[d].hidden&&a++;return a};c._calcNumHiddenUnFrozens=function(a){var b=0;a=null!=a?a:this.colModel.length;for(var d=this.options.freezeCols;d<a;d++)this.colModel[d].hidden&&b++;return b};c._getSBHeight=function(){return this.iRefresh.getSBHeight()};c._getSBWidth=function(){return this.iRefresh.getSBWidth()};c.getFirstVisibleRIP=function(a){var b=this.pdata;a=a?this.initV:0;for(var d=b.length;a<d;a++)if(!b[a].pq_hidden)return a};
c.getLastVisibleRIP=function(){for(var a=this.pdata,b=a.length-1;0<=b;b--)if(!a[b].pq_hidden)return b;return null};c.getFirstVisibleCI=function(a){var b=this.colModel,d=b.length;for(a=a?this.initH:0;a<d;a++)if(!b[a].hidden)return a;return null};c.getLastVisibleCI=function(){for(var a=this.colModel,b=a.length-1;0<=b;b--)if(!a[b].hidden)return b;return null};c.getTotalVisibleColumns=function(){for(var a=this.colModel,b=a.length,d=0,f=0;f<b;f++)a[f].hidden||d++;return d};c._calcCurPosFromRowIndxPage=
function(a){var b=this.pdata,d=this.options.freezeRows;if(a<d)return 0;for(var f=0,e=d,c=b.length;d<c;d++){var l=b[d];if(e==a)break;e++;l.pq_hidden||f++}return f>=c?null:f};c._calcCurPosFromColIndx=function(a){var b=this.colModel,d=this.options.freezeCols;if(a<d)return 0;for(var f=0,e=d,c=b.length;d<c;d++){var l=b[d];if(e==a)break;e++;l.hidden||f++}return f>=c?null:f};c.calcWidthCols=function(a,b,d){var f=0,e=this.options.numberCell,c=this.colModel;-1==a&&(e.show&&(f=d?f+1*e.width:f+e.outerWidth),
a=0);if(d)for(;a<b;a++){if((d=c[a])&&!d.hidden){if(!d._width)throw"assert failed";f+=d._width+0}}else for(;a<b;a++)(d=c[a])&&!d.hidden&&(f+=d.outerWidth);return f};c.calcHeightFrozenRows=function(){var a=this.$tbl,b=0;a&&a.length&&(a=k(a[0]).find("tr.pq-last-frozen-row"))&&a.length&&(b=a[0],b=b.offsetTop+b.offsetHeight);return b};c._calcRightEdgeCol=function(a){var b=0,d=0,f=this.colModel,e=this.initH,c=this.options,l=c.freezeCols,c=c.numberCell;c.show&&(b+=c.outerWidth,d++);for(c=0;c<=a;c++){c<e&&
c>=l&&(c=e);var q=f[c];q.hidden||(b+=q.outerWidth,d++)}return{width:b,cols:d}};c._createHeader=function(){this.iHeader.createHeader();this.options.showHeader&&this._trigger("createHeader")};c.createTable=function(a){a.other=!0;var b=this.iGenerateView;b.generateView(a);b.scrollView()}})(jQuery);
(function(k){function m(a){this.that=a}function g(a,b,d){for(var e=0;b<d;b++)!0!==a[b].hidden&&e++;return e}function c(a){if(a.length)var b=a.css({tableLayout:"auto",width:""}).addClass("pq-no-wrap").removeClass("pq-wrap").children("tbody").children(".pq-row-hidden").children("td").css("width","");return b||k()}function a(a,b,d){for(var e,c;d;){e=a[d][b];c=a[d-1][b];if(e!=c)break;d--}return d}var e=k.paramquery,b=e._pqGrid.prototype;b.getHeadCell=function(a){var b=a.attr("pq-col-indx");a=a.attr("pq-row-indx");
var d,e,c,h;null!=b&&null!=a&&(b*=1,a*=1,e=this.headerCells[a][b])&&(h=e.colModel,c=e.leftPos);h&&h.length&&(d=!0);return{col:e,ci:b,o_ci:c,ri:a,isParent:d}};b.flex=function(a){this.iResizeColumns.flex(a)};e.cHeader=m;b=m.prototype;b.createHeader=function(){var a=this.that,b=this,d=a.options,e=d.bootstrap,c=(e.on?e.thead:"")+" pq-grid-header-table ",h=d.ui,p=e.on?"":h.header,g=d.hwrap,e=a.pqpanes,r=parseInt(d.freezeCols),s=d.numberCell,h=a.colModel,u=d.sortModel,t=a.depth,m=d.virtualX,v=a.iGenerateView.colDef,
z=a.initH,C=a.finalH,B=a.headerCells,w=a.$header_o;w.empty();if(null!=C)if(!1===d.showHeader)w.css("display","none");else{w.css("display","");d=["<table class='"+(g?c+"pq-wrap ":c+"pq-no-wrap ")+"' >"];if(1<=t){d.push("<tr class='pq-row-hidden'>");s.show&&d.push("<td style='width:"+s.width+"px;' ></td>");for(var g=0,x=v.length;g<x;g++){var D=v[g],c=D.colIndx;d.push("<td style='width:"+D.column.outerWidth+"px;' pq-col-indx="+c+"></td>")}d.push("</tr>")}for(v=0;v<t;v++){d.push("<tr class='pq-grid-title-row'>");
0==v&&s.show&&d.push(["<th pq-col-indx='-1' class='pq-grid-number-col' rowspan='",t,"'><div class='pq-td-div'>",s.title?s.title:"&nbsp;","</div></th>"].join(""));for(c=0;c<=C;c++){if(c<z&&c>=r&&m&&(c=z,c>C))throw"initH>finalH";b.createHeaderCell(v,c,B,d,"pq-grid-col ",r,z,t,u)}d.push("</tr>")}a.ovCreateHeader(d,"pq-grid-col ");d.push("</table>");r=d.join("");w[0].innerHTML=e.vH?["<span class='pq-grid-header pq-grid-header-left ",p,"'><div class='pq-grid-header-inner'>",r,"</div></span><span class='pq-grid-header ",
p,"'><div class='pq-grid-header-inner'>",r,"</div></span>"].join(""):["<span class='pq-grid-header ",p,"'><div class='pq-grid-header-inner'>",r,"</div></span>"].join("");p=a.$header=w.children(".pq-grid-header");w=p.children(".pq-grid-header-inner");a.$tbl_header=w.children("table");a.$header_left=k(p[0]);a.$header_left_inner=k(w[0]);e.vH&&(a.$header_right=k(p[1]),a.$header_right_inner=k(w[1]));p.click(function(a){return b._onHeaderClick(a)});b._refreshResizeColumn(z,C,h);a._trigger("refreshHeader",
null,null)}};b._onHeaderClick=function(a){var b=this.that,d;d=b.iDragColumns;if(!d||"stop"==d.status){d=k(a.target);if(d.is("input,label"))return!0;d=d.closest(".pq-grid-col");if(d.length&&(d=b.getHeadCell(d),(b=d.col)&&!d.isParent))return this._onHeaderCellClick(b,d.ci,a)}};b.createHeaderCell=function(a,b,d,c,n,h,p,k,r){var s=this.that,u=s.options.sheet,t=d[a][b],m=s.colModel,v=t.colSpan;if(!(t.hidden||0===v||0<a&&t==d[a-1][b])){if(0<b&&t==d[a][b-1]){if(b>p)return;a:{d=d[a];for(var z=0;z<d.length;z++)if(d[z]==
t){d=z;break a}d=void 0}if(d<h)return;v-=g(m,d,b)}else h&&b<h&&b+v>h&&(v-=g(m,h,p),m=g(m,b,h),v=Math.max(v,m));m=t.halign||t.align;d=t.cls;n=[n];var z=t.title,C=t.type,z="function"==typeof z?z.call(s,{column:t,colIndx:b,dataIndx:t.dataIndx}):z,z=u?e.toLetter(b):z,z=null!=z?z:"checkbox"==C&&t.cb.header?"<input type='checkbox'/>":t.dataIndx;t.pqtitle=z;m&&n.push("pq-align-"+m);b==h-1&&1==k&&n.push("pq-last-frozen-col");b<=h-1?n.push("pq-left-col"):b>=p&&n.push("pq-right-col");d&&n.push(d);null!=t.colModel&&
0!=t.colModel.length||n.push("pq-grid-col-leaf");h=r.space?"pq-space":"";c.push(["<th  ","pq-col-indx="+b," ","pq-row-indx="+a,"  class='",n.join(" "),"' rowspan=",t.rowSpan," colspan=",v,"><div class='pq-td-div'>",z,"<span class='pq-col-sort-icon ",h,"'></span>",r.number?"<span class='pq-col-sort-count "+h+"'></span>":"","</div></th>"].join(""))}};b._onHeaderCellClick=function(a,b,d){var e=this.that,c=e.options,h=c.sortModel,p=a.dataIndx;!1!==e._trigger("headerCellClick",d,{column:a,colIndx:b,dataIndx:p})&&
(c.selectionModel.column&&-1==d.target.className.indexOf("pq-td-div")?(c={c1:b,firstC:b},a=e.iSelection.address(),d.shiftKey&&((d=a.length)&&"column"==a[d-1].type&&(d=a[d-1],d.c1=d.firstC,d.c2=b,d.r1=d.r2=d.type=void 0),c=a),e.range(c,!1).select(),e.focus({rowIndxPage:e.getFirstVisibleRIP(!0),colIndx:b})):h.on&&!1!=a.sortable&&(h.multiKey&&(h.single=!d[h.multiKey]),e.sort({sorter:[{dataIndx:p}],addon:!0,evt:d})))};b._refreshResizeColumn=function(a,b,d){a=this.that;d=a.options;b=d.filterModel.ficon?
!0:!1;var e=d.numberCell;d=parseInt(d.freezeCols);var c=[],h=[],p=a.pqpanes.vH,g=0,k=0;e.show&&(g=e.outerWidth,e.resizable&&c.push("<div pq-col-indx='-1' style='left:",g-5,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>"));for(var e=a.iGenerateView.colDef,s=0,u=e.length;s<u;s++){var k=e[s],t=k.colIndx,k=k.column,m=k.ficon,v=m||null==m&&b,m=c,g=g+k.outerWidth;if(!1!==k.resizable||v)p&&t>=d&&(m=h),k=g-5,m.push("<div pq-col-indx='",t,"' style='left:",k,"px;'"," class='pq-grid-col-resize-handle'>&nbsp;</div>")}h.length&&
a.$header_right_inner.append(h.join(""));a.$header_left_inner.append(c.join(""))};b.refreshHeaderSortIcons=function(){var a=this.that,b=a.options,d=b.bootstrap,b=b.ui,e=a.$header;if(e){var c=a.iSort.getSorter(),h=c.length,p=!1;a.options.sortModel.number&&1<h&&(p=!0);for(var g=0;g<h;g++){var k=c[g],s=a.getColIndx({dataIndx:k.dataIndx}),u=k.dir,k=d.on?d.header_active:b.header_active+" pq-col-sort-"+("up"==u?"asc":"desc"),u=d.on?" glyphicon glyphicon-arrow-"+u:"ui-icon ui-icon-triangle-1-"+("up"==u?
"n":"s"),s=e.find(".pq-grid-col-leaf[pq-col-indx="+s+"]");s.addClass(k);s.find(".pq-col-sort-icon").addClass(u);p&&s.find(".pq-col-sort-count").html(g+1)}}};b=function(a){this.that=a;var b=this;a.$header_o.on({mousedown:function(a){if(!a.pq_composed){var d=k(a.target);b.setDraggables(a);a.pq_composed=!0;a=k.Event("mousedown",a);d.trigger(a)}},dblclick:function(a){b.doubleClick(a)}},".pq-grid-col-resize-handle");var d=a.options.flex;if(d.on&&d.one)a.one("ready",function(){b.flex()})};e.cResizeColumns=
b;b=b.prototype=new e.cClass;b.doubleClick=function(a){var b=this.that.options,d=b.flex;a=k(a.target);a=parseInt(a.attr("pq-col-indx"));isNaN(a)||d.on&&this.flex(d.all&&!b.scrollModel.autoFit?{}:{colIndx:[a]})};b.flex=function(a){a=a||{};var b=this.that,d=b.element,e=b.options.numberCell,n=a.colIndx,h,p=a.dataIndx;a=null==a.refresh?!0:a.refresh;var g=!1,r=b.$tbl,s=b.$tbl_header,u=r&&r.length?k(r[0]).clone():k(),t=b.tables&&b.tables.length?b.tables[0].$tbl:null,t=t?k(t[0]).clone():k(),m=s&&s.length?
k(s[0]).clone():k();u.find(".pq-merge-cell").each(function(a,b){b.innerHTML=k(b).find(".pq-merge-inner")[0].innerHTML;b.style.whiteSpace="noWrap"});if(null!=p)for(n=[],s=0,r=p.length;s<r;s++){var v=b.colIndxs[p[s]];null!=v&&n.push(v)}null!=n&&(n.sort(function(a,b){return a-b}),h=n.length);m.find("tr.pq-grid-header-search-row").remove();var p=c(u),v=c(t),z=c(m),u=k("<div class='pq-grid' style='width:1px;height:1px;position:absolute;left:0px;top:0px;'>").append(m).append(t).append(u);u.addClass(d.attr("class"));
d.parent().append(u);d=e.show?0:-1;e=b.iGenerateView.colDef;s=0;for(r=e.length;s<r;s++){t=e[s];m=t.colIndx;t=t.column;d++;if(n)if(n.length)if(n[0]===m)n.splice(0,1);else continue;else break;var m=p[d],C=z[d],B=v[d],m=Math.max(m?m.offsetWidth:0,B?B.offsetWidth:0,C?C.offsetWidth:0)-0+1;t._width!==m&&(g=!0,t.width=m,1===h&&(t._resized=!0))}u.remove();g&&a&&b.refresh({source:"flex"})};b.setDraggables=function(a){var b=this,d,e,c;k(a.target).draggable({axis:"x",helper:function(a,d){var f=k(a.target),e=
parseInt(f.attr("pq-col-indx"));b._setDragLimits(e);b._getDragHelper(a,d);return f},start:function(a,f){d=f.position.left;c=parseInt(b.$cl[0].style.left)},drag:function(a,f){e=f.position.left;b.$cl[0].style.left=c+(e-d)+"px"},stop:function(a,f){return b.resizeStop(a,f,d)}})};b._getDragHelper=function(a){var b=this.that,d=parseInt(b.options.freezeCols);a=k(a.target);var e=b.$grid_center;a=parseInt(a.attr("pq-col-indx"));var c=e.outerHeight();this.$cl=k("<div class='pq-grid-drag-bar'></div>").appendTo(e);
this.$clleft=k("<div class='pq-grid-drag-bar'></div>").appendTo(e);this.$cl.height(c);this.$clleft.height(c);e=k("[pq-col-indx="+a+"]",b.$header)[0];c=e.offsetLeft;b.pqpanes.vH?a>=d&&(c-=b.$header[1].scrollLeft):(c+=b.$header[0].offsetLeft,c-=b.$header[0].scrollLeft);this.$clleft.css({left:c});c+=e.offsetWidth;this.$cl.css({left:c})};b._setDragLimits=function(a){if(!(0>a)){var b=this.that,d=b.colModel[a],e=b.$header_left;a>=b.options.freezeCols&&b.pqpanes.vH&&(e=b.$header_right);b=e.find("th[pq-col-indx='"+
a+"']").offset().left+d._minWidth;d=b+d._maxWidth-d._minWidth;e.find("div.pq-grid-col-resize-handle[pq-col-indx="+a+"]").draggable("option","containment",[b,0,d,0])}};b.resizeStop=function(a,b,d){var e=this.that,c=e.colModel,h=e.options.numberCell;this.$clleft.remove();this.$cl.remove();d=b.position.left-d;b=k(b.helper);b=parseInt(b.attr("pq-col-indx"));if(-1==b){var c=null,p=parseInt(h.width);h.width=p+d}else c=c[b],p=parseInt(c.width),c.width=p+d,c._resized=!0;e.refresh();e._trigger("columnResize",
a,{colIndx:b,column:c,dataIndx:c?c.dataIndx:null,oldWidth:p,newWidth:c?c.width:h.width})};b=function(a){this.that=a;this.$drag_helper=null;var b=a.options.dragColumns,d=b.topIcon,e=b.bottomIcon;this.status="stop";this.$arrowTop=k("<div class='pq-arrow-down ui-icon "+d+"'></div>").appendTo(a.element);this.$arrowBottom=k("<div class='pq-arrow-up ui-icon "+e+"' ></div>").appendTo(a.element);this.hideArrows();if(b&&b.enabled)a.$header_o.on("mousedown",".pq-grid-col",this.onColMouseDown(this,a))};e.cDragColumns=
b;b=b.prototype;b.onColMouseDown=function(a,b){return function(d){var e,c,h;e=k(this);d.pq_composed||k(d.target).is("input,select,textarea")||(e=b.getHeadCell(e),h=(c=e.col)?c.parent:null,!c||c.nodrag||c._nodrag||h&&1==h.colSpan||!a.setDraggable(d,c,e)||(d.pq_composed=!0,e=k.Event("mousedown",d),k(d.target).trigger(e)))}};b.showFeedback=function(a,b){var d=this.that,e=a[0],c=d.$grid_center[0].offsetTop,h=e.offsetLeft-e.offsetParent.offsetParent.offsetParent.scrollLeft+(b?0:e.offsetWidth)-8,d=c+d.$header[0].offsetHeight;
this.$arrowTop.css({left:h,top:c+e.offsetTop-16,display:""});this.$arrowBottom.css({left:h,top:d,display:""})};b.showArrows=function(){this.$arrowTop.show();this.$arrowBottom.show()};b.hideArrows=function(){this.$arrowTop.hide();this.$arrowBottom.hide()};b.updateDragHelper=function(a){var b=this.that.options.dragColumns,d=b.acceptIcon,b=b.rejectIcon,e=this.$drag_helper;e&&(a?(e.children("span.pq-drag-icon").addClass(d).removeClass(b),e.removeClass("ui-state-error")):(e.children("span.pq-drag-icon").removeClass(d).addClass(b),
e.addClass("ui-state-error")))};b.setDraggable=function(a,b,d){a=k(a.currentTarget);var e=this,c=e.that;if(!a.hasClass("ui-draggable"))return a.draggable({distance:10,cursorAt:{top:-18,left:-10},zIndex:"1000",appendTo:c.element,revert:"invalid",helper:e.dragHelper(e,c,b),start:e.onStart(e,c,b,d),drag:e.onDrag(e,c),stop:function(){e.status="stop";c.$header.find(".pq-grid-col-resize-handle").show();e.hideArrows()}}),!0};b.onStart=function(a,b,d,e){return function(c){if(!1===b._trigger("columnDrag",
c.originalEvent,{column:d}))return!1;a.setDroppables(e)}};b.onDrag=function(a,b){return function(d,e){a.status="drag";var c=k(".pq-drop-hover",b.$header);if(0<c.length){a.showArrows();a.updateDragHelper(!0);var h=c.width();d.clientX-c.offset().left+k(document).scrollLeft()<h/2?(a.leftDrop=!0,a.showFeedback(c,!0)):(a.leftDrop=!1,a.showFeedback(c,!1))}else a.hideArrows(),k(".pq-drop-hover",b.$top).length?a.updateDragHelper(!0):a.updateDragHelper()}};b.dragHelper=function(a,b,d){var e=b.options.dragColumns.rejectIcon;
return function(){a.status="helper";b.$header.find(".pq-grid-col-resize-handle").hide();var c=k("<div class='pq-col-drag-helper ui-widget-content ui-corner-all panel panel-default' ><span class='pq-drag-icon ui-icon "+e+" glyphicon glyphicon-remove'></span>"+d.pqtitle+"</div>");a.$drag_helper=c;return c[0]}};b._columnIndexOf=function(a,b){for(var d=0,e=a.length;d<e;d++)if(a[d]==b)return d;return-1};b.setDroppables=function(a){var b=this.that,d=a.col,e=a.ri;a=a.o_ci;var c=a+d.o_colspan,h,p,g,r,s;p=
b.$header_left;var u,t={hoverClass:"pq-drop-hover ui-state-highlight",accept:".pq-grid-col",tolerance:"pointer",drop:this.onDrop()},m=p.find(".pq-left-col");p=b.pqpanes.v||b.pqpanes.vH?b.$header_right.find(".pq-right-col"):p.find(".pq-right-col");m=m.add(p);for(u=m.length;u--;)r=k(m[u]),s=r.hasClass("ui-droppable"),h=b.getHeadCell(r),g=h.col,p=h.ri,h=h.ci,g==d||g.nodrop||g._nodrop||e<p&&h>=a&&h<c?s&&r.droppable("destroy"):s||r.droppable(t)};b.onDrop=function(){var a=this,b=this.that;return function(d,
e){if(!a.dropPending){var c=1*e.draggable.attr("pq-col-indx"),h=1*e.draggable.attr("pq-row-indx"),p=k(this),g=1*p.attr("pq-col-indx"),p=1*p.attr("pq-row-indx"),r=a.moveColumn(c,g,a.leftDrop,h,p);a.dropPending=!0;window.setTimeout(function(){b.iColModel.init();!1!==b._trigger("columnOrder",null,{dataIndx:r.dataIndx,column:r,oldcolIndx:c,colIndx:b.getColIndx({column:r})})&&b.refresh();a.dropPending=!1},0)}}};b.moveColumn=function(b,e,d,c,n){var h=this.that,p=h.options.colModel,g=h.headerCells,h=h.depth-
1;c=null==c?a(g,b,h):c;n=null==n?a(g,e,h):n;var h=g[n][e],k=c?g[c-1][b].colModel:p;e=n?g[n-1][e].colModel:p;b=this._columnIndexOf(k,g[c][b]);d=d?1:0;b=k.splice(b,1)[0];d=this._columnIndexOf(e,h)+1-d;e.splice(d,0,b);return b}})(jQuery);
(function(k){function m(c,a){this.that=c;var e=this,b=c.options;this.type="detail";this.refreshComplete=!0;this.detachView=!1;c.on("cellClick",function(a,b){return e.toggle(a,b)}).on("cellKeyDown",function(a,b){if(a.keyCode==k.ui.keyCode.ENTER)return e.toggle(a,b)}).on("refresh",function(a,b){return e.aftertable()}).on("beforeTableView",function(a,b){return e.beforeTableView(a,b)}).on("tableWidthChange",function(a,b){return e.tableWidthChange(a,b)});a._render=function(a){var e=b.detailModel,d=a.cellData;
a=a.rowData;if(!a.pq_gsummary&&!a.pq_gtitle)return e=d&&d.show?e.expandIcon:e.collapseIcon,"<div class='ui-icon "+e+"'></div>"}}k.paramquery.cHierarchy=m;var g=m.prototype=new k.paramquery.cClass;g.tableWidthChange=function(){if(this.refreshComplete){this.refreshComplete=!1;for(var c=this.that.$tbl.children("tbody").children("tr.pq-detail-child").children("td.pq-detail-child"),a=0,e=c.length;a<e;a++)for(var b=k(c[a]).find(".pq-grid"),f=0,l=b.length;f<l;f++){var d=k(b[f]);d.is(":visible")&&d.pqGrid("onWindowResize")}this.refreshComplete=
!0}};g.aftertable=function(c){var a=this.that,e=a.options.detailModel.init,b=a.pdata;if(this.refreshComplete){this.refreshComplete=!1;c=c?c:a.$tbl.children("tbody").children("tr.pq-detail-child");for(var f=0,l=c.length;f<l;f++){var d=k(c[f]),q=d.attr("pq-row-indx"),n=b[q],q=!1,h=n.pq_detail.child;h||"function"!=typeof e||(q=!0,h=e.call(a.element[0],{rowData:n}),n.pq_detail.child=h,n.pq_detail.height=25);d=d.children("td.pq-detail-child");d.append(h);d=d.find(".pq-grid");h=0;for(n=d.length;h<n;h++){var p=
k(d[h]);q?p.hasClass("pq-pending-refresh")&&p.is(":visible")&&(p.removeClass("pq-pending-refresh"),p.pqGrid("refresh")):p.is(":visible")&&p.pqGrid("onWindowResize")}}this.refreshComplete=!0;this.detachView=!1}};g.beforeTableView=function(c,a){this.detachView||(this.detachInitView(),this.detachView=!0)};g.detachInitView=function(c){var a=this.that.$tbl;if(a&&a.length)for(c=c?c:a.children("tbody").children("tr.pq-detail-child"),a=0;a<c.length;a++)k(c[a]).children("td.pq-detail-child").children().detach()};
g.toggle=function(c,a){var e=this.that,b=a.column,f=a.rowData,l=a.rowIndx,d=this.type;f.pq_gtitle||f.pq_gsummary||!b||b.type!==d||(b={rowIndx:l,focus:!0},null==f.pq_detail?e.rowExpand(b):!1===f.pq_detail.show?e.rowExpand(b):this.rowCollapse(b))};g.rowExpand=function(c){this.normalize(c);var a=this.that,e=c.rowData,b=c.rowIndx,f=c.rowIndxPage,l=a.options.detailModel;if(null!=e){if(!1===a._trigger("beforeRowExpand",null,c))return!1;null==e.pq_detail?e.pq_detail={show:!0}:!1===e.pq_detail.show&&(e.pq_detail.show=
!0);l.cache||this.rowInvalidate(c);a.refreshRow({rowIndx:b});l=[];a.iGenerateView._generateDetailRow(e,f,l);e=a.getRow({rowIndxPage:f});e.after(l.join(""));this.aftertable(e.next());c.focus&&a.getCell({rowIndx:b,dataIndx:"pq_detail"}).attr("tabindex","0").focus();c.scrollRow&&this.scrollRow({rowIndx:b})}};g.rowInvalidate=function(c){c=this.that.getRowData(c);var a=c.pq_detail;if(a=a?a.child:null)a.remove(),c.pq_detail.child=null,c.pq_detail.height=0};g.normalize=function(c){var a=this.that,e=c.rowIndx,
b=c.rowIndxPage,f=a.rowIndxOffset;c.rowIndx=null==e?b+f:e;c.rowIndxPage=null==b?e-f:b;c.rowData=a.getRowData(c)};g.rowCollapse=function(c){this.normalize(c);var a=this.that,e=a.options,b=c.rowData,f=c.rowIndx,l=c.rowIndxPage,d=e.detailModel;null!=b&&null!=b.pq_detail&&!0===b.pq_detail.show&&(d.cache||this.rowInvalidate(c),b.pq_detail.show=!1,e.virtualY?a.refresh():(e=a.getRow({rowIndxPage:l}).next("tr.pq-detail-child"),e.length&&(this.detachInitView(e),e.remove(),a.refreshRow({rowIndx:f})),c.focus&&
a.getCell({rowIndx:f,dataIndx:"pq_detail"}).attr("tabindex","0").focus()),c.scrollRow&&(f=c.rowIndx,this.scrollRow({rowIndx:f})))}})(jQuery);
(function(k){var m=function(g){var c=this;c.that=g;g.on("dataReadyDone",function(){c.calcVisibleV()}).on("CMInit",function(){c.calcVisibleH()}).on("refresh",function(){c.summaryTable()})};k.paramquery.cRefresh=m;m=m.prototype;m._computeOuterWidths=function(){for(var g=this.that,c=g.options.numberCell,g=g.colModel,a=g.length,e=0;e<a;e++){var b=g[e];b.outerWidth=b._width+0}c.show&&(c.outerWidth=c.width)};m.autoFit=function(){var g=this.that,c=g.colModel,a=c.length,g=g.calcWidthCols(-1,a,!0),e=this.contWd-
this.getSBWidth();if(g!==e){for(var g=g-e,b,e=[],f=0;f<a;f++){var l=c[f],d=l._percent,q=l._resized;l.hidden||d||q||(0>g?(d=l._maxWidth-l._width)&&e.push({availWd:-1*d,colIndx:f}):(d=l._width-l._minWidth)&&e.push({availWd:d,colIndx:f}));q&&(b=l,delete l._resized)}e.sort(function(a,b){return a.availWd>b.availWd?1:a.availWd<b.availWd?-1:0});f=0;for(a=e.length;f<a;f++){var l=e[f],d=l.availWd,l=l.colIndx,q=Math.round(g/(a-f)),l=c[l],n;n=l._width;Math.abs(d)>Math.abs(q)?(n-=q,g-=q):(n-=d,g-=d);l.width=
l._width=n}0!=g&&b&&(n=b._width-g,n>b._maxWidth?n=b._maxWidth:n<b._minWidth&&(n=b._minWidth),b.width=b._width=n)}};m.autoLastColumn=function(){var g=this.that,c=g.colModel,a=c.length,e=g.options.freezeCols,b=this.contWd-this.getSBWidth(),f=g.calcWidthCols(-1,e,!0),b=b-f,f=!1,g=g.getLastVisibleCI();if(null!=g&&(g=c[g],!g._percent)){for(var l=g._width,d,q=g._minWidth,n=g._maxWidth,a=a-1;a>=e;a--){var h=c[a];if(!h.hidden&&(h=h._width+0,b-=h,0>b)){f=!0;d=l+b>=q?l+b:l+h+b;break}}f||(d=l+b);d>n?d=n:d<q&&
(d=q);g.width=g._width=d}};m.numericVal=function(g,c){var a;a=-1<(g+"").indexOf("%")?parseInt(g)*c/100:parseInt(g);return Math.round(a)};m.refreshColumnWidths=function(g){g=g||{};var c=this.that,a=c.options,e=a.numberCell,b="flex"===a.width,f=c.colModel,l=a.scrollModel,d=l.lastColumn,l=l.autoFit,q=this.contWd,n=f.length,h=this.getSBWidth(),p=a._minColWidth,k=a._maxColWidth,r=0;e.show&&(e.width<e.minWidth&&(e.width=e.minWidth),r=e.outerWidth=e.width);e=b?null:q-h-r;p=Math.floor(this.numericVal(p,e));
k=Math.ceil(this.numericVal(k,e));q=0;if(!b&&5>e||isNaN(e)){if(a.debug)throw"availWidth N/A";}else{delete c.percentColumn;for(h=0;h<n;h++)if(r=f[h],!r.hidden){var s=r.width,u=-1<(s+"").indexOf("%")?!0:null,t=r.minWidth,m=r.maxWidth,t=t?this.numericVal(t,e):p,m=m?this.numericVal(m,e):k;m<t&&(m=t);if(void 0!=s){var v=0;!b&&u?(c.percentColumn=!0,r.resizable=!1,r._percent=!0,s=this.numericVal(s,e)-0,v=Math.floor(s),q+=s-v,1<=q&&(v+=1,q-=1)):s&&(v=parseInt(s));v<t?v=t:!b&&v>m&&(v=m);r._width=v}else r._width=
t;u||(r.width=r._width);r._minWidth=t;r._maxWidth=b?1E3:m}!1===b&&!1!==g.refreshWidth&&(l&&this.autoFit(),"auto"===d&&a.virtualX&&this.autoLastColumn());this._computeOuterWidths()}};m.estRowsInViewPort=function(){var g=Math.ceil(this.contHt/this.rowHt);return this.that.pageSize=g};m._refreshFrozenLine=function(){var g=this.that,c=g.options,a=c.numberCell,e=g.$cont_o,b=c.freezeBorders,f=c.freezeCols,c=c.freezeRows;this.$freezeLine&&this.$freezeLine.remove();this.$freezeLineH&&this.$freezeLineH.remove();
b&&(f&&(b=g.calcWidthCols(-1,f),isNaN(b)||0===b||0<b&&a.show&&b===a.width||(this.$freezeLine=k(["<div class='pqg-vert-frozen-line'  style = 'left:",b-1,"px;' ></div>"].join("")).appendTo(e))),c&&(g=g.$tbl))&&(g=g.children("tbody").children(".pq-last-frozen-row")[0])&&(this.$freezeLineH=k("<div class='pqg-horiz-frozen-line' style='top:"+(g.offsetTop+g.offsetHeight-1-1)+"px;' ></div>").appendTo(e))};m.setScrollVNumEles=function(g){var c=this.that;g=c.vscroll;var a=c.options;if(!a.maxHeight&&"flex"===
a.height)return g.option("num_eles",0),0;var a=c.iHierarchy?!0:!1,e=parseInt(g.option("num_eles")),b=parseInt(g.option("cur_pos")),e=this.getEContHt(),f=c.pdata?c.totalVisibleRows:0,l,d=0;c.$tbl&&0<c.$tbl.length&&(l=c.$tbl[c.$tbl.length-1],d=l.scrollHeight,l=k(l));if(0<d){l=l.children().children("tr");b=c=0;for(d=1;d<l.length;d++){var q=l[d],c=c+q.offsetHeight;if(c>=e){a&&k(q).hasClass("pq-detail-child")&&(b=1<b?b-1:1);break}else a?!1===k(q).hasClass("pq-detail-child")&&b++:b++}e=f-b+1}else e=b+1;
e>f&&(e=f);g.option("num_eles",e);return e};m._setScrollVLength=function(g){g=this.that;var c=g.options;if("flex"!==c.height||c.maxHeight){var c=this.getSBHeight(),a=this.contHt-c+this.headerHt-2;g.vscroll.widget().css("bottom",c);g.vscroll.option("length",a)}};m.setHeaderHeight=function(){var g=this.that,c=g.$header,a,e,b;if(c&&c.length){if(1<c.length){if(a=c[0].scrollHeight,e=c[1].scrollHeight,b=Math.max(a,e),a!==e){var f=k(c[0]).find(".pq-grid-header-search-row"),l=k(c[1]).find(".pq-grid-header-search-row");
f.length&&(f.css("height",""),l.css("height",""),a=c[0].scrollHeight,e=c[1].scrollHeight,b=Math.max(a,e),a<b?f.height(l[0].scrollHeight):l.height(f[0].scrollHeight))}}else b=a=c[0].scrollHeight;g.$header_o.height(b-3);this.headerHt=b-1}else g.$header_o.height(0),this.headerHt=0};m.initContHeight=function(){var g=this.that,c=g.options;if("flex"!=c.height||c.maxHeight)this.contHt=this.height-(c.showHeader?this.rowHt:0)-(c.showTop?g.$top[0].offsetHeight:0)-(c.showBottom?g.$bottom[0].offsetHeight:0)};
m.initContWidth=function(){this.contWd=this.width};m.setContHeight=function(g){g=this.that;var c=g.$top,a=this.height-g.$header_o[0].offsetHeight,e;if(g.options.showTop){e=c[0].offsetHeight;var b=parseInt;c=c[0];window.getComputedStyle?c=getComputedStyle(c).marginTop:(c=c.currentStyle.marginTop,c="auto"==c?0:c);e+=b(c)}else e=0;a=a-e-g.$bottom[0].offsetHeight+1;a=0<=a?a:"";g.$cont.height(a);this.contHt=a};m.setContAndGridHeightForFlex=function(){var g=this.that,c=g.hscroll.widget();if(this.vscroll)c.css("position",
"");else{c.css("position","relative");var c=g.$cont,a=g.options.cls,e=c.children("."+a.cont_inner_b);c.height("");e.length||(e=c.children("."+a.cont_inner));e.height("");g.element.height("");g.$grid_center.height("")}};m.setContAndGridWidthForFlex=function(){var g=this.that,c=g.options.maxWidth,a=this.maxWidthPixel,e=g.calcWidthCols(-1,g.colModel.length),g=g.element,b=this.getSBWidth(),e=e+b;c&&e>=a&&(e=a);this.contWd=e;g.width(e+"px")};m.getTotalVisibleRows=function(g,c,a){var e=this.that,b=this.vrows,
f=this.estRowsInViewPort(),l=0,d=a?a.length:0,q=c,n=0,h=0,p=null,k=e.iHierarchy?!0:!1,e=e.options.detailModel.offset,r=0,s=this.rowHt,u=k?this.contHt:void 0;if(null==a||0==d)return{initV:null,finalV:null,tvRows:l,lastFrozenRow:null};for(var t=0,m=d>c?c:d;t<m;t++){var v=a[t],z=v.pq_hidden;z||(p=t,l++,k&&((v=v.pq_detail)&&v.show?(v=v.height||0,v>e&&(v=e),r+=v+s):r+=s))}if(d<c)return{initV:p,finalV:p,tvRows:l,lastFrozenRow:p};f-=l;q=n=b[g];h=0;t=q;for(m=d;t<m;t++){v=a[t];if(z=v.pq_hidden)n++;else if(h===
f)break;else n++,h++;if(k&&!z&&((v=v.pq_detail)&&v.show?(v=v.height||0,v>e&&(v=e),r+=v+s):r+=s,r>u))break}l+=b.length;q=q>=d?d-1:q;n=n>=d?d-1:n;return{initV:q,finalV:n<q?q:n,tvRows:l,lastFrozenRow:p}};m.setInitH=function(g,c){var a=this.that;a.initH=g;a.finalH=c};m.setInitV=function(g,c){var a=this.that,e;(null==g||null==c)&&(e=this.vrows)&&e.length&&(g=c=e[e.length-1]);a.initV=g;a.finalV=c};m.calcVisibleV=function(){for(var g=this.that,c=g.pdata||[],a=c.length,e=[],b=0,g=g.options.freezeRows;g<a;g++)c[g].pq_hidden||
(e[b++]=g);this.vrows=e};m.calcVisibleH=function(){for(var g=this.that,c=[],a=0,e=g.colModel,g=g.options.freezeCols,b=e.length;g<b;g++)e[g].hidden||(c[a++]=g);this.vcols=c};m.calcInitFinal=function(){var g=this.that,c=g.options,a=c.virtualY,e=c.freezeRows,b="flex"===c.height,f=g.pdata;if(null==f||0===f.length)e=this.getTotalVisibleRows(l,e,f),g.totalVisibleRows=e.tvRows,a=e.initV,c=e.finalV,g.lastFrozenRow=e.lastFrozenRow;else if(a){var l=parseInt(g.vscroll.option("cur_pos"));if(isNaN(l)||0>l)throw"cur_pos NA";
g.scrollCurPos=l;e=this.getTotalVisibleRows(l,e,f);g.totalVisibleRows=e.tvRows;a=e.initV;g.lastFrozenRow=e.lastFrozenRow;c=b&&!c.maxHeight?f.length-1:e.finalV}else e=this.getTotalVisibleRows(0,e,f),g.lastFrozenRow=e.lastFrozenRow,g.totalVisibleRows=e.tvRows,a=0,c=f.length-1;this.setInitV(a,c)};m.calcInitFinalH=function(){var g=this.that,c=g.options,a,e=g.colModel,b=e.length;if(c.virtualX){a=parseInt(g.hscroll.option("cur_pos"));var f=parseInt(c.freezeCols),l="flex"===c.width,d=this.vcols;d||(this.calcVisibleH(),
d=this.vcols);a=d[a];a>b-1&&(a=b-1);0>a&&(a=0);if(l&&!c.maxWidth)c=b-1;else{g=g.calcWidthCols(-1,f);f=this.getEContWd();for(l=a;l<b;l++)if(d=e[l],!d.hidden){d=d.outerWidth;if(!d&&c.debug)throw"outerwidth N/A";g+=d;if(g>f)break}c=l;c>b-1&&(c=b-1)}}else a=0,c=b-1;this.setInitH(a,c)};m._calcOffset=function(g){return(g=/(-|\+)([0-9]+)/.exec(g))&&3===g.length?parseInt(g[1]+g[2]):0};m.setMax=function(g){var c=this.that,a=c.element;(c=c.options[g])?(c==parseInt(c)&&(c+="px"),a.css(g,c)):a.css(g,"")};m.refreshGridWidthAndHeight=
function(){var g=this.that,c=g.options,a,e,b=-1<(c.width+"").indexOf("%")?!0:!1,f=-1<(c.height+"").indexOf("%")?!0:!1,l=-1<(c.maxHeight+"").indexOf("%")?!0:!1,d="flex"==c.height,q=l&&d,n=-1<(c.maxWidth+"").indexOf("%")?!0:!1,h="flex"==c.width,p=n&&h,g=g.element;if(b||f||q||p){var A=g.parent();if(!A.length)return;var r;A[0]==document.body||"fixed"==g.css("position")?(r=k(window).width(),A=window.innerHeight?window.innerHeight:k(window).height()):(r=A.width(),A=A.height());var s=this._calcOffset,u=
b?s(c.width):0,s=f?s(c.height):0;p?a=parseInt(c.maxWidth)*r/100:b&&(a=parseInt(c.width)*r/100+u);q?e=parseInt(c.maxHeight)*A/100:f&&(e=parseInt(c.height)*A/100+s)}a||(h&&c.maxWidth?n||(a=c.maxWidth):b||(a=c.width));c.maxWidth&&(this.maxWidthPixel=a);e||(d&&c.maxHeight?l||(e=c.maxHeight):f||(e=c.height));parseFloat(a)==a?(a=a<c.minWidth?c.minWidth:a,g.css("width",a)):"auto"===a&&g.width(a);parseFloat(e)==e&&(e=e<c.minHeight?c.minHeight:e,g.css("height",e));this.width=Math.round(g.width());this.height=
Math.round(g.height())};m.decidePanes=function(){var g=this.that,c=g.pqpanes={v:!1,h:!1,vH:!1},a=g.options,g=a.virtualX,e=a.virtualY,b="flex"==a.height&&!a.maxHeight,f="flex"==a.width&&!a.maxWidth,l=a.numberCell,d=a.freezeRows,a=a.freezeCols;!d||b||!a&&!l.show||f?d&&!b?e||(c.h=!0):!a&&!l.show||f||g||(c.v=!0,c.vH=!0):(e||(c.h=!0),g||(c.v=!0,c.vH=!0))};m._storeColumnWidths=function(g){for(var c=this.that,a=c.options,e=c.colModel,b=a.virtualX,a=a.freezeCols,f=c.initH,c=g?e.length-1:c.finalH,l=[],d=0;d<=
c;d++)!g&&b&&d<f&&d>=a&&(d=f),l[d]={outerWidth:e[d].outerWidth};return l};m._isColumnWidthChanged=function(g){for(var c=this.that,a=c.colModel,c=c.iGenerateView.colDef,e=0,b=c.length;e<b;e++){var f=c[e].colIndx;if(a[f].outerWidth!==g[f].outerWidth)return!0}return!1};m.softRefresh=function(){var g=this.that,c=g.options;this.refreshScrollbars();g.iGenerateView.setPanes();g._saveDims();g.iMouseSelection.syncScrollBarVert();"flex"==c.height&&this.setContAndGridHeightForFlex();"flex"==c.width&&this.setContAndGridWidthForFlex();
this._refreshFrozenLine()};m.refreshScrollbars=function(g){g=g||{};var c=this.that,a=c.options,e=c.iGenerateView,b,f="flex"===a.height;b="flex"===a.width;if((f||this.contHt)&&(b||this.contWd)&&null!==c.totalVisibleRows){c=this.setScrollVNumEles(g);c=1<c?!0:!1;if((!f||a.maxHeight)&&c!==this.vscroll)if(this.vscroll=c,a.scrollModel.autoFit||a.virtualX||b){if(a=this._storeColumnWidths(),this.refreshColumnWidths(),this._isColumnWidthChanged(a)||b)this.ignoreTResize=!0,this._refreshTableWidths(a,{table:!0,
header:!0}),delete this.ignoreTResize,this.setHeaderHeight(),this.setContHeight(),e.setPanes(),c=this.setScrollVNumEles(!0),this.vscroll=1<c?!0:!1}else e.setPanes();c=this.setScrollHNumEles();b=1<c?!0:!1;this.hscroll!=b&&(this.hscroll=b,e.setPanes());this._setScrollHLength();this._setScrollVLength(g);this._setScrollHVLength()}};m._setScrollHVLength=function(){var g=this.that;this.vscroll&&this.hscroll||g.$hvscroll.css("visibility","hidden")};m._setScrollHLength=function(){var g=this.that,c=g.hscroll.widget(),
a=g.$hvscroll;if(g.options.scrollModel.horizontal){c.css("visibility","");a.css("visibility","");var a=this.contWd,e=this.getSBWidth();c.css("right",0===e?0:"");g.hscroll.option("length",a-e)}else c.css("visibility","hidden"),a.css("visibility","hidden")};m.estVscroll=function(){var g=this.that,c=!0;null==g.totalVisibleRows||null==this.contHt?c=!1:g.totalVisibleRows*this.rowHt<this.contHt&&(c=!1);this.vscroll=c};m.getSBWidth=function(){null==this.vscroll&&this.estVscroll();return this.vscroll?17:
0};m.estHscroll=function(){var g=this.that;if(null==this.contWd)throw"failed";var c=!1;1<this.calcColsOutsideCont(g.colModel)+1&&(c=!0);this.hscroll=c};m.getSBHeight=function(){null==this.hscroll&&this.estHscroll();return this.hscroll?17:0};m.getEContHt=function(){if(null==this.contHt)throw"contHt N/A";return this.contHt-this.getSBHeight()};m.getEContWd=function(){if(null==this.contWd)throw"contWd N/A";return this.contWd-this.getSBWidth()};m.calcColsOutsideCont=function(g){var c=this.that.options,
a=c.numberCell,c=c.freezeCols,e=this.contWd-this.getSBWidth(),b=0;a.show&&(b+=a.outerWidth);for(a=0;a<g.length;a++){var f=g[a];f.hidden||(b+=f.outerWidth)}var l=0,d=0,f=Math.round(b);f>e&&d++;for(a=c;a<g.length;a++)if(f=g[a],!f.hidden)if(l+=f.outerWidth,f=b-l,f>e)d++;else break;return d};m.setScrollHNumEles=function(){var g=this.that,c=g.options,a=g.colModel,e=c.scrollModel,b=0;if("flex"!==c.width||c.maxWidth)b="fullScroll"===e.lastColumn?a.length-c.freezeCols-g._calcNumHiddenUnFrozens():this.calcColsOutsideCont(a)+
1;g.hscroll.option("num_eles",b);return b};m.init=function(){var g=this.that,c=g.options;this.hscroll=this.vscroll=this.contHt=this.contWd=null;g.initH=g.initV=g.finalH=g.finalV=null;g.totalVisibleRows=g.lastFrozenRow=null;this.rowHt=c.rowHeight;this.headerHt=0;this.height=null};m.refresh=function(g){g=g||{};var c=this.that,a=g.header,e=g.table,b=g.pager,f,l=c.iGenerateView;f=c.element;if(f[0].offsetWidth){g.toolbar&&c.refreshToolbar();c.iMouseSelection.resetMargins();this.init();f=c.options;this.decidePanes();
f.collapsible._collapsed=!1;this.setMax("maxHeight");this.setMax("maxWidth");this.refreshGridWidthAndHeight();this.initContHeight();this.initContWidth();this.calcInitFinal();if(!1===a||!1===e)var d=this._storeColumnWidths(!0);this.refreshColumnWidths();this.calcInitFinalH();l.createColDefs();!1!==a?c._createHeader():this._isColumnWidthChanged(d)&&this._refreshTableWidths(d,{header:!0});c._refreshHeaderSortIcons();!1!==b&&c._refreshPager();this.setHeaderHeight();this.setContHeight();!1!==e?l.generateView({source:g.source}):
(this._refreshTableWidths(d,{table:!0}),l.setPanes());c._saveDims();l.scrollView();this.refreshScrollbars();"flex"==f.height&&this.setContAndGridHeightForFlex();"flex"==f.width&&this.setContAndGridWidthForFlex();this._refreshFrozenLine();c._createCollapse();f.dataModel.postDataOnce=void 0}else f.addClass("pq-pending-refresh")};m.summaryTable=function(){var g=this.$summary,c=this.that,a=c.options.summaryData;a?(g||(g=this.$summary=k("<div class='pq-grid-summary'></div>").prependTo(c.$bottom)),g={data:a,
$cont:g},c.createTable(g)):g&&g[0].innerHTML&&g.empty()};m.refreshVscroll=function(g){g=this.that;var c=g.iGenerateView,a=g.options;if(a.virtualY&&!a.scrollModel.smooth){var e=g.initV,b=g.finalV;this.calcInitFinal();var f=e-g.initV,l=b-g.finalV;a.fullrefreshOnScroll||a.detailModel.init||g._mergeCells||1!=Math.abs(f)||1!=Math.abs(l)?e==g.initV&&b==g.finalV||c.generateView():-1==f?(c.removeTopRow(1),c.appendRow(g.finalV-b)):1==f&&(c.prependRow(),c.removeBottomRow(b-g.finalV));g._saveDims();c.scrollView();
1>=this.setScrollVNumEles()&&this.refreshScrollbars()}};m._refreshTableWidths=function(g,c){var a=this.that,e=a.$tbl_header,b=c.header&&e,f=a.$tbl,l=c.table&&f,e=b?e.children().children(".pq-row-hidden"):null,d=b?a.$header.find(".pq-grid-col-resize-handle"):null,f=l&&f?f.children().children(".pq-row-hidden"):null,q,n=!1,h=0;l&&a.tables.length&&(l=a.tables[0].$tbl.children().children(".pq-row-hidden"),f=f?f.add(l):l);for(var l=a.iGenerateView.colDef,p=0,k=l.length;p<k;p++){var r=l[p],s=r.colIndx,u=
g[s].outerWidth,r=r.column.outerWidth;r!==u&&(b&&(q=e.find("td[pq-col-indx="+s+"]"),q.width(r)),f&&(q=f.find("td[pq-col-indx="+s+"]"),q.length&&(n=!0,q.width(r))));h+=r-u;b&&0!==h&&(s=d.filter("[pq-col-indx="+s+"]"),u=parseInt(s.css("left")),s.css("left",u+h))}n&&a._trigger("tableWidthChange");a._saveDims()}})(jQuery);
(function(k){function m(a,b,e){for(var f=0,c=a.length;f<c;f++){for(var l=a[f],g={},k=0,u=b.length;k<u;k++){var t=b[k];g[t]=l[t]}e.push(g)}}function g(a){var b=this;b.that=a;b.findformulas();a.on("columnChange",function(){b.findformulas()}).on("dataAvailable",function(){b._onDA()}).on(!0,"change",function(a,d){b._onchange(d)}).on("dataReady changeDone",function(){b.summaryData()})}var c=k.paramquery,a=c.cClass;k.widget("paramquery.pqGrid",c._pqGrid,{options:{flex:{on:!0,one:!1,all:!0},detailModel:{cache:!0,
offset:100,expandIcon:"ui-icon-triangle-1-se glyphicon glyphicon-minus",collapseIcon:"ui-icon-triangle-1-e glyphicon glyphicon-plus"},dragColumns:{enabled:!0,acceptIcon:"ui-icon-check glyphicon-ok",rejectIcon:"ui-icon-closethick glyphicon-remove",topIcon:"ui-icon-circle-arrow-s glyphicon glyphicon-circle-arrow-down",bottomIcon:"ui-icon-circle-arrow-n glyphicon glyphicon-circle-arrow-up"},track:null,mergeModel:{flex:!1},realFocus:!0,sortModel:{on:!0,type:"local",multiKey:"shiftKey",number:!0,single:!0,
cancel:!0,sorter:[],useCache:!0,ignoreCase:!1},filterModel:{on:!0,type:"local",mode:"AND",header:!1}},_create:function(){var a=this,b=a.options;a.listeners={};a._queueATriggers={};a.iHistory=new c.cHistory(a);a.iGroupView=new c.cGroupView(a);c.cMerge&&(a.iMerge=new c.cMerge(a));a.iFilterData=new c.cFilterData(a);a.iSelection=new e.Selection(a);a.iHeaderSearch=new f(a);a.iUCData=new c.cUCData(a);a.iMouseSelection=new c.cMouseSelection(a);a._super();new g(a);a.iDragColumns=new c.cDragColumns(a);a.refreshToolbar();
"remote"===b.dataModel.location&&a.refresh({table:!0});a.on("dataAvailable",function(){a.one("refreshDone",function(){a._trigger("ready");setTimeout(function(){a.element&&a._trigger("complete")},0)})});a.refreshDataAndView({header:!0})}});k.widget.extend=function(){var a=Array.prototype.shift,b=k.isPlainObject,e=k.isArray,f=k.widget.extend,c=a.apply(arguments),l;"boolean"==typeof c&&(l=c,c=a.apply(arguments));var g=arguments,s=0,u=g.length,t,m,v;for(null==l&&(l=1<u?!0:!1);s<u;s++)for(m in t=g[s],
t)v=t[m],void 0!==v&&(a=0<s?!1:!0,b(v)?(c[m]=c[m]||{},f(a,c[m],v)):e(v)?c[m]=l&&a?v.slice():v:c[m]=v);return c};var e=window.pq=window.pq||{};e.grid=function(a,b){var e=k(a).pqGrid(b);return e.data("paramqueryPqGrid")||e.data("paramquery-pqGrid")};c.pqGrid.regional={};var b=c.pqGrid.prototype;c.pqGrid.defaults=b.options;b.focus=function(a){a=a||{};var b=a.$td,e=a.rowIndxPage;a=a.colIndx;if(b){if(null==e||null==a)a=this.getCellIndices({$td:b}),e=a.rowIndxPage,a=a.colIndx}else{if(null==e||null==a){if((e=
document.activeElement)&&e!=document.body&&"pq-grid-excel"!=e.id&&"pq-grid-cont"!=e.className||!(b=this._focusElement))return;e=b.rowIndxPage,a=b.colIndx}var b=this.iMerge,f=e+this.rowIndxOffset;b.ismergedCell(f,a)&&(b=b.getRootCell(f,a,"o"),e=b.rowIndxPage,a=b.colIndx);b=this.getCell({rowIndxPage:e,colIndx:a})}if(this.options.realFocus){this._focusElement={$ele:b,rowIndxPage:e,colIndx:a};var c;b[0]&&(c=b[0])&&"TD"==c.nodeName.toUpperCase()?(c.setAttribute("tabindex",0),c.focus()):(e=this.options.dataModel.data)&&
e.length||this.$cont.focus()}else{if(c=this._focusElement)this.removeClass({rowIndxPage:c.rowIndxPage,colIndx:c.colIndx,cls:"pq-focus",refresh:!1}),this.element.find(".pq-focus").removeClass("pq-focus");b&&(this.addClass({rowIndxPage:e,colIndx:a,cls:"pq-focus"}),this._focusElement={$ele:b,rowIndxPage:e,colIndx:a});e=this.$cont;document.activeElement!=e[0]&&e[0].focus()}};b.onfocus=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.addClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,
cls:"pq-focus"})}};b.onblur=function(){if(!this.options.realFocus){var a=this._focusElement;a&&this.removeClass({rowIndxPage:a.rowIndxPage,colIndx:a.colIndx,cls:"pq-focus"})}};b.range=function(a,b){return new e.Range(this,a,"range",b)};b.rowExpand=function(a){this.iHierarchy.rowExpand(a)};b.rowInvalidate=function(a){this.iHierarchy.rowInvalidate(a)};b.rowCollapse=function(a){this.iHierarchy.rowCollapse(a)};b.saveState=function(a){a=a||{};var b=this.element,e=k.extend,f=this.options,c=e(!0,{},{sorter:f.sortModel.sorter}),
l=f.pageModel,l={rPP:l.rPP,curPage:l.curPage},g=this.colModel,s=[],u,m,y=0,v=g.length;m=f.groupModel;e=e(!0,{},{dataIndx:m.dataIndx,dir:m.dir,collapsed:m.collapsed,merge:m.merge,grandSummary:m.grandSummary});for(b=b[0].id;y<v;y++){u=g[y];m={width:u.width,dataIndx:u.dataIndx};if(u=u.filter)m.filter={value:u.value,value2:u.value2,on:u.on};s[y]=m}f={colModel:s,height:f.height,datestamp:Date.now(),width:f.width,groupModel:e,pageModel:l,sortModel:c,freezeRows:f.freezeRows,freezeCols:f.freezeCols};!1!==
a.stringify&&(f=JSON.stringify(f),!1!==a.save&&"undefined"!==typeof Storage&&localStorage.setItem("pq-grid"+(b?b:""),f));return f};b.loadState=function(a){a=a||{};var b;b=k.widget.extend;var e=k.extend,f=this.element[0].id;if(f=a.state||("undefined"===typeof Storage?void 0:localStorage.getItem("pq-grid"+(f?f:""))))"string"==typeof f&&(f=JSON.parse(f));else return!1;for(var c=f.colModel,l,g,s=[],m=[],t=[],y=this.options,v=1<this.depth,z=v?this.colModel:y.colModel,C=0,B=c.length;C<B;C++)l=c[C],g=l.dataIndx,
m[g]=C,s[g]=l.width,t[g]=l.filter;v||z.sort(function(a,b){return m[a.dataIndx]-m[b.dataIndx]});C=0;for(B=z.length;C<B;C++)c=z[C],g=c.dataIndx,c.width=s[g]||c.width,c.filter=e(c.filter,t[g]);this.iColModel.init();b(y.sortModel,f.sortModel);b(y.pageModel,f.pageModel);b=f.groupModel;b.refresh=!1;this.groupOption(b);b={freezeRows:f.freezeRows,freezeCols:f.freezeCols};isNaN(1*y.height)||isNaN(1*f.height)||(b.height=f.height);isNaN(1*y.width)||isNaN(1*f.width)||(b.width=f.width);this.option(b);!1!==a.refresh&&
this.refreshDataAndView();return!0};var f=function(a){function b(e,f,c){a.filter({data:[{dataIndx:e,value:f,value2:c}]})}this.that=a;var e=this;this.dataHS={};a.on("headerKeyDown",function(a,b){var d=k(a.originalEvent.target);return d.hasClass("pq-grid-hd-search-field")?e.onKeyDown(a,b,d):!0});a.on("createHeader",function(a,b){return e._onCreateHeader()});this.changeListener={change:function(a,d){b(d.dataIndx,d.value,d.value2)}};this.keyupListener={keyup:function(a,d){b(d.dataIndx,d.value,d.value2)}};
this.clickListener={click:function(a,d){b(d.dataIndx,d.value)}}},a=f.prototype=new a;a.get$Ele=function(a,b){var e=this.that,f=e.options.freezeCols,c=k(e.$tbl_header[0]),l=".pq-grid-hd-search-field[name='"+b+"']",e=k(e.$tbl_header[2==e.$tbl_header.length?1:0]);return a>=f?e.find(l):c.find(l)};a.onKeyDown=function(a,b,e){b=this.that;if(a.keyCode===k.ui.keyCode.TAB){var f=e.attr("name"),c=b.getColIndx({dataIndx:f}),l=b.colModel,g,s=a.shiftKey,m=l[c];if("between"==m.filter.condition&&(b.scrollColumn({colIndx:c}),
f=this.get$Ele(c,f),f[0]==e[0]?s||(g=f[1]):s&&(g=f[0]),g))return g.focus(),a.preventDefault(),!1;do{s?c--:c++;if(0>c||c>=l.length)break;m=l[c];e=m.filter;if(!m.hidden&&e){b.scrollColumn({colIndx:c});f=m.dataIndx;g=this.get$Ele(c,f);"between"==e.condition&&(g=s?k(g[1]):k(g[0]));if(g)return g.focus(),a.preventDefault(),!1;break}}while(1)}else return!0};a._bindFocus=function(){function a(d){d=k(d.target).closest(".pq-grid-hd-search-field").attr("name");if(b.scrollColumn({dataIndx:d})){var f=b.getColIndx({dataIndx:d});
e.get$Ele(f,d).focus()}}for(var b=this.that,e=this,f=b.$header.find(".pq-grid-header-search-row"),c=0;c<f.length;c++)k(f[c]).on("focusin",a)};a._onCreateHeader=function(){var a=this.that,b=a.options;if(b.filterModel.header){this._bindFocus();var e=a.colModel,b=b.freezeCols,f=a.$tbl_header,c=k(f[0]),l=k(f[1]),g="input,select";if(1<f.length){c.find(g).css("visibility","hidden");for(var s=0;s<b;s++){var m=e[s],g="*[name='"+m.dataIndx+"']";c.find(g).css("visibility","visible");l.find(g).css("visibility",
"hidden")}}e=a.iGenerateView.colDef;s=0;for(g=e.length;s<g;s++){var t=e[s],y=t.colIndx,m=t.column,v=m.filter;if(v){var t=m.dataIndx,z=c;y>=b&&1<f.length&&(z=l);y=z.find("*[name='"+t+"']");if(0!=y.length){var z=v.type,C=v.value,B=v.value2;"checkbox"==z&&"triple"==v.subtype?y.pqval({val:C}):"select"==z&&null!=C&&y.val(C);(z=v.init)&&z.call(y,{dataIndx:t,column:m});if(m=v.listeners)for(v=0;v<m.length;v++){z=m[v];"string"==typeof z&&(z=this[z+"Listener"]);for(var w in z)(function(b,e,f){b.bind(w,function(c){var h=
a.getColumn({dataIndx:f}),l=h.filter;"checkbox"==l.type?C="triple"==l.subtype?b.pqval({incr:!0}):b.is(":checked")?!0:!1:"between"==l.condition?(C=k(b[0]).val(),B=k(b[1]).val()):C=b.val();return e.call(this,c,{column:h,dataIndx:f,value:C,value2:B})})})(y,z[w],t)}}}}}};var l=function(a,b){return["<div class='pq-from-div'>",a,"</div><span class='pq-from-to-center'>-</span><div class='pq-to-div'>",b,"</div>"].join("")};a.createDOM=function(a,b){var e=this.that,f=e.options,g=f.bootstrap.on?" ":" ui-corner-all",
f=f.numberCell;a.push("<tr class='pq-grid-header-search-row'>");f.show&&a.push("<td pq-col-indx='-1' class='pq-grid-number-col' rowspan='1'><div class='pq-td-div'>&nbsp;</div></td>");for(var f=e.iGenerateView.colDef,k=0,r=f.length;k<r;k++){var s=f[k].column,m=b,t=s.halign;t||(t=s.align);"right"==t?m+=" pq-align-right":"center"==t&&(m+=" pq-align-center");(t=s.cls)&&(m=m+" "+t);if(t=s.filter){var y=s.dataIndx,v=t.type,z=t.value,C=t.condition,B=t.cls,B="pq-grid-hd-search-field "+(B?B:""),w=t.style,
w=w?w:"",x=t.attr,x=x?x:"",D="";if("between"==C)var E=t.value2,E=null!=E?E:"";"textbox"===v?(z=z?z:"",B=B+" pq-search-txt"+g,D="between"==C?l(this._input(y,z,B+" pq-from",w,x),this._input(y,E,B+" pq-to",w,x)):this._input(y,z,B,w,x)):"textarea"===v?(z=z?z:"",B=B+" pq-search-txt"+g,D="between"==C?l(this._textarea(y,z,B+" pq-from",w,x),this._textarea(y,E,B+" pq-to",w,x)):this._textarea(y,z,B,w,x)):"select"===v?t.cache?D=t.cache:(v=t.options,"function"===typeof v&&(v=v.call(e,{column:s,value:z,dataIndx:y,
cls:B,style:w,attr:x})),B+=g,s=["name='",y,"' class='",B,"' style='",w,"' ",x].join(""),D=c.select({options:v,attr:s,prepend:t.prepend,valueIndx:t.valueIndx,labelIndx:t.labelIndx,groupIndx:t.groupIndx}),t.cache=D):"checkbox"==v?D=["<input ",null==z||!1==z?"":"checked=checked"," name='",y,"' type=checkbox class='"+B+"' style='"+w+"' "+x+"/>"].join(""):"string"==typeof v?D=v:"function"==typeof v&&(D=v.call(e,{width:s.outerWidth,value:z,value2:E,column:s,dataIndx:y,cls:B,attr:x,style:w}));a.push(["<td class='",
m,"'><div class='pq-td-div' >",D,"</div></td>"].join(""))}else a.push(["<td class='",m,"'><div class='pq-td-div' >&nbsp;</div></td>"].join(""))}a.push("</tr>")};a._input=function(a,b,e,f,c){return['<input value="',b,"\" name='",a,"' type=text style='"+f+"' class='"+e+"' "+c+" />"].join("")};a._textarea=function(a,b,e,f,c){return["<textarea name='",a,"' style='"+f+"' class='"+e+"' "+c+" >",b,"</textarea>"].join("")};b.refreshToolbar=function(){var a=this.options,b=a.toolbar,f;this._toolbar&&(f=this._toolbar,
f.destroy());if(b){var c=b.cls,l=b.style,g=b.attr,b=b.items,c=k("<div class='"+(c?c:"")+"' style='"+(l?l:"")+"' "+(g?g:"")+" ></div>");f?f.widget().replaceWith(c):this.$top.append(c);f=e.toolbar(c,{items:b,gridInstance:this,bootstrap:a.bootstrap});a.showToolbar||c.css("display","none");this._toolbar=f}};b.isLeftOrRight=function(a){return a>this.freezeCols?"right":"left"};b.ovCreateHeader=function(a,b){this.options.filterModel.header&&this.iHeaderSearch.createDOM(a,b)};b.filter=function(a){var b=this,
e=this.options,f=void 0===a.apply?!0:a.apply,c=void 0===a.sort?!0:a.sort,l=e.dataModel,e=e.filterModel;if(void 0!=a){var g="replace"==a.oper?!0:!1;a=a.data;for(var s=this.colModel,s=f?s:k.extend(!0,[],s),m=0,t=s.length,y=a.length,v=0;v<t;v++){for(var z=s[v],C=!1,B=0;B<y&&m!=y;B++){var w=a[B];if(w.dataIndx==z.dataIndx){C=!0;m++;var B=z.filter,x=w.condition,D=w.value;B?B.on=!0:B=z.filter={on:!0};x&&(B.condition=x);x=B.condition;B.value=D;if("between"==x)B.value2=w.value2;else if("range"==x){w=[];if(D)if("string"==
typeof D){var x=B.options,E=D.indexOf('"'),F=D.lastIndexOf('"'),D=D.substr(E,F+1),D=JSON.parse("["+D+"]");if(x)for(E=0,F=x.length;E<F;E++){var H=x[E];-1!=k.inArray(H,D)&&w.push(H)}else w=D.split(",s*")}else"function"==typeof D.push&&(w=D);B.value=w}break}}g&&!C&&z.filter&&(z.filter.on=!1)}}var I={header:!1,apply:f,sort:c,CM:s};if("remote"==l.location&&"local"!=e.type)this.remoteRequest({apply:f,CM:s,callback:function(){return b._onDataAvailable(I)}});else return I.source="filter",I.trigger=!1,b._onDataAvailable(I)};
b._initTypeColumns=function(){for(var a=this.colModel,b=0,e=a.length;b<e;b++){var f=a[b],l=f.type;"checkBoxSelection"===l||"checkbox"==l?(f.type="checkbox",new c.cCheckBoxColumn(this,f)):"detail"===l&&(f.dataIndx="pq_detail",this.iHierarchy=new c.cHierarchy(this,f))}};b.refreshHeader=function(){this._createHeader();this.iGenerateView.setPanes();this._refreshHeaderSortIcons()};b._refreshHeaderSortIcons=function(){this.iHeader.refreshHeaderSortIcons()};b.getLargestRowCol=function(a){for(var b=0;b<a.length;b++);
};b.bringCellToView=function(a){this._bringCellToView(a)};b._setUrl=function(a){this.options.dataModel.getUrl=function(){return{url:this.url+(null!=a?a:"")}}};b.pageData=function(){return this.pdata};b.getData=function(a){a=a||{};var b=a.dataIndx,e=b?b.length:0,f=a.data;a=this.options.dataModel;var c=a.data,l=a.dataUF;a=[];if(e)f?m(f,b,a):(c&&m(c,b,a),l&&m(l,b,a));else return c.concat(l?l:[]);f=[];for(c=0;c<e;c++){var l=b[c],g=this.getColumn({dataIndx:l});f.push({dataIndx:l,dir:"up",dataType:g.dataType,
sortType:g.sortType})}a=this.iSort._sortLocalData(f,a);b=[];e=void 0;f=0;for(c=a.length;f<c;f++)l=a[f],g=JSON.stringify(l),g!==e&&(b.push(l),e=g);return b};b.get_p_data=function(){var a=this.options,b="remote"==a.pageModel.type,e=a.dataModel.data,f=this.pdata,c=this.rowIndxOffset,a=a.groupModel,l=c&&b?Array(c):[];return a.on&&a.dataIndx.length?c?(b||(l=e.slice(0,c)),l.concat(f)):f:c&&b?l.concat(f):e};b._onDataAvailable=function(a){a=a||{};var b=this.options,e=null==a.apply?!0:a.apply,f=a.source,c=
a.sort,l=[],l=b.filterModel,g=b.dataModel,b=b.sortModel,k=g.location;!1!==e&&!1!==a.trigger&&this._trigger("dataAvailable",a.evt,{source:f});l=l&&l.on&&("local"==k&&"remote"!=l.type||"remote"==k&&"local"==l.type)?this.iFilterData.filterLocalData(a).data:g.data;"local"==b.type&&!1!==c&&(e?this.sort({refresh:!1}):l=this.iSort.sortLocalData(l));if(!1===e)return l;g.data=l;this.refreshView(a)};b.sort=function(a){a=a||{};var b=this,e=this.options,f=e.dataModel.data,c=e.sortModel.type;if(f&&f.length||"local"!=
c){var l=e.editModel,e=this.iSort,g=e.getSorter(),k,m=a.evt,t=null==a.single?e.readSingle():a.single;k=e.readCancel();a.sorter?a.addon?(a.single=t,a.cancel=k,k=e.refreshSorter(a)):k=a.sorter:k=e.readSorter();if(k.length||g.length)l.indices&&b.blurEditor({force:!0}),l={dataIndx:k.length?k[0].dataIndx:null,oldSorter:g,sorter:k,source:a.source,single:t},!1===b._trigger("beforeSort",m,l)?e.cancelSort():(e.resumeSort(),"local"==c&&e.saveOrder(),e.setSorter(k),e.setSingle(t),e.writeSorter(k),e.writeSingle(t),
"local"==c?(e.sortLocalData(f),this._queueATriggers.sort={evt:m,ui:l},!1!==a.refresh&&this.refreshView()):"remote"==c&&(this._queueATriggers.sort={evt:m,ui:l},a.initByRemote||this.remoteRequest({initBySort:!0,callback:function(){b._onDataAvailable()}})))}};b.reset=function(a){a=a||{};var b=a.sort,e,f=0,c;e=this.options;c=k.extend;var l,g=a.filter,m=a.group;if(b||g||m){b&&(l=!0===b?{sorter:[]}:b,c(e.sortModel,l));if(g)for(e=this.getColModel(),c=e.length;f<c;f++)if(l=e[f].filter)l.value=null,l.value2=
null,l.cache=null;m&&(f=!0===m?{dataIndx:[]}:m,f.refresh=!1,this.groupOption(f));!1!==a.refresh&&(g?(this.filter({oper:"replace",data:[]}),this.refreshHeader()):b?this.sort():this.refreshView())}};b._trigger=c._trigger;b.on=c.on;b.one=c.one;b.off=c.off;b.pager=function(){return this.pagerW};b.vscrollbar=function(){return this.vscroll};b.hscrollbar=function(){return this.hscroll};b.toolbar=function(){return this._toolbar.element};b=g.prototype;b.callRow=function(a,b,e){if(a)for(;e--;){var f=b[e],c=
f.column;a[c.dataIndx]=f.formula.call(this.that,{rowData:a,column:c})}};b._onDA=function(){var a=this.formulas.length;if(a)for(var b=this.that.options.dataModel.data,e=b.length,f=this.formulas;e--;)this.callRow(b[e],f,a)};b.summaryData=function(){var a=this.formulas,b=a.length,e,f;if(b)for(e=this.that.options.summaryData||[],f=e.length;f--;)this.callRow(e[f],a,b)};b._onchange=function(a){var b=this.formulas.length;if(b){a=a.rowList;for(var e=this.formulas,f=a.length;f--;)this.callRow(a[f].rowData,
e,b)}};b.findformulas=function(){for(var a=this.that.colModel,b,e,f=[],c=a.length;c--;)b=a[c],(e=b.formula)&&f.push({formula:e,column:b});this.formulas=f};b=c.cColModel=b=function(a){this.that=a;this.init()};b=b.prototype;b.extend=function(a,b){for(var e,f,c=k.extend,l=a.length;l--;){var g=a[l];for(e in b)void 0===g[e]&&(f=b[e],g[e]=f&&"object"==typeof f?c(!0,{},f):f)}};b.init=function(){var a=this.that,b=a.options,e=b.columnTemplate,f;f=b.colModel;f||(this._autoGenColumns(),f=b.colModel);b=this.nestedCols(f);
a.depth=b.depth;b=a.colModel=b.colModel;f=b.length;e&&this.extend(b,e);this.getHeadersCells();this.alignColumns(b,f);this.assignRowSpan();this._refreshDataIndices();a._trigger("CMInit")};b.alignColumns=function(a,b){for(var e=0;e<b;e++){var f=a[e];if(!f.align){var c=f.dataType;!c||"integer"!=c&&"float"!=c||(f.align="right")}}};b.nestedCols=function(a,b,e,f){var c=a.length,l=[];null==b&&(b=1);for(var g=b,k=0,m=0,t=0,y=0;y<c;y++){var v=a[y];v.parent=f?f:void 0;!0===e&&(v.hidden=e);var z=v.colModel;
z&&z.length?(z=this.nestedCols(z,b+1,v.hidden,v),l=l.concat(z.colModel),0<z.colSpan?(z.depth>g&&(g=z.depth),v.colSpan=z.colSpan,k+=z.colSpan):v.colSpan=0,t+=z.o_colspan,v.o_colspan=z.o_colspan,v.childCount=z.childCount,m+=z.childCount):(v.hidden?v.colSpan=0:(v.colSpan=1,k++),t++,v.o_colspan=1,v.childCount=0,m++,l.push(v))}return{depth:g,colModel:l,colSpan:k,width:0,childCount:m,o_colspan:t}};b.getHeadersCells=function(){for(var a=this.that,b=a.options.colModel,e=a.colModel.length,f=a.depth,c=[],l=
0;l<f;l++){c[l]=[];for(var g=0,k=0,m=0;m<e;m++){var t;if(0==l)t=b[g];else{var y=c[l-1][m];if((t=y.colModel)&&0!=t.length){for(var y=m-y.leftPos,v=0,z=0,C=0;C<t.length;C++)if(v+=0<t[C].childCount?t[C].childCount:1,y<v){z=C;break}t=t[z]}else t=y}y=t.childCount?t.childCount:1;m==k?(t.leftPos=m,c[l][m]=t,k+=y,b[g+1]&&g++):c[l][m]=c[l][m-1]}}return a.headerCells=c};b.getDataType=function(){var a=this.colModel;if(a&&a[0])return"string"==typeof a[0].dataIndx?"JSON":"ARRAY"};b.assignRowSpan=function(){for(var a=
this.that,b=a.colModel.length,e=a.headerCells,a=a.depth,f=0;f<b;f++)for(var c=0;c<a;c++){var l=e[c][f];if(!(0<f&&l==e[c][f-1]||0<c&&l==e[c-1][f])){for(var g=1,k=c+1;k<a;k++)l==e[k][f]&&g++;l.rowSpan=g}}return e};b._autoGenColumns=function(){var a=this.that.options,b=a.columnTemplate||{},f=b.dataType,c=b.title,l=b.width,b=a.dataModel.data,g=e.validation,m=[];b&&b.length&&k.each(b[0],function(a,b){var e="string";g.isInteger(b)?e=-1<b+-1?"float":"integer":g.isDate(b)?e="date":g.isFloat(b)&&(e="float");
m.push({dataType:f?f:e,dataIndx:a,title:c?c:a,width:l?l:100})});a.colModel=m};b._refreshDataIndices=function(){for(var a=this.that,b="JSON"==this.getDataType()?!0:!1,e={},f={},c={},l=a.colModel,g=l.length,k=0;k<g;k++){var m=l[k],t=m.dataIndx;null==t&&(t="detail"==m.type?"pq_detail":b?"dataIndx_"+k:k,"pq_detail"==t&&(m.dataType="object"),m.dataIndx=t);e[t]=m;f[t]=k;m.validations&&(c[t]=c)}a.columns=e;a.colIndxs=f;a.validations=c}})(jQuery);
(function(k){var m=k.paramquery,g=m._pqGrid.prototype;g.exportExcel=function(a){a=a||{};a.format="xlsx";return this.exportData(a)};g.exportCsv=function(a){a=a||{};a.format="csv";return this.exportData(a)};g.exportData=function(a){return(new c(this,a)).Export(a)};var c=m.cExport=function(a,e){this.that=a;this.templates={content_types:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Override PartName="/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/worksheet.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',
workbook:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?><workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><sheets><sheet name="',e.sheetName?e.sheetName:"ParamQuery Pro",'" sheetId="1" r:id="rId1"/></sheets></workbook>'].join(""),worksheet:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><%=content%></worksheet>',
rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="workbook.xml"/></Relationships>',workbook_rels:'<?xml version="1.0" encoding="UTF-8" standalone="yes"?><Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheet.xml"/></Relationships>'}},
g=c.prototype;g.getTitle=function(a,e){var b=a.title;b?"function"==typeof b&&(b=b.call(this.that,{colIndx:e,column:a,dataIndx:a.dataIndx,Export:!0})):b="";return b};g.getRenderVal=function(a,e,b){var f=a.column,c=f.exportRender;return(e&&!1!==c||c)&&(f.render||f._render||f.format)?b.renderCell(a):a.rowData[a.dataIndx]};g.getXlsMergeCells=function(a,e,b,f){a=a.concat(b.getMergeCells(e,this.curPage,f));e=[];b=m.toLetter;f=a.length;e.push('<mergeCells count="'+f+'">');for(var c=0;c<f;c++){var d=a[c],
d=b(d.c1)+(d.r1+1)+":"+b(d.c2)+(d.r2+1);e.push('<mergeCell ref="',d,'"/>')}e.push("</mergeCells>");return f?e.join(""):""};g.getXlsCols=function(a,e){var b=[];b.push("<cols>");for(var f=0;f<e;f++){var c=a[f],d=f+1,g=c.hidden?"1":"0",n=c._width;n||(n=parseInt(c.width))||(n=100);b.push('<col min="',d,'" max="',d,'" hidden="',g,'" customWidth="1" width="',n/7,'"/>')}b.push("</cols>");return b.join("")};g.getXlsHeader=function(a,e,b){for(var f=[],c=0;c<e;c++){var d=a[c];f.push("<row>");for(var g=0,n=
d.length;g<n;g++){var h=d[g];if(!1!==h.copy){var k=h.o_colspan,m=h.rowSpan,r=this.getTitle(h,g);0<c&&h==a[c-1][g]?r="":0<g&&h==a[c][g-1]?r="":(1<k||1<m)&&b.push({r1:c,c1:g,r2:c+m-1,c2:g+k-1});f.push('<c t="inlineStr"><is><t><![CDATA['+r+"]]\x3e</t></is></c>")}}f.push("</row>")}return f.join("")};g.getXlsBody=function(a,e,b,f,c,d,g,n,h){var k=[],m,r,s,u,t,y,v={integer:"Number","float":"Number",bool:"bool"};for(m=0;m<f;m++){t=b[m];r=t.pq_hidden?'hidden="1"':"";y=c?m+d:m;s=y-d;t={rowIndx:y,rowIndxPage:s,
rowData:t,Export:!0};k.push("<row "+r+">");for(r=0;r<e;r++)u=a[r],!1!==u.copy&&(s=void 0,g.ismergedCell(y,r)&&(g.isRootCell(y,r,"o")||(s=null)),void 0===s&&(t.colIndx=r,t.column=u,t.dataIndx=u.dataIndx,s=this.getRenderVal(t,n,h)),u=(u=null==s?null:v[u.dataType])?u:"String","Number"==u&&(isNaN(1*s)?u="String":s*=1),s=null==s?"":s,"String"==u?k.push('<c t="inlineStr"><is><t><![CDATA['+s+"]]\x3e</t></is></c>"):"Number"==u?k.push("<c><v>"+s+"</v></c>"):"bool"==u?(s=s?"1":"0",k.push('<c t="b"><v>'+s+"</v></c>")):
k.push("<c><v>"+s+"</v></c>"));k.push("</row>")}return k.join("\n")};g.getXlsContent=function(a,e,b,f,c,d,g,n,h,k,m,r){var s='<sheetViews><sheetView tabSelected="1" workbookViewId="0"><pane ySplit="<%=a%>" topLeftCell="A<%=b%>" activePane="bottomLeft" state="frozen"/></sheetView></sheetViews>',u=this.getXlsCols(a,e),t=[],y=r?f:0,s=s.replace("<%=a%>",y),s=s.replace("<%=b%>",y+1);b=r?this.getXlsHeader(b,f,t):"";a=this.getXlsBody(a,e,c,d,g,n,h,k,m);return[s,u,"<sheetData>",b,a,"</sheetData>",this.getXlsMergeCells(t,
r?f:0,h,d)].join("")};g.getHtmlHeader=function(a,e){for(var b=[],f,c,d,g,n=0;n<e;n++){var h=a[n],k=null;b.push("<tr>");for(var m=0,r=h.length;m<r;m++)f=h[m],c=f.colSpan,!f.hidden&&c&&!1!==f.copy&&(d=f.rowSpan,0<n&&f==a[n-1][m]||k&&0<m&&f==k||(g=this.getTitle(f,m),k=f,f=(f=f.halign||f.align)?"align="+f:"",b.push("<th colspan=",c," rowspan=",d," ",f,">",g,"</th>")));b.push("</tr>")}return b.join("")};g.getHtmlBody=function(a,e,b,f,c,d,g,n,h){var k=[],m,r,s,u,t,y,v;for(m=0;m<f;m++)if(r=b[m],!r.pq_hidden){v=
c?m+d:m;y=v-d;y={rowIndx:v,rowIndxPage:y,rowData:r,Export:!0};k.push("<tr>");for(r=0;r<e;r++)if(s=a[r],!s.hidden&&!1!==s.copy){t="";if(g.ismergedCell(v,r)){if(t=g.isRootCell(v,r))u=g.getRootCell(v,r,"o"),u.Export=!0,u=this.getRenderVal(u,n,h);else continue;t="rowspan="+t.rowspan+" colspan="+t.colspan+" "}else y.colIndx=r,y.column=s,y.dataIndx=s.dataIndx,u=this.getRenderVal(y,n,h);s=s.align;t+=s?"align="+s:"";u=null==u?"":u;k.push("<td ",t,">",u,"</td>")}k.push("</tr>")}return k.join("")};g.getHtmlContent=
function(a,e,b,f,c,d,g,n,h,k,m,r,s){var u=a.cssRules||"",t=this.that.element.find(".pq-grid-table"),y=t.css("font-family"),t=t.css("font-size"),v=[];v.push("<!DOCTYPE html><html><head>",'<meta charset="utf-8" />',"<title>",a.title?a.title:"ParamQuery Pro","</title>","</head><body>","<style>","table{empty-cells:show;font-family:"+y+";font-size:"+t+";border-collapse:collapse;}","td,th{padding: 5px;border:1px solid #ccc;}",u,"</style>","<table>");v.push(s?this.getHtmlHeader(f,c,e):"");v.push(this.getHtmlBody(e,
b,d,g,n,h,k,m,r));v.push("</table></body></html>");return v.join("")};g.getCsvHeader=function(a,e,b,f){for(var c=[],d=[],g,n,h=0;h<e;h++){for(var k=a[h],m=null,r=0,s=k.length;r<s;r++)g=b[r],g.hidden||!1===g.copy||(g=k[r],0<h&&g==a[h-1][r]?c.push(""):m&&0<r&&g==m?c.push(""):(n=(n=this.getTitle(g,r))?n.replace(/\"/g,'""'):"",m=g,c.push('"'+n+'"')));d.push(c.join(f));c=[]}return d};g.getCSVContent=function(a,e,b,f,c,d,g,n,h,k,m,r,s){var u,t;a=a.separator||",";var y,v=[];s=s?this.getCsvHeader(f,c,e,a):
[];for(f=0;f<g;f++)if(t=d[f],!t.pq_hidden){c=n?f+h:f;y=c-h;y={rowIndx:c,rowIndxPage:y,rowData:t,Export:!0};for(t=0;t<b;t++)u=e[t],u.hidden||!1===u.copy||(k.ismergedCell(c,t)?k.isRootCell(c,t)?(u=k.getRootCell(c,t,"o"),u.Export=!0,u=this.getRenderVal(u,m,r)):u="":(y.colIndx=t,y.column=u,y.dataIndx=u.dataIndx,u=this.getRenderVal(y,m,r)),u=(null==u?"":u)+"",u=u.replace(/\"/g,'""'),v.push('"'+u+'"'));s.push(v.join(a));v=[]}return s.join("\n")};g.getJsonContent=function(a,e){function b(a,b){return 0===
(a+"").indexOf("pq_")?void 0:b}return a.nostringify?e:JSON.stringify(e,a.nopqdata?b:null,a.nopretty?null:2)};g.postRequest=function(a){var e=a.format,b,f=a.url,c=a.filename||"pqGrid";a.zip&&"xlsx"!=e?(e=new JSZip,e.file(c+"."+a.format,a.data),a=e.generate({type:"base64",compression:"DEFLATE"}),b=!0,e="zip"):(b=a.decodeBase?!0:!1,a=a.data);f&&k.ajax({url:f,type:"POST",cache:!1,data:{pq_ext:e,pq_data:a,pq_decode:b,pq_filename:c},success:function(a){f+=(0<f.indexOf("?")?"&":"?")+"pq_filename="+a;k(document.body).append("<iframe height='0' width='0' frameborder='0' src=\""+
f+'"></iframe>')}});return a};g.Export=function(a){var e=this.that,b=e.options,f,c,d,g=this.templates,n=b.groupModel;c="remote"==b.pageModel.type;f=e.rowIndxOffset;var h=e.iGenerateView,k=e.iMerge,m=e.colModel,r=m.length,s=e.headerCells,u=s.length,n=(this.curPage=n.on&&n.dataIndx.length||c)?e.pdata:b.dataModel.data,n=b.summaryData?n.concat(b.summaryData):n,t=n.length,b=a.url,y=a.render,v=!a.noheader,z=a.format;e._trigger("beforeExport",null,a);"xlsx"==z?(f=this.getXlsContent(m,r,s,u,n,t,c,f,k,y,h,
v),c=new JSZip,c.file("[Content_Types].xml",g.content_types),c.file("workbook.xml",g.workbook),c.file("worksheet.xml",g.worksheet.replace("<%=content%>",f)),f=c.folder("_rels"),f.file(".rels",g.rels),f.file("workbook.xml.rels",g.workbook_rels),b?(a.data=c.generate({type:"base64",compression:"DEFLATE"}),a.decodeBase=!0):d=c.generate({type:"blob",compression:"DEFLATE"})):a.data="json"==z?this.getJsonContent(a,n):"csv"==z?this.getCSVContent(a,m,r,s,u,n,t,c,f,k,y,h,v):this.getHtmlContent(a,m,r,s,u,n,
t,c,f,k,y,h,v);d=d?d:this.postRequest(a);e._trigger("exportData",null,a);return d}})(jQuery);
(function(k){var m=k.paramquery,g={options:{items:[],gridInstance:null}};k.widget("paramquery.pqToolbar",g);g=m.pqToolbar.prototype;g.refresh=function(){this.element.empty();this._create()};g._create=function(){var c=this.options,a=c.gridInstance,e={button:"click",select:"change",checkbox:"change",textbox:"change"},b,f,l=c.bootstrap,d=l.on,g=a.colModel,c=c.items,n=this.element;n.addClass("pq-toolbar");for(var h=0,p=c.length;h<p;h++){var A=c[h],r=A.type,s=A.value,u=A.icon,t=A.options||{},y=A.label,
v=(f=A.listener)?[f]:A.listeners,v=v||[function(){}];f=(f=A.cls)?f:"";f=(f=d&&"button"==r?l.btn+" "+f:f)?"class='"+f+"'":"";var z=A.style,z=z?"style='"+z+"'":"",C=A.attr,B=C?C:"",C=y&&"button"!=r?[f,B]:[f,B,z],C=C.join(" "),w;A.options=t;"textbox"==r?w=k([y?"<label "+z+">"+y:"","<input type='text' "+C+">",y?"</label>":""].join("")):"textarea"==r?w=k([y?"<label "+z+">"+y:"","<textarea "+C+"></textarea>",y?"</label>":""].join("")):"checkbox"==r?w=k([y?"<label "+z+">":"","<input type='checkbox' ",s?
"checked='checked' ":"",C,">",y?y+"</label>":""].join("")):"separator"==r?w=k("<span class='pq-separator' "+[B,z].join(" ")+"></span>"):"button"==r?(w="",d&&(w=u?"<span class='glyphicon "+u+"'></span>":""),w=k("<button type='button' "+C+">"+w+y+"</button>"),k.extend(t,{label:y?y:!1,icons:{primary:d?"":u}}),w.button(t)):"select"==r?("function"===typeof t&&(t=t.call(a,{colModel:g})),t=t||[],w=m.select({options:t,attr:C,prepend:A.prepend,groupIndx:A.groupIndx,valueIndx:A.valueIndx,labelIndx:A.labelIndx}),
w=k([y?"<label "+z+">"+y:"",w,y?"</label>":""].join(""))):"string"==typeof r?w=k(r):"function"==typeof r&&(w=r.call(a,{colModel:g,cls:f}),w=k(w));w.appendTo(n);"checkbox"!==r&&void 0!==s&&(y?k(w[0].children[0]).val(s):w.val(s));s=0;for(y=v.length;s<y;s++)for(b in f=v[s],u={},"function"==typeof f?u[e[r]]=f:u=f,u)w.on(b,this._onEvent(a,u[b],A))}};g._onEvent=function(c,a,e){return function(b){e.value="checkbox"==e.type?k(b.target).prop("checked"):k(b.target).val();a.call(c,b)}};g._destroy=function(){this.element.empty().removeClass("pq-toolbar").enableSelection()};
g._disable=function(){null==this.$disable&&(this.$disable=k("<div class='pq-grid-disable'></div>").css("opacity",.2).appendTo(this.element))};g._enable=function(){this.$disable&&(this.element[0].removeChild(this.$disable[0]),this.$disable=null)};g._setOption=function(c,a){"disabled"==c&&(!0==a?this._disable():this._enable())};pq.toolbar=function(c,a){var e=k(c).pqToolbar(a);return e.data("paramqueryPqToolbar")||e.data("paramquery-pqToolbar")}})(jQuery);
(function(k){var m=k.paramquery,g=m.pqGrid.prototype.options,c={on:!1,dirtyClass:"pq-cell-dirty"};g.trackModel=g.trackModel||c;g=(m.cUCData=function(a){this.that=a;this.udata=[];this.ddata=[];this.adata=[];this.options=a.options;var e=this;a.on("dataAvailable",function(a,f){"filter"!=f.source&&(e.udata=[],e.ddata=[],e.adata=[])})}).prototype=new m.cClass;g.add=function(a){var e=this.that,b=this.adata,f=this.ddata;a=a.rowData;for(var c=this.options.trackModel.dirtyClass,d=e.getRecId({rowData:a}),g=
0,n=b.length;g<n;g++){var h=b[g];if(null!=d&&h.recId==d)throw"primary key violation";if(h.rowData==a)throw"same data can't be added twice.";}g=0;for(n=f.length;g<n;g++)if(a==f[g].rowData){f.splice(g,1);return}var f=[],k;for(k in a)f.push(k);e.removeClass({rowData:a,dataIndx:f,cls:c});a={recId:d,rowData:a};b.push(a)};g.update=function(a){var e=this.that,b=this.options.trackModel.dirtyClass,f=a.rowData||e.getRowData(a),c=e.getRecId({rowData:f}),d=a.dataIndx,g=a.refresh,n=e.columns,h=e.getValueFromDataType;
a=a.row;var p=this.udata,m=p.slice(0),r=!1;if(null!=c){for(var s=0,u=p.length;s<u;s++){var t=p[s],y=t.oldRow;if(t.rowData==f){r=!0;for(d in a)p=n[d].dataType,u=a[d],u=h(u,p),t=y[d],t=h(t,p),y.hasOwnProperty(d)&&t===u?(p={rowData:f,dataIndx:d,refresh:g,cls:b},e.removeClass(p),delete y[d]):(p={rowData:f,dataIndx:d,refresh:g,cls:b},e.addClass(p),y.hasOwnProperty(d)||(y[d]=f[d]));k.isEmptyObject(y)&&m.splice(s,1);break}}if(!r){y={};for(d in a)y[d]=f[d],p={rowData:f,dataIndx:d,refresh:g,cls:b},e.addClass(p);
p={rowData:f,recId:c,oldRow:y};m.push(p)}this.udata=m}};g["delete"]=function(a){var e=this.that,b=a.rowIndx,f=a.rowIndxPage,c=e.rowIndxOffset,b=null==b?f+c:b,f="remote"==e.options.pageModel.type?null==f?b-c:f:b,c=this.adata,d=this.ddata;a=e.getRowData(a);for(var e=0,g=c.length;e<g;e++)if(c[e].rowData==a){c.splice(e,1);return}d.push({indx:f,rowData:a,rowIndx:b})};g.isDirty=function(a){var e=this.udata,b=this.adata,f=this.ddata,c=!1;if(a=this.that.getRowData(a))for(b=0;b<e.length;b++){if(a==e[b].rowData){c=
!0;break}}else if(e.length||b.length||f.length)c=!0;return c};g.getChangesValue=function(a){a=a||{};var e=this.that;a=a.all;for(var b=this.udata,f=this.adata,c=this.ddata,d=[],g=[],n=[],h=[],p=[],m=[],r=0,s=c.length;r<s;r++){var u=c[r],t=u.rowData,y={};p.push(t);for(var v in t)0!=v.indexOf("pq_")&&(y[v]=t[v]);m.push(y)}r=0;for(s=b.length;r<s;r++)if(u=b[r],c=u.oldRow,t=u.rowData,-1==k.inArray(t,p)&&-1==k.inArray(t,d)){y={};if(!1!==a)for(v in t)0!=v.indexOf("pq_")&&(y[v]=t[v]);else{for(v in c)y[v]=
t[v];y[e.options.dataModel.recIndx]=u.recId}d.push(t);g.push(y);n.push(c)}r=0;for(s=f.length;r<s;r++){u=f[r];t=u.rowData;y={};for(v in t)0!=v.indexOf("pq_")&&(y[v]=t[v]);h.push(y)}return{updateList:g,addList:h,deleteList:m,oldList:n}};g.getChanges=function(){for(var a=this.udata,e=this.adata,b=this.ddata,f=k.inArray,c=[],d=[],g=[],n=[],h=0,p=b.length;h<p;h++){var m=b[h],m=m.rowData;n.push(m)}h=0;for(p=a.length;h<p;h++)m=a[h],b=m.oldRow,m=m.rowData,-1==f(m,n)&&-1==f(m,c)&&(c.push(m),d.push(b));h=0;
for(p=e.length;h<p;h++)m=e[h],m=m.rowData,g.push(m);return{updateList:c,addList:g,deleteList:n,oldList:d}};g.getChangesRaw=function(){var a=this.adata,e=this.ddata,b={updateList:[],addList:[],deleteList:[]};b.updateList=this.udata;b.addList=a;b.deleteList=e;return b};g.commitAdd=function(a,e){for(var b=this.that,f=b.colModel,c=f.length,d=this.adata,g=k.inArray,n=d.length,h=b.getValueFromDataType,b=[],p=a.length,m=[],r=0;r<p;r++)for(var s=a[r],u=0;u<n;u++){var t=d[u].rowData,y=!0;if(-1==g(t,m)){for(var v=
0;v<c;v++){var z=f[v],C=z.dataType,B=z.dataIndx;if(!z.hidden&&B!=e&&(z=t[B],z=h(z,C),B=s[B],B=h(B,C),z!==B)){y=!1;break}}if(y){u={};y={};u[e]=s[e];y[e]=t[e];b.push({type:"update",rowData:t,oldRow:y,newRow:u});m.push(t);break}}}f=[];for(u=0;u<n;u++)t=d[u].rowData,-1==g(t,m)&&f.push(d[u]);this.adata=f;return b};g.commitUpdate=function(a,e){for(var b=this.that,f=this.options.trackModel.dirtyClass,c=this.udata,d=c.length,g=a.length,n=[],h=0;h<d;h++){var p=c[h],m=p.rowData,p=p.oldRow;if(-1==k.inArray(m,
n))for(var r=0;r<g;r++)if(m[e]==a[r][e]){n.push(m);for(var s in p)b.removeClass({rowData:m,dataIndx:s,cls:f})}}b=[];for(h=0;h<d;h++)m=c[h].rowData,-1==k.inArray(m,n)&&b.push(c[h]);this.udata=b;return[]};g.commitDelete=function(a,e){for(var b=this.ddata,f=b.length,c=this.udata,d,g,n;f--;){d=b[f].rowData;g=d[e];n=a.length;if(!n)break;for(;n--;)if(g==a[n][e]){a.splice(n,1);b.splice(f,1);for(g=c.length;g--;)c[g].rowData==d&&c.splice(g,1);break}}};g.commitUpdateAll=function(){for(var a=this.that,e=this.options.trackModel.dirtyClass,
b=this.udata,f=0,c=b.length;f<c;f++){var d=b[f],g=d.oldRow,d=d.rowData,n;for(n in g)a.removeClass({rowData:d,dataIndx:n,cls:e})}this.udata=[]};g.commitAddAll=function(){this.adata=[]};g.commitDeleteAll=function(){for(var a=this.ddata,e=this.udata,b=e.length,f,c=a.length,d=0;0<b&&d<c;d++){for(f=a[d].rowData;b--;)e[b].rowData==f&&e.splice(b,1);b=e.length}a.length=0};g.commit=function(a){var e=this.that,b=a?a.history:null,b=null==b?!1:b,f=[],f=[],c=[],d=e.options.dataModel.recIndx;if(null==a)this.commitAddAll(),
this.commitUpdateAll(),this.commitDeleteAll();else{var g=a.type;a=a.rows;"add"==g?a?f=this.commitAdd(a,d):this.commitAddAll():"update"==g?a?c=this.commitUpdate(a,d):this.commitUpdateAll():"delete"==g&&(a?this.commitDelete(a,d):this.commitDeleteAll())}f=f.concat(c);f.length&&(e._digestData({source:"commit",checkEditable:!1,track:!1,history:b,rowList:f}),e.refreshView())};g.rollbackAdd=function(a,e){for(var b=this.adata,f=[],c=0,d=b.length;c<d;c++)f.push({type:"delete",rowData:b[c].rowData});this.adata=
[];return f};g.rollbackDelete=function(a,e){for(var b=this.ddata,c=[],l=b.length-1;0<=l;l--){var d=b[l];c.push({type:"add",rowIndx:d.rowIndx,newRow:d.rowData})}this.ddata=[];return c};g.rollbackUpdate=function(a,e){for(var b=this.that,c=this.options.trackModel.dirtyClass,l=this.udata,d=[],g=0,n=l.length;g<n;g++){var h=l[g],k=h.rowData,m={},r=h.oldRow;if(null!=h.recId){var h=[],s;for(s in r)m[s]=k[s],h.push(s);b.removeClass({rowData:k,dataIndx:h,cls:c,refresh:!1});d.push({type:"update",rowData:k,newRow:r,
oldRow:m})}}this.udata=[];return d};g.rollback=function(a){var e=this.that,b=e.options.pageModel,c=a&&null!=a.refresh?a.refresh:!0;a=a&&null!=a.type?a.type:null;var l=[],l=[],d=[],g=[],n=e.options.dataModel.data;if(null==a||"update"==a)d=this.rollbackUpdate(b,n);if(null==a||"delete"==a)l=this.rollbackDelete(b,n);if(null==a||"add"==a)g=this.rollbackAdd(b,n);l=l.concat(g,d);e._digestData({history:!1,allowInvalid:!0,checkEditable:!1,source:"rollback",track:!1,rowList:l});c&&e.refreshView()};m=m.pqGrid.prototype;
m.getChanges=function(a){this.blurEditor({force:!0});if(a){var e=a.format;if(e){if("byVal"==e)return this.iUCData.getChangesValue(a);if("raw"==e)return this.iUCData.getChangesRaw()}}return this.iUCData.getChanges()};m.rollback=function(a){this.blurEditor({force:!0});this.iUCData.rollback(a)};m.isDirty=function(a){return this.iUCData.isDirty(a)};m.commit=function(a){this.iUCData.commit(a)};m.updateRow=function(a){for(var e=a.rowList||[{rowIndx:a.rowIndx,newRow:a.newRow||a.row,rowData:a.rowData,rowIndxPage:a.rowIndxPage}],
b=[],c=0,l=e.length;c<l;c++){var d=this.normalize(e[c]),g=d.newRow,n=d.rowData,h={};if(n){for(var k in g)h[k]=n[k];d.oldRow=h;d.type="update";b.push(d)}}if(!b.length||!1===this._digestData({source:a.source||"update",history:a.history,checkEditable:a.checkEditable,track:a.track,allowInvalid:a.allowInvalid,rowList:b}))return!1;!1!==a.refresh&&(1<b.length?this.refresh():this.refreshRow({rowIndx:b[0].rowIndx}))};m.getRecId=function(a){a.dataIndx=this.options.dataModel.recIndx;a=this.getCellData(a);return null==
a?null:a};m.getCellData=function(a){var e=a.rowData||this.getRowData(a);a=a.dataIndx;return e?e[a]:null};m.getRowData=function(a){if(!a)return null;var e=a.rowData;if(null!=e)return e;e=a.recId;if(null==e){var e=a.rowIndx,e=null!=e?e:a.rowIndxPage+this.rowIndxOffset,b=this.get_p_data()[e];return b}b=this.options.dataModel;a=b.recIndx;for(var c=b.data,l=0,d=c.length;l<d;l++)if(b=c[l],b[a]==e)return b;return null};m.deleteRow=function(a){for(var e=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage}],
b=[],c=0,l=e.length;c<l;c++){var d=this.normalize(e[c]);d.oldRow=d.rowData;d.type="delete";b.push(d)}if(!b.length)return!1;this._digestData({source:a.source||"delete",history:a.history,track:a.track,rowList:b});!1!==a.refresh&&this.refreshView()};m.addRow=function(a){var e=a.rowList||[{rowIndx:a.rowIndx,rowIndxPage:a.rowIndxPage,newRow:a.newRow||a.rowData}],b=[],c=this.options.dataModel,l=c.data;null==l&&(c.data=[],l=c.data);for(var c=0,d=e.length;c<d;c++){var g=this.normalize(e[c]);g.type="add";
b.push(g)}if(!b.length||!1===this._digestData({source:a.source||"add",history:a.history,track:a.track,checkEditable:a.checkEditable,rowList:b}))return!1;!1!==a.refresh&&this.refreshView();a=b[0].rowIndx;return null==a?l.length-1:a}})(jQuery);
(function(k){var m=function(a){this.focusSelection=null};m.prototype.inViewRow=function(a){var e=this.that,b=e.finalV;return a<e.options.freezeRows?!0:a>=e.initV&&a<=b};var g=function(a){this.that=a;this.options=a=a.options;this.selection=[];this.hclass=" pq-state-select "+(a.bootstrap.on?"":"ui-state-highlight")};k.paramquery.cRows=g;var c=function(a){var e=a.options;this.that=a;this.selection=[];this.hclass="pq-state-select "+(e.bootstrap.on?"":"ui-state-highlight")};k.paramquery.cCells=c;c=c.prototype=
new m;m=g.prototype=new m;m.isSelected=function(a){return(a=a.rowData||this.that.getRowData(a))?!0===a.pq_rowselect:null};m.selectRange=function(a){var e=a.range,b=e.r1,e=e.r2;a=a.evt;var c=[];if(b>e)var l=b,b=e,e=l;for(;b<=e;b++)c.push({rowIndx:b});this.add({rows:c,evt:a})};c.removeAll=function(a){var e=this.that;a=e.get_p_data();var b=this.hclass;if(a&&a.length)for(e.$tbl&&e.$tbl.children().children().children().removeClass(b),e=0,b=a.length;e<b;e++){var c=a[e];c&&delete c.pq_cellselect}};m.removeAll=
function(a){a=a||{};var e=this.that,b=a.all,c=this.hclass,l=e.get_p_data();if(l&&l.length)for(a.refresh&&e.$tbl&&e.$tbl.children().children().removeClass(c),l=b?l:e.pdata,a=0,e=l.length;a<e;a++)(b=l[a])&&delete b.pq_rowselect};c.isSelected=function(a){var e=this.that,b=a.rowData||e.getRowData(a),c=a.dataIndx;a=a.colIndx;if(null==a&&null==c||null==b)return null;c=null==c?e.colModel[a].dataIndx:c;return!0==(b.pq_cellselect&&b.pq_cellselect[c])};m.getSelection=function(){for(var a=this.that,e=a.selection().address(),
b=[],c=0,l=e.length;c<l;c++){var d=e[c];if("row"==d.type)for(var g=d.r2,d=d.r1;d<=g;d++){var n=a.getRowData({rowIndx:d});b.push({rowIndx:d,rowData:n})}}return b};c.getSelection=function(){for(var a=this.that,e=a.selection(),b=a.colModel,e=e.address(),c=[],l=0,d=e.length;l<d;l++){var g=e[l],n=g.type;if("block"==n||"cell"==n||"column"==n)for(var n=g.r2,h=g.c1,k=g.c2,g=g.r1;g<=n;g++)for(var m=a.getRowData({rowIndx:g}),r=h;r<=k;r++)c.push({rowIndx:g,rowData:m,colIndx:r,dataIndx:b[r].dataIndx})}return c};
c.inViewCell=function(a,e){var b=this.that,c=b.options.freezeCols;return this.inViewRow(a)?e<c||e>=b.initH&&e<=b.finalH:!1};c._add=function(a){var e=this.that;a=e.normalize(a);var b=a.rowIndxPage,c=a.rowData,l,d=a.colIndx,g=a.dataIndx,n=this.isSelected({rowData:c,dataIndx:g});if(null==n)return!1;var h=e.iMerge.ismergedCell(a.rowIndx,d)||this.inViewCell(b,d);!1===n&&(h&&(e=e.getCell({rowIndxPage:b,colIndx:d}))&&e.addClass(this.hclass),l=(c.pq_cellselect=c.pq_cellselect||{})[g]=!0);if(l)return a};m._add=
function(a){var e=this.that,b=e.normalize(a),c=b.rowIndxPage;a=b.rowData;var l=this.isSelected({rowData:a});b.rowIndxPage=c;if(null==l)return!1;b=this.inViewRow(c);!1===l&&(!a.pq_hidden&&b&&(e=e.getRow({rowIndxPage:c}),e.length&&e.addClass(this.hclass)),a.pq_rowselect=!0)};c.add=function(a){this._add(a)};m.add=function(a){var e=a.rows;if(e&&"function"==typeof e.push){a=0;for(var b=e.length;a<b;a++){var c=e[a];c.trigger=!1;this._add(c)}}else this._add(a)};m._remove=function(a){var e=this.that,b=e.normalize(a);
a=b.rowIndx;var c=b.rowIndxPage,l=b.rowData,b=b.$tr;if(this.isSelected({rowData:l}))return this.inViewRow(c)&&(b=e.getRow({rowIndxPage:c}))&&(b.removeClass(this.hclass),b.removeAttr("tabindex")),l.pq_rowselect=!1,{rowIndx:a,rowData:l}};m.remove=function(a){var e=a.rows;if(e&&"function"==typeof e.push){a=0;for(var b=e.length;a<b;a++){var c=e[a];c.trigger=!1;this._remove(c)}}else this._remove(a)};c.selectBlock=function(a){var e=this.that,b=this.hclass,c=a.range,l=c.r1,d=c.c1,g=c.r2,c=c.c2,n=e.initH,
h=e.finalH,p=e.options.freezeCols,m=[],r=e.colModel,s=[];a=a.remove?!0:!1;for(var u=d;u<=c;u++)m[u]=r[u].dataIndx;for(;l<=g;l++)if(r=e.normalize({rowIndx:l}),u=r.rowData,r=r.rowIndxPage,u){var t=u.pq_cellselect=u.pq_cellselect||{};if(this.inViewRow(r))for(u=d;u<=c;u++){var y=m[u];if(a&&t[y]||!a&&!t[y]){if(u<p||u>=n&&u<=h){var v=e.getCell({rowIndxPage:r,colIndx:u});v.length&&s.push(v[0])}t[y]=a?void 0:!0}}else for(u=d;u<=c;u++)y=m[u],t[y]=a?void 0:!0}if(s.length)k(s)[a?"removeClass":"addClass"](b)}})(jQuery);
(function(k){var m=!0;k(function(){var c=k("<input type='checkbox' style='position:fixed;left:-50px;top:-50px;'/>").appendTo(document.body);c[0].indeterminate=!0;c.on("change",function(){m=!1});c.click();c.remove()});var g=(k.paramquery.cCheckBoxColumn=function(c,a){var e=this;this.that=c;this.options=c.options;this.column=a;a.cb=k.extend({},{all:!1,header:!1,select:!1,check:!0,uncheck:!1},a.cb);a._render=function(b){var c=b.rowData;if(!c.pq_gtitle&&!c.pq_gsummary)return"<input type='checkbox' "+
(a.cb.check===b.cellData?"checked":"")+" />"};this.dataIndx=a.dataIndx;var b=c.element,f=c.eventNamespace;c.on("dataAvailable",function(){c.one("dataReady",function(){return e._onDataReady()})}).on("dataReady",function(){e.setValCBox()});b.on("change"+f,function(a){var b=a.target;if("checkbox"==b.type&&k(b).closest(".pq-grid")[0]==this)return e.onCheckBoxChange(a)});c.on("cellKeyDown",function(a,b){return e.onCellKeyDown(a,b)});c.on("refreshHeader",function(a,b){return e.refreshHeader(a,b)})}).prototype=
new k.paramquery.cClass;g.hasHeaderChkBox=function(){return this.column.cb.header};g.setValCBox=function(){if(this.hasHeaderChkBox()){var c=this.that,a=this.options,e=this.dataIndx,b=this.column.cb,f=b.all,l=c.rowIndxOffset,l="remote"!=a.pageModel.type&&f?0:l,a=f?a.dataModel.data:c.pdata,f=null,d=0,g=0;if(a){for(var n=0,h=0,k=a.length;h<k;h++){var m=a[h],r=h+l;c.isEditableRow({rowIndx:r})&&c.isEditableCell({rowIndx:r,dataIndx:e})&&(n++,m[e]===b.check?d++:g++)}d==n&&n?f=!0:g==n&&(f=!1);this.$inp&&
this.$inp.pqval({val:f})}}};g.onHeaderChange=function(c){for(var a=k(c.target),e=this.that,b=this.column,f=b.dataIndx,l=e.options,d=b.cb,g=d.all,n=g?l.dataModel.data:e.pdata,h=e.rowIndxOffset,h="remote"!=l.pageModel.type&&g?0:h,l=[],b={column:b,dataIndx:f,source:"header"},a=a[0].checked,g=0,p=n.length;g<p;g++){var m=g+h,r=n[g],s={},u={};s[f]=a?d.check:d.uncheck;u[f]=r[f];l.push({rowIndx:m,rowData:r,newRow:s,oldRow:u,type:"update"})}f={rowList:l,source:"checkbox"};f.history=f.track=d.select?!1:null;
b.check=a;b.rows=l;if(!1===e._trigger("beforeCheck",c,b)||!1===e._digestData(f))return e.refreshHeader(),!1;e.refresh({header:!1});l=b.rows=f.rowList;e._trigger("check",c,b);d.select&&e.selection({type:"row",method:a?"add":"remove",rows:l})};g.refreshHeader=function(c,a){var e=this;if(this.hasHeaderChkBox()){var b=this.that;if(b.pdata&&(b=b.getCellHeader({dataIndx:this.dataIndx}))){var f=this.$inp=b.find("input");this.setValCBox();if(m)f.on("click",function(a){null==f.data("pq_value")&&(f[0].checked=
!0,f.data("pq_value",!0),e.onHeaderChange(a))});f.on("change",function(a){e.onHeaderChange(a)})}}};g._onDataReady=function(){var c=this.that,a=this.options,e=a.dataModel.data,a="remote"==a.pageModel.type?c.rowIndxOffset:0,b=this.column,f=b.cb,l=b.dataIndx;if(null!=l&&e){for(var d=[],g=0,n=e.length;g<n;g++){var h=e[g];h[l]===f.check&&d.push({rowIndx:g+a,rowData:h})}if(!1!==c._trigger("check",null,{rows:d,column:b,dataIndx:l,source:"dataAvailable"})&&f.select){for(g=0;g<n;g++)h=e[g],h[l]===f.check&&
(h.pq_rowselect=!0);c.selection().refresh()}}this.setValCBox()};g.rowSelect=function(c,a){var e=this.that,b=a.rows,f=a.rowData,l=this.dataIndx;if(b)for(var d=0,g=b.length;d<g;d++){var f=b[d],n=f.rowIndx,f=f.rowData;f[l]=!0;e.refreshCell({rowIndx:n,dataIndx:l})}else f&&(f[l]=!0,n=a.rowIndx,e.refreshCell({rowIndx:n,dataIndx:l}));this.setValCBox()};g.rowUnSelect=function(c,a){var e=this.that,b=a.rows,f=a.rowData,l=this.dataIndx;if(b)for(var d=0,g=b.length;d<g;d++){var f=b[d],n=f.rowIndx,f=f.rowData;
f[l]=!1;e.refreshCell({rowIndx:n,dataIndx:l})}else f&&(f[l]=!1,n=a.rowIndx,e.refreshCell({rowIndx:n,dataIndx:l}));this.setValCBox()};g.onCheckBoxChange=function(c){var a=this.that,e=this.column.cb,b=k(c.target),f=b.closest(".pq-grid-cell");if(f.length){var f=a.getCellIndices({$td:f}),f=a.normalize(f),l=f.rowData,d=f.rowIndx,g=f.dataIndx;if(g==this.dataIndx){var b=b[0].checked,n={},h={};n[g]=b?e.check:e.uncheck;h[g]=l[g];l=[{rowData:l,rowIndx:d,oldRow:h,newRow:n,type:"update"}];f.check=b;f.rows=l;
if(!1===a._trigger("beforeCheck",c,f))return a.refreshCell({rowIndx:d,dataIndx:g}),!1;l={source:"checkbox",rowList:l};l.history=l.track=e.select?!1:null;if(!1===a._digestData(l))return a.refreshCell({rowIndx:d,dataIndx:g}),!1;a.refreshRow({rowIndx:d});l=f.rows=l.rowList;a._trigger("check",c,f);e.select&&a.selection({type:"row",method:b?"add":"remove",rows:l});this.setValCBox()}}};g.onCellKeyDown=function(c,a){if(a.dataIndx==this.dataIndx&&(13==c.keyCode||32==c.keyCode))return k(c.originalEvent.target).find("input").click(),
!1}})(jQuery);
(function(){for(var k=0,m=["moz","webkit"],g=0;!window.requestAnimationFrame&&g<m.length;g++)window.requestAnimationFrame=window[m[g]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[m[g]+"CancelAnimationFrame"]||window[m[g]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c){var a=(new Date).getTime(),a=Math.max(0,16-(a-k));return window.setTimeout(function(){k=(new Date).getTime();c()},a)});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(c){clearTimeout(c)})})();
(function(k){function m(c){this.that=c;var a=this;this.borderBottomExtra=this.borderBottom=this.borderLeftExtra=this.borderLeft=this.borderTopExtra=this.borderTop=this.borderRightExtra=this.borderRight=this.scrollLeft=this.scrollTop=0;this.maxBorder=5E3;this.rowht=c.options.rowHeight;this.colwd=60;c.on("contMouseDown",function(c,b){return a._onContMouseDown(c,b)}).on("mouseDrag",function(c,b){return a._onMouseDrag(c,b)}).on("mouseStop",function(c,b){return a._onMouseStop(c,b)}).on("mousePQUp",function(c,
b){return a._onMousePQUp(c,b)}).on("rowMouseDown",function(c,b){return a._onRowMouseDown(c,b)}).on("cellMouseDown",function(c,b){return a._onCellMouseDown(c,b)}).on("refresh",function(a,b){setTimeout(function(){c.element&&c.focus()},0)}).on("cellMouseEnter",function(c,b){return a._onCellMouseEnter(c,b)}).on("rowMouseEnter",function(c,b){return a._onRowMouseEnter(c,b)})}k.paramquery.cMouseSelection=m;var g=m.prototype=new k.paramquery.cClass;g.inViewPort=function(c){var a=this.that.iRefresh,e=a.getEContHt(),
a=a.getEContWd()+1;c=c[0];var b=this.scrollLeft;if(e>=c.offsetTop+c.offsetHeight+this.marginTop)if("TD"==c.nodeName.toUpperCase()){if(a>=c.offsetLeft+c.offsetWidth+b)return!0}else return!0};g._onCellMouseDown=function(c,a){var e=this.that,b=a.rowIndx,f=e.iSelection,l=a.colIndx,d=e.options.selectionModel,g=d.mode;if("cell"!=d.type)e.focus(a);else if(null!=l)return f=f.address()[0],c.shiftKey&&"single"!=g&&f?(g=f.firstR,f=f.firstC,e.range({r1:g,c1:f,r2:b,c2:l,firstR:g,firstC:f}).select()):(this.mousedown=
{r1:b,c1:l},e.range({r1:b,c1:l,firstR:b,firstC:l}).select()),e.focus(a),!0};g._onCellMouseEnter=function(c,a){var e=this.that,b=e.options.selectionModel,f=b.type,b=b.mode;if(this.mousedown&&"single"!=b){if("cell"==f){var f=this.mousedown,b=f.r1,l=f.c1,d=a.rowIndx,g=a.colIndx;if(b==d&&l==g||f.r2==d&&f.c2==g)return;this.mousedown.r2=d;this.mousedown.c2=g;e.scrollCell({rowIndx:d,colIndx:g});e.range({r1:b,c1:l,r2:d,c2:g,firstR:b,firstC:l}).select()}e.focus(a)}};g._onRowMouseEnter=function(c,a){var e=
this.that,b=e.options.selectionModel,f=b.mode;"row"==b.type&&this.mousedown&&"single"!=f&&(b=this.mousedown.r1,f=a.rowIndx,b==f?e.range({r1:b,firstR:b},!1).select():this.mousedown.r2!=f&&(this.mousedown.r2=f,e.scrollRow({rowIndx:f}),e.range({r1:b,r2:f,firstR:b},!1).select()))};g._onRowMouseDown=function(c,a){var e=this.that,b=a.rowIndx,f=e.iSelection,l=e.options.selectionModel,d=0<=c.originalEvent.target.className.indexOf("pq-grid-number-cell"),g=l.mode;if(("row"==l.type||l.row&&d)&&null!=b)return l=
e.iSelection.address(),c.shiftKey?((f=l.length)&&"row"==l[f-1].type&&(f=l[f-1],f.r1=f.firstR,f.r2=b,f.c1=f.c2=f.type=void 0),e.range(l).select()):(c.ctrlKey||c.metaKey)&&"single"!=g?f.add({r1:b,firstR:b}):(this.mousedown={r1:b,y1:c.pageY,x1:c.pageX},e.range({r1:b,firstR:b},!1).select()),d&&setTimeout(function(){e.focus({rowIndxPage:a.rowIndxPage,colIndx:e.getFirstVisibleCI(!0)})},0),!0};g._onContMouseDown=function(c,a){this.that.options.swipeModel.on&&(this._stopSwipe(!0),this.swipedown={x:c.pageX,
y:c.pageY});return!0};g._onMousePQUp=function(c,a){this.mousedown=null};g._stopSwipe=function(c){c&&(this.swipedownPrev=this.swipedown=null);window.clearInterval(this.intID);window.cancelAnimationFrame(this.intID);this.intID=null};g._onMouseStop=function(c,a){var e=this,b=this.that;if(this.swipedownPrev){var f=b.options.swipeModel,b=this.swipedownPrev,l=b.ts,d=(new Date).getTime()-l,g=c.pageX,n=c.pageY,h=g-b.x,k=n-b.y;if(Math.sqrt(h*h+k*k)/d>f.ratio){var m=0,r=f.repeat;e._stopSwipe();var s=function(){m+=
f.speed;r--;e._onMouseDrag({pageX:g+m*h/d,pageY:n+m*k/d});0<r?e.intID=window.requestAnimationFrame(s):e._stopSwipe(!0)};s()}else e.swipedown=null,e.swipedownPrev=null}};g._onMouseDrag=function(c,a){var e=this.that.options;if(this.swipedown){var b=this.swipedown,f=b.x,l=b.y,d=c.pageX,g=c.pageY;this.swipedownPrev={x:f,y:l,ts:(new Date).getTime()};var n=e.scrollModel.smooth;if(!e.virtualY||n)this.scrollVertSmooth(l,g),this.syncScrollBarVert();if(!e.virtualX||n)this.scrollHorSmooth(f,d),this.syncScrollBarHor();
b.x=d;b.y=g}return!0};g.updateTableY=function(c){if(0==c)return!1;var a=this.that,e=this.getTableForVertScroll(),a=a.iRefresh.getEContHt();if(!e||!e.length)return!1;var b=e.data("offsetHeight")-1,f=this.scrollTop-c;this.setScrollTop(0>f?0:0>c&&0<a-b+f?b-a:f,e,a);return!0};g.setScrollTop=function(c,a,e){0<=c&&(this.scrollTop=c=Math.round(c),a.parent("div").scrollTop(c))};g.getScrollLeft=function(c){return this.scrollLeft};g.getScrollTop=function(c){return this.scrollTop};g.setScrollLeft=function(c,
a,e,b){0<=c&&(this.scrollLeft=c=Math.round(c),e=e?e.parent():k(),e=e.add(a?a.parent("div"):k()),e.scrollLeft(c))};g.scrollVertSmooth=function(c,a){c!=a&&this.updateTableY(a-c)};g.scrollHorSmooth=function(c,a){if(c!=a){var e=this.that,b=e.options,f=a-c,l=this.getTableForHorScroll(),d=this.getTableHeaderForHorScroll(),e=e.iRefresh.getEContWd();if(l||d){var g=l?l:d,b=b.virtualX?this.getScrollWidth(g):g.data("scrollWidth"),f=this.scrollLeft-f;this.setScrollLeft(0>f?0:0>b-e-f?b-e:f,l,d,e)}}};g.syncViewWithScrollBarVert=
function(c){if(null!=c){var a=this.that,e=this.getTableForVertScroll();if(e&&e.length){a.options.editModel.indices&&a.blurEditor({force:!0});var b=e.data("offsetHeight"),a=a.iRefresh.getEContHt();if((c*=b-a)||0===c)0>c&&(c=0),this.setScrollTop(c,e,a)}}};g.syncViewWithScrollBarHor=function(c){if(null!=c){var a=this.that,e=this.getTableForHorScroll(),b=this.getTableHeaderForHorScroll();if(e||b){var f=a.options;f.editModel.indices&&a.blurEditor({force:!0});var l=e?e:b,f=f.virtualX?this.getScrollWidth(l):
l.data("scrollWidth"),a=a.iRefresh.getEContWd();c*=f-a;f&&a&&(0>c&&(c=0),this.setScrollLeft(c,e,b,a))}}};g.resetMargins=function(){this.scrollTop=this.scrollLeft=0};g.syncHeaderViewWithScrollBarHor=function(c){if(null!=c){var a=this.that,e=this.getTableHeaderForHorScroll();if(e){var b=a.options,f=b.freezeCols;b.editModel.indices&&a.blurEditor({force:!0});var b=e.data("scrollWidth"),l=a.iRefresh.getEContWd();c=a.calcWidthCols(f,c+f);b&&l&&(0>c&&(c=0),e.css("marginLeft",-c))}}};g.syncScrollBarVert=
function(){var c=this.that,a=this.getTableForVertScroll();if(a&&a.length){var a=a.data("offsetHeight"),e=c.iRefresh.getEContHt(),a=this.scrollTop/(a-e);0<=a&&1>=a&&c.vscroll.widget().hasClass("pq-sb-vert")&&c.vscroll.option("ratio",a)}};g.syncScrollBarHor=function(){var c=this.that,a=c.options,e=this.getTableForHorScroll(),b=this.getTableHeaderForHorScroll();if(e||b)e=e?e:b,a=a.virtualX?this.getScrollWidth(e):e.data("scrollWidth"),e=c.iRefresh.getEContWd(),a=this.scrollLeft/(a-e),0<=a&&1>=a&&c.hscroll.widget().hasClass("pq-sb-horiz")&&
c.hscroll.option("ratio",a)};g.getTableForVertScroll=function(){var c=this.that,a=c.pqpanes;if((c=c.$tbl)&&c.length)return a.h&&a.v?c=k([c[2],c[3]]):a.v?c=k([c[0],c[1]]):a.h&&(c=k(c[1])),c};g.getTableForHorScroll=function(){var c=this.that,a=c.pqpanes,e=[],b=c.$tbl;if(b&&b.length)return a.h&&a.v?e.push(b[1],b[3]):a.v?e.push(b[1]):a.h?e.push(b[0],b[1]):e.push(b[0]),c.tables.length&&(c=c.tables[0].$tbl,a.v?e.push(c[1]):e.push(c[0])),k(e)};g.getTableHeaderForHorScroll=function(){var c=this.that,a=c.pqpanes;
if((c=c.$tbl_header)&&c.length)return c=a.vH?k(c[1]):k(c[0]),c.parent()};g.scrollRowNonVirtual=function(c){var a=this.that,e=a.options,b=c.rowIndxPage,f=c.rowIndx;c=a.iRefresh.getEContHt();b=null==b?f-a.rowIndxOffset:b;e=parseInt(e.freezeRows);if(!(b<e)){var e=a.get$Tbl(b),l=a.getRow({rowIndxPage:b})[0];l&&(a=e[0].offsetTop+1,b=l.offsetHeight,f=this.getScrollTop(),l=l.offsetTop-1,0>a+l-f?(a=a+l+-1,this.setScrollTop(0>a?0:a,e,c),this.syncScrollBarVert()):l+b-f>c&&(this.setScrollTop(b+l-c,e,c),this.syncScrollBarVert()))}};
g.scrollColumnNonVirtual=function(c){var a=this.that,e=c.colIndx,e=null==e?a.getColIndx({dataIndx:c.dataIndx}):e,b=a.options.freezeCols;if(!(e<b)){c=a._calcRightEdgeCol(e).width;var e=a._calcRightEdgeCol(e-1).width,b=a._calcRightEdgeCol(b-1).width,f=this.getTableForHorScroll(),l=this.getTableHeaderForHorScroll(),a=a.iRefresh.getEContWd(),d=this.scrollLeft;c-d>a?(this.setScrollLeft(c-a,f,l,a),this.syncScrollBarHor()):e-b<d&&(this.setScrollLeft(e-b,f,l,a),this.syncScrollBarHor())}}})(jQuery);
(function(k){var m=null,g=!1,c="",a=k.paramquery.pqGrid.prototype,e=a.options,b={on:!0,header:!0,zIndex:1E4},f={on:!0},l={on:!0,compare:"byVal",select:!0,validate:!0,allowInvalid:!0,type:"replace"};e.pasteModel=e.pasteModel||l;e.copyModel=e.copyModel||b;e.cutModel=e.cutModel||f;a._setGlobalStr=function(a){c=a};a.canPaste=function(){return c?!0:!1};a.copy=function(){m=new d(this);m.copy();m=null};a.paste=function(a){m=new d(this);m.paste(a);m=null};a.cut=function(){m=new d(this);m.copy({cut:!0,source:"cut"});
m=null};a.clear=function(){this.iSelection.clear()};var d=function(a,b){this.that=a},a=d.prototype;a.createClipBoard=function(){var a=k("#pq-grid-excel-div"),a=this.that.options.copyModel,b=k("#pq-grid-excel");0==b.length&&(a=k("<div id='pq-grid-excel-div'  style='position:fixed;top:20px;left:20px;height:1px;width:1px;overflow:hidden;z-index:"+a.zIndex+";'/>").appendTo(document.body),b=k("<textarea id='pq-grid-excel' autocomplete='off' spellcheck='false' style='overflow:hidden;height:10000px;width:10000px;opacity:0' />").appendTo(a),
b.css({opacity:0}));b.select()};a.destroyClipBoard=function(){this.clearClipBoard();var a=this.that,b=k(window).scrollTop(),c=k(window).scrollLeft();a.focus();var a=k(window).scrollTop(),e=k(window).scrollLeft();b==a&&c==e||window.scrollTo(c,b)};a.clearClipBoard=function(){k("#pq-grid-excel").val("")};a.copy=function(a){return this.that.iSelection.copy(a)};a.paste=function(a){a=a||{};var b=this.that,e=a.dest,d=a.clip,f=d?d.length?d.val():"":c,f=f.replace(/\n$/,""),d=f.split("\n"),l=d.length,g,q=b.colModel,
m=b.readCell,v=b.options.pasteModel,z="row",C=!1,B=q.length;if(v.on&&0!=f.length&&0!=l){f={rows:d};if(!1===b._trigger("beforePaste",null,f))return!1;var w=v.type,x,D,E,z=(e?b.range(e):b.selection())._areas;(E=z.length?z[0]:null)&&b.getRowData({rowIndx:E.r1})?(z="row"==E.type?"row":"cell",x=E.r1,D=E.r2,e=E.c1,E=E.c2):(z="cell",E=e=D=x=0);var F,H;"replace"==w?(F=x,H=D-x+1<l?"extend":"repeat"):"append"==w?(F=D+1,H="extend"):"prepend"==w&&(F=x,H="extend");var I,l="extend"==H?l:D-x+1,P;x=0;a=a.rowList||
[];for(var L=D=0;L<l;L++){var O=d[x],N=L+F,K="replace"==w?b.getRowData({rowIndx:N}):null,M=K?{}:null,G={};void 0===O&&"repeat"===H&&(x=0,O=d[x]);x++;var J=O.split("\t");if(!g)if("cell"==z){g=J.length;I=E-e+1<J.length?"extend":"repeat";g="extend"==I?g:E-e+1;if(isNaN(g))throw"lenH NaN. assert failed.";g+e>B&&(g=B-e)}else g=B,e=0;var T=0,Q=0,O=0;P=g;for(var W=J.length,Q=0;Q<P;Q++){T>=W&&(T=0);var R=q[Q+e],X=J[T],U=R.dataIndx;!1===R.copy?(O++,"extend"==I&&P+e<B&&P++):(T++,G[U]=X,M&&(M[U]=m(K,R)))}!1==
k.isEmptyObject(G)&&(J="update",null==K&&(C=!0,J="add"),a.push({newRow:G,rowIndx:N,rowData:K,oldRow:M,type:J}),D++)}b._digestData({rowList:a,source:"paste",allowInvalid:v.allowInvalid,validate:v.validate});b[C?"refreshView":"refresh"]();v.select&&("cell"==z?b.range({r1:F,c1:e,r2:F+D-1,c2:"extend"==I?e+g-1+O:E}).select():b.range({r1:F,r2:F+D-1}).select());b._trigger("paste",null,f)}};k(document).unbind(".pqExcel").bind("keydown.pqExcel",function(a){if(a.ctrlKey||a.metaKey){var b=k(a.target);if(b.hasClass("pq-grid-row")||
b.hasClass("pq-grid-cell")||b.is("#pq-grid-excel")||b.hasClass("pq-grid-cont")){var c=b.closest(".pq-grid");if(m||b.length&&c.length){if(!m){try{var e=c.pqGrid("getInstance").grid;if(e.option("selectionModel.native"))return!0}catch(f){return!0}m=new d(e,b);m.createClipBoard()}"67"==a.keyCode||"99"==a.keyCode?m.copy({clip:k("#pq-grid-excel")}):"88"==a.keyCode?m.copy({cut:!0,clip:k("#pq-grid-excel")}):"86"==a.keyCode||"118"==a.keyCode?(g=!0,m.clearClipBoard(),window.setTimeout(function(){m&&(m.paste({clip:k("#pq-grid-excel")}),
m.destroyClipBoard(),m=null);g=!1},0)):(b=k("#pq-grid-excel"),b.length&&document.activeElement==b[0]&&m.that._onKeyPressDown(a))}}}else if(b=a.keyCode,c=k.ui.keyCode,b==c.UP||b==c.DOWN||b==c.LEFT||b==c.RIGHT||b==c.PAGE_UP||b==c.PAGE_DOWN){if(q)return!1;b=k(a.target);if(b.hasClass("pq-grid-row")||b.hasClass("pq-grid-cell"))q=!0}}).bind("keyup.pqExcel",function(a){var b=a.keyCode;g||!m||a.ctrlKey||a.metaKey||-1==k.inArray(b,[17,91,93,224])||(m.destroyClipBoard(),m=null);q&&(a=k(a.target),a.hasClass("pq-grid-row")||
a.hasClass("pq-grid-cell")||(q=!1))});var q=!1})(jQuery);
(function(k){var m=k.paramquery.pqGrid.prototype.options,g={on:!0,checkEditable:!0,checkEditableAdd:!1,allowInvalid:!0};m.historyModel=m.historyModel||g;m=(k.paramquery.cHistory=function(c){var a=this;this.that=c;this.options=c.options;this.records=[];this.id=this.counter=0;c.on("keyDown",function(c,b){return a._onKeyDown(c,b)}).on("dataAvailable",function(c,b){"filter"!=b.source&&a.reset()})}).prototype=new k.paramquery.cClass;m._onKeyDown=function(c,a){var e=c.ctrlKey||c.metaKey;if(e&&"90"==c.keyCode)return this.undo(),
!1;if(e&&"89"==c.keyCode)return this.redo(),!1};m.resetUndo=function(){if(0==this.counter)return!1;this.counter=0;this.that._trigger("history",null,{type:"resetUndo",num_undo:0,num_redo:this.records.length-this.counter,canUndo:!1,canRedo:!0})};m.reset=function(){if(0==this.counter&&0==this.records.length)return!1;this.records=[];this.id=this.counter=0;this.that._trigger("history",null,{num_undo:0,num_redo:0,type:"reset",canUndo:!1,canRedo:!1})};m.increment=function(){var c=this.records,a=c.length;
this.id=a?c[a-1].id+1:0};m.push=function(c){var a=this.canRedo(),e=this.records,b=this.counter;e.length>b&&e.splice(b,e.length-b);e[b]=k.extend({id:this.id},c);this.counter++;c=this.that;var f,l;1==this.counter&&(f=!0);a&&this.counter==e.length&&(l=!1);c._trigger("history",null,{type:"add",canUndo:f,canRedo:l,num_undo:this.counter,num_redo:0})};m.canUndo=function(){return 0<this.counter?!0:!1};m.canRedo=function(){return this.counter<this.records.length?!0:!1};m.processCol=function(c,a){var e=this.that;
if(c.length){var b="add"==c.type;e[(a?b:!b)?"addColumn":"deleteColumn"]({colList:c,history:!1})}};m.undo=function(){var c=this.canRedo(),a=this.that,e=!1,b=this.options.historyModel,f=this.records;if(0<this.counter)this.counter--;else return!1;for(var l=f[this.counter],f=(f=l.rowList)?f:[],l=(l=l.colList)?l:[],d=[],g=0,k=f.length;g<k;g++){var h=f[g],p=h.newRow,m=h.rowData,r=h.type,s=h.oldRow,h=h.rowIndx;"update"==r?(h=a.getRowIndx({rowData:m}).rowIndx,d.push({type:r,rowIndx:h,rowData:m,oldRow:p,newRow:s})):
"add"==r?(e=!0,d.push({type:"delete",rowData:p})):"delete"==r&&(e=!0,d.push({type:"add",rowIndx:h,newRow:m}))}l.length?this.processCol(l):(a._digestData({history:!1,source:"undo",checkEditable:b.checkEditable,checkEditableAdd:b.checkEditableAdd,allowInvalid:b.allowInvalid,rowList:d}),a[e?"refreshView":"refresh"]({source:"undo"}));var u,t;!1===c&&(u=!0);0==this.counter&&(t=!1);a._trigger("history",null,{canUndo:t,canRedo:u,type:"undo",num_undo:this.counter,num_redo:this.records.length-this.counter});
return!0};m.redo=function(){var c=this.canUndo(),a=this.that,e=this.options.historyModel,b=this.counter,f=this.records;if(b==f.length)return!1;for(var l=!1,d=f[b],b=(b=d.rowList)?b:[],d=(d=d.colList)?d:[],g=[],k=0,h=b.length;k<h;k++){var p=b[k],m=p.newRow,r=p.rowData,s=p.type,u=p.oldRow,p=p.rowIndx;"update"==s?(p=a.getRowIndx({rowData:r}).rowIndx,g.push({type:s,rowIndx:p,rowData:r,oldRow:u,newRow:m})):"add"==s?(l=!0,g.push({type:"add",rowIndx:p,newRow:m})):"delete"==s&&(l=!0,g.push({type:"delete",
rowData:r}))}d.length?this.processCol(d,!0):(a._digestData({history:!1,source:"redo",checkEditable:e.checkEditable,checkEditableAdd:e.checkEditableAdd,allowInvalid:e.allowInvalid,rowList:g}),a[l?"refreshView":"refresh"]({source:"redo"}));this.counter<f.length&&this.counter++;var t,y;!1==c&&(t=!0);this.counter==this.records.length&&(y=!1);a._trigger("history",null,{canUndo:t,canRedo:y,type:"redo",num_undo:this.counter,num_redo:this.records.length-this.counter});return!0};k.paramquery.pqGrid.prototype.history=
function(c){return this.iHistory[c.method](c)}})(jQuery);
(function(k){var m=k.paramquery;m.filter=function(){var a={begin:{text:"Begins With",TR:!0,string:!0},between:{text:"Between",TR:!0,string:!0,date:!0,number:!0},notbegin:{text:"Does not begin with",TR:!0,string:!0},contain:{text:"Contains",TR:!0,string:!0},notcontain:{text:"Does not contain",TR:!0,string:!0},equal:{text:"Equal To",TR:!0,string:!0,bool:!0},notequal:{text:"Not Equal To",TR:!0,string:!0},empty:{text:"Empty",TR:!1,string:!0,bool:!0},notempty:{text:"Not Empty",TR:!1,string:!0,bool:!0},
end:{text:"Ends With",TR:!0,string:!0},notend:{text:"Does not end with",TR:!0,string:!0},less:{text:"Less Than",TR:!0,number:!0,date:!0},lte:{text:"Less than or equal",TR:!0,number:!0,date:!0},range:{TR:!0,string:!0,number:!0,date:!0},regexp:{TR:!0,string:!0,number:!0,date:!0},great:{text:"Great Than",TR:!0,number:!0,date:!0},gte:{text:"Greater than or equal",TR:!0,number:!0,date:!0}};return{conditions:a,getAllConditions:function(){var c=[],b;for(b in a)c.push(b);return c}(),getConditions:function(c){var b=
[],f;for(f in a)a[f][c]&&b.push(f);return b},getTRConditions:function(){var c=[],b;for(b in a)a[b].TR&&c.push(b);return c}(),getWTRConditions:function(){var c=[],b;for(b in a)a[b].TR||c.push(b);return c}()}}();m.filter.rules={};m.filter.rules.en={begin:"Begins With",between:"Between",notbegin:"Does not begin with",contain:"Contains",notcontain:"Does not contain",equal:"Equal To",notequal:"Not Equal To",empty:"Empty",notempty:"Not Empty",end:"Ends With",notend:"Does not end with",less:"Less Than",
lte:"Less than or equal",great:"Great Than",gte:"Greater than or equal"};var g=function(a){this.that=a;a.on("load",function(){var c=a.options.dataModel.dataUF;c&&(c.length=0)})};m.cFilterData=g;var c=g.prototype;g.conditions={equal:function(a,c){if(a==c)return!0},contain:function(a,c){if(-1!=a.indexOf(c))return!0},notcontain:function(a,c){if(-1==a.indexOf(c))return!0},empty:function(a){if(0==a.length)return!0},notempty:function(a){if(0<a.length)return!0},begin:function(a,c){if(0==(a+"").indexOf(c))return!0},
notbegin:function(a,c){if(0!=a.indexOf(c))return!0},end:function(a,c){var b=a.lastIndexOf(c);if(-1!=b&&b+c.length==a.length)return!0},notend:function(a,c){var b=a.lastIndexOf(c);if(-1==b||b+c.length!=a.length)return!0},regexp:function(a,c){if(c.test(a))return c.lastIndex=0,!0},notequal:function(a,c){if(a!=c)return!0},great:function(a,c){if(a>c)return!0},gte:function(a,c){if(a>=c)return!0},between:function(a,c,b){if(a>=c&&a<=b)return!0},range:function(a,c){if(-1!=k.inArray(a,c))return!0},less:function(a,
c){if(a<c)return!0},lte:function(a,c){if(a<=c)return!0}};g.convert=function(a,c){a=null==a?"":a;"string"==c?a=k.trim(a).toUpperCase():"date"==c?a=Date.parse(a):"integer"==c?a=parseInt(a):"float"==c?a=parseFloat(a):"bool"==c&&(a=String(a).toLowerCase());return a};c.isMatchCellSingle=function(a,c){var b=a.dataType,f=a.value,l=a.value2,d=a.cbFn,k=c[a.dataIndx],k="regexp"==a.condition?null==k?"":k:g.convert(k,b);return d(k,f,l)?!0:!1};c.isMatchRow=function(a,c,b){if(0==c.length)return!0;for(var f=0;f<
c.length;f++){var l=this.isMatchCell(c[f],a);if("OR"==b&&l)return!0;if("AND"==b&&!l)return!1}if("AND"==b)return!0;if("OR"==b)return!1};c.getQueryStringFilter=function(){var a=this.that,c=a.options,b=c.stringify,c=c.filterModel,f=c.mode,a=this.getFilterData({CM:a.colModel,location:"remote"}),l="";c&&c.on&&a&&(a.length?(c={mode:f,data:a},l=!1===b?c:JSON.stringify(c)):l="");return l};c.filterLocalData=function(a){a=a||{};var c=this.that,b=a.apply;a=this.getFilterData({CM:!1===b?a.CM:c.colModel});var f=
c.options,l=f.dataModel,d=c.iSort,g=l.data,k=l.dataUF,f=f.filterModel,h=f.multiple,p=f?f.mode:null;g||(g=l.data=[]);k||(k=l.dataUF=[]);!1===b&&(g=g.slice());if(k.length){for(var m=0,r=k.length;m<r;m++)g.push(k[m]);0==d.readSorter().length&&d.sortLocalData(g);k=l.dataUF=[]}else if(a.length)d.saveOrder();else return{data:g,dataUF:k};this.isMatchCell=h?this.isMatchCellMultiple:this.isMatchCellSingle;if(f.on&&p&&a&&a.length&&g.length)for(m=g.length-1;0<=m;m--)this.isMatchRow(g[m],a,p)||k.push(g.splice(m,
1)[0]);!1!==b&&(c._queueATriggers.filter={ui:{type:"local",filter:a}});return{data:g,dataUF:k}};c.getFilterData=function(a){var c=a.CM;if(!c)throw"CM N/A";var b=c.length,f=a.location;a=this.that.options.filterModel.multiple;for(var g=m.filter.getAllConditions,d=m.filter.getTRConditions,q=[],n=m.cFilterData,h=function(a,b,c){return"function"==typeof a?!0:"between"==a?null!=b&&""!==b||null!=c&&""!==c?!0:!1:-1!=k.inArray(a,g)?null!=b&&""!==b||-1==k.inArray(a,d)?!0:!1:!0},p=function(a,b){return"remote"==
f?(null==a?"":a).toString():n.convert(a,b)},A=0;A<b;A++){var r=c[A],s=r.dataIndx,u=r.dataType,u=u&&"function"!=typeof u?u:"string",t=r.filter;if(a){if((t=r.filterModel)&&t.on){for(var y=[],v=t.mode,z=t.filters,r=0;r<z.length;r++){var t=z[r],C=t.value,B=t.condition;h(B,C)&&(C=p(C,u),y.push({value:C,condition:B}))}q.push({dataIndx:s,mode:v,dataType:u,filters:y})}}else if(t&&t.on&&(C=t.value,y=t.value2,B=t.condition,h(B,C,y))){if("between"==B)""===C||null==C?(B="lte",C=p(y,u)):""===y||null==y?(B="gte",
C=p(C,u)):(C=p(C,u),y=p(y,u));else if("regexp"==B)if("remote"==f)C=C.toString();else{if("string"==typeof C)try{var w=t.modifiers,w=w?w:"gi",C=new RegExp(C,w)}catch(x){C=/.*/}}else if("range"==B)if(null==C)continue;else if("string"==typeof C)C=p(C,u),C=C.split(/\s*,\s*/);else{if(C&&"function"==typeof C.push){if(0==C.length)continue;C=C.slice();r=0;for(t=C.length;r<t;r++)C[r]=p(C[r],u)}}else C=p(C,u);q.push({dataIndx:s,value:C,value2:y,condition:B,dataType:u,cbFn:"remote"==f?"":"function"==typeof B?
B:n.conditions[B]})}}return q}})(jQuery);
(function(k){k=(k.paramquery.cSort=function(g){this.that=g;this.sorters=[];this.tmpPrefix="pq_tmp_";this.cancel=!1}).prototype;k.cancelSort=function(){this.cancel=!0};k.resumeSort=function(){this.cancel=!1};k.readSorter=function(){var g=this.that,c=g.options,a=c.groupModel,e,g=g.columns,b=0,f,l,d=[];if(a.on)for(e=a.dataIndx,f=e.length,l=a.dir;b<f;b++)a=e[b],d.push({dataIndx:a,dir:l[b]?l[b]:"up"});e=c.sortModel;c=e.sorter;e=e.single;if(c&&(f=c.length)){for(;f--;)null==g[c[f].dataIndx]&&c.splice(f,
1);e&&c.length&&(c=[c[0]]);d=d.concat(c)}return d=pq.arrayUnique(d,"dataIndx")};k.setSingle=function(g){this.single=g};k.getSingle=function(){return this.single};k.readSingle=function(){return this.that.options.sortModel.single};k.writeSingle=function(g){this.that.options.sortModel.single=g};k.setCancel=function(g){this.cancel=g};k.getCancel=function(){return this.cancel};k.readCancel=function(){return this.that.options.sortModel.cancel};k.writeCancel=function(g){this.that.options.sortModel.cancel=
g};k.writeSorter=function(g){var c=this.that.options,a=c.sortModel,e=c.groupModel,c=e.dataIndx,b=e.dir;if(e.on){for(e=0;e<c.length;e++){var f=g[e];if(c[e]!=f.dataIndx)throw"gDataIndx!=sorter.dataIndx";b[e]=f.dir}g.splice(0,c.length)}a.sorter=g};k.refreshSorter=function(g){g=g||{};var c=g.sorter,a=c[0].dataIndx,e=c[0].dir,b=g.single,c=g.cancel,f=this.that.options.groupModel,l=f.dataIndx,d=f.on?l.length:0,k=-1;g=this.readSorter();if(null==b)throw"sort single N/A";if(f.on)for(f=0;f<d;f++)l[f]==a&&(k=
f);-1<k?g[k].dir="up"===g[k].dir?"down":"up":null!=a&&(b?g[d]&&g[d].dataIndx==a?(a=g[d].dir,a="up"===a?"down":c&&"down"===a?"":"up",""===a?g.length--:g[d].dir=a):g[d]={dataIndx:a,dir:e?e:"up"}:(d=this.inSorters(g,a),-1<d?(a=g[d].dir,"up"==a?g[d].dir="down":c&&"down"==a?g.splice(d,1):1==g.length?g[d].dir="up":g.splice(d,1)):g.push({dataIndx:a,dir:"up"})));return g};k.saveOrder=function(g){var c=this.that.options.dataModel;g=c.data;if(!(!g||!g.length||c.dataUF&&c.dataUF.length||this.getSorter().length&&
null!=g[0].pq_order))for(var c=0,a=g.length;c<a;c++)g[c].pq_order=c};k.getQueryStringSort=function(){if(this.cancel)return"";var g=this.sorters,c=this.that.options.stringify;return g.length?!1===c?g:JSON.stringify(g):""};k.getSorter=function(){return this.sorters};k.setSorter=function(g){this.sorters=g.slice(0)};k.inSorters=function(g,c){for(var a=-1,e=0;e<g.length;e++)if(g[e].dataIndx==c){a=e;break}return a};k.sortLocalData=function(g){for(var c=this.that,a=c.colModel,e=this.sorters,b=0;b<e.length;b++){var f=
e[b],l=c.getColIndx({dataIndx:f.dataIndx}),l=a[l],d=l.sortType;f.dataType=l.dataType;f.sortType=d}e.length||(e=[{dataIndx:"pq_order",dir:"up",dataType:"integer"}]);return this._sortLocalData(e,g)};k._sortLocalData=function(g,c){if(null==c)return[];if(0==c.length||!g||!g.length)return c;var a=this,e=a.tmpPrefix,b=a.that.options.sortModel,f=b.useCache,l=b.ignoreCase;(function(){for(var b=[],k=[],n=[],h=g.length,p=0;p<h;p++){var A=g[p],r=A.dataIndx,s="up"==A.dir?1:-1,u=A.sortType,A=(A=A.dataType)?A:
"string",A="string"==A&&l?"stringi":A,t=f&&"date"==A,y=t?e+r:r;k[p]=y;n[p]=s;b[p]=u?function(a,b){return function(c,d,e,f){return b(c,d,e,f,a)}}(u,m.sort_sortType):"integer"==A?m.sort_number:"float"==A?m.sort_number:"function"==typeof A?function(a,b){return function(c,d,e,f){return b(c,d,e,f,a)}}(A,m.sort_dataType):"date"==A?m["sort_date"+(t?"_fast":"")]:"bool"==A?m.sort_bool:"stringi"==A?m.sort_locale:m.sort_string;t&&a.useCache(c,A,r,y)}c=c.sort(function(a,c){for(var e=0,f=0;f<h&&(e=b[f](a,c,k[f],
n[f]),0==e);f++);return e});t&&setTimeout(a.removeCache(g,c),0)})();return c};k.useCache=function(g,c,a,e){c=m["get_"+c];for(var b=g.length;b--;){var f=g[b];f[e]=c(f[a])}};k.removeCache=function(g,c){var a=this.tmpPrefix;return function(){for(var e=g.length;e--;){var b=a+g[e].dataIndx,f=c.length;if(f&&c[0].hasOwnProperty(b))for(;f--;)delete c[f][b]}}};var m={get_date:function(g){var c;return g?isNaN(c=Date.parse(g))?0:c:0},sort_number:function(g,c,a,e){g=g[a];c=c[a];return((g?1*g:0)-(c?1*c:0))*e},
sort_date:function(g,c,a,e){g=g[a];c=c[a];g=g?Date.parse(g):0;c=c?Date.parse(c):0;return(g-c)*e},sort_date_fast:function(g,c,a,e){return(g[a]-c[a])*e},sort_dataType:function(g,c,a,e,b){return b(g[a],c[a])*e},sort_sortType:function(g,c,a,e,b){return b(g,c,a)*e},sort_string:function(g,c,a,e){g=g[a];c=c[a];a=0;g=g?g:"";c=c?c:"";g>c?a=1:g<c&&(a=-1);return a*e},sort_locale:function(g,c,a,e){g=g[a];c=c[a];return(g?g:"").localeCompare(c?c:"")*e},sort_bool:function(g,c,a,e){g=g[a];c=c[a];a=0;if(g&&!c||!1===
g&&null===c)a=1;else if(c&&!g||!1===c&&null===g)a=-1;return a*e}};pq.sortObj=m})(jQuery);
(function(k){function m(a){this.that=a;this.mc=null;var b=this,c=a.options;this.DM=c.dataModel;a.on("dataReady columnOrder groupShowHide",function(a,d){c.mergeCells&&"pager"!==d.source&&b.init()})}function g(a,b,c){var g=0,d=a.length;for(c=c>d?d:c;b<c;b++)!0!==a[b].hidden&&g++;return g}function c(a,b,c){var g=0,d=a.length;for(c=c>d?d:c;b<c;b++)!0!==a[b].pq_hidden&&g++;return g}k.paramquery.cMerge=m;var a=m.prototype=new k.paramquery.cClass;a.init=function(){for(var a=this.that,b=a.colModel,f=a.options.mergeCells||
[],l=a.get_p_data(),d=[],k=[],n=0,h=f.length;n<h;n++){var p=f[n],m=p.r1,r=m,s=l[m],u=p.c1,t=u,y=b[u],v=p.rc,z=p.cc;if(y&&s){if(y.hidden)a:{for(t=u;t<u+z;t++){y=b[t];if(!y){t=-1;break a}if(!y.hidden)break a}t=void 0}y=g(b,u,u+z);if(s.pq_hidden)a:{for(r=m;r<m+v;r++){s=l[r];if(!s){r=-1;break a}if(!s.pq_hidden)break a}r=void 0}s=c(l,m,m+v);if(!(1>s||1>y))for(d.push({r1:m,c1:u,rc:v,cc:z,e_rc:s,e_cc:y}),k[r]=k[r]||[],k[r][t]={show:!0,rowspan:s,colspan:y,o_rowspan:v,o_colspan:z,style:p.style,cls:p.cls,attr:p.attr,
r1:m,c1:u,v_r1:r,v_c1:t},p={show:!1,r1:m,c1:u,v_r1:r,v_c1:t},s=m;s<m+v;s++)for(k[s]=k[s]||[],y=u;y<u+z;y++)if(s!=r||y!=t)k[s][y]=p}}a._mergeCells=0<k.length;this.mc=k;this.mc2=d};a.isHidden=function(a,b){var c,g=this.mc;return g&&g[a]&&(c=g[a][b])&&!c.show?!0:!1};a.setData=function(a,b,c){var g,d=this.mc;d[a]&&(g=d[a][b])&&(g.data=c)};a.getData=function(a,b,c){var g,d=this.mc;if(d[a]&&(g=d[a][b]))return(a=g.data)?a[c]:null};a.removeData=function(a,b,c){var g,d=this.mc;d&&d[a]&&(g=d[a][b])&&(a=g.data)&&
(a[c]=null)};a.ismergedCell=function(a,b){var c=this.mc,g;return c&&c[a]&&(g=c[a][b])?(c=c[g.v_r1][g.v_c1],a==c.r1&&b==c.c1?{rowspan:c.o_rowspan,colspan:c.o_colspan}:!0):!1};a.isRootCell=function(a,b,c){var g=this.mc,d;if(g&&g[a]&&(d=g[a][b])){if("o"==c)return a==d.r1&&b==d.c1;var k=d.v_r1;d=d.v_c1;if("a"==c)return c=g[k][d],c.a_r1==a&&c.a_c1==b;if(k==a&&d==b)return c=g[k][d],{rowspan:c.rowspan,colspan:c.colspan}}};a.getRootCell=function(a,b,c){var g=this.that,d=this.mc,k;if(d&&d[a]&&(k=d[a][b])){"a"==
c?(a=k.v_r1,b=k.v_c1,c=d[a][b],c.a_r1&&(a=c.a_r1,b=c.a_c1)):"o"==c?(a=k.r1,b=k.c1):(a=k.v_r1,b=k.v_c1);c=g.colModel[b];var d=g.rowIndxOffset,n=a-d;0>n&&(n=0,a=d);return{rowIndxPage:n,colIndx:b,column:c,dataIndx:c.dataIndx,rowData:g.pdata[n],rowIndx:a,rowspan:k.rowspan,colspan:k.colspan}}return g.normalize({rowIndx:a,colIndx:b})};a.inflateRange=function(a,b,c,g){var d=this.that,k=!1,n=d.options,n=n.groupModel.on?d.rowIndxOffset+d.pdata.length-1:n.dataModel.data.length-1,d=d.colModel.length-1,h=this.mc2;
if(!h)return[a,b,c,g];var p=0,m=h.length;a:for(;p<m;p++){var r=h[p],s=r.r1,u=r.c1,t=s+r.rc-1,r=u+r.cc-1,t=t>n?n:t,r=r>d?d:r,y=s<=c&&t>c,v=u<b&&r>=b,z=u<=g&&r>g;if((s<a&&t>=a||y)&&r>=b&&u<=g||(v||z)&&t>=a&&s<=c){k=!0;a=s<a?s:a;b=u<b?u:b;c=t>c?t:c;g=r>g?r:g;break a}}return k?this.inflateRange(a,b,c,g):[a,b,c,g]};k.paramquery.pqGrid.prototype.calcVisibleRows=c;a.renderCell=function(a){var b=this.that,f=a.rowIndx,l=a.rowIndxPage,d=a.colIndx,k,n=this.mc,h;if(n[f]&&(h=n[f][d])){var p=h.v_r1,m=h.v_c1;k=
h.r1;var r=h.c1,s=b.options,u=b.colModel,t=b.rowIndxOffset,y=s.freezeCols,v=(s=s.freezeRows)?s+t:0,z=b.initH,C=b.initV;if(h.show||d==m&&l==C&&p>=v||d==m&&f==C&&p>=v||f==p&&d==z&&m>=y||f==C&&d==z&&m>=y&&p>=v){var B=k-t,l=b.pdata,b=b.get_p_data(),w=g(u,0,y);h=c(l,0,s);k={rowData:b[k],rowIndx:k,colIndx:r,column:u[r],rowIndxPage:B};n=n[p][m];r=n.colspan;B=n.rowspan;y&&d<y&&d+r>w?(m=r-g(u,y,z),u=g(u,d,y),r=Math.max(m,u)):r-=g(u,m,d);s&&f<v&&f+B>h+t?(p=B-c(l,s,C),t=c(l,f-t,s),B=Math.max(p,t)):B-=c(b,p,
f);n.a_r1=f;n.a_c1=d;k.rowspan=B;k.colspan=r;k.style=n.style;k.attr=n.attr;k.cls=n.cls}else return null}return k?k:a};a.getMergeCells=function(a,b,c){for(var g=this.that,d=g.options.mergeCells,k,n,g=g.rowIndxOffset,h=g+c,p=[],m=d?d.length:0,r=0;r<m;r++)if(c=d[r],k=c.r1,n=c.c1,!b||k>=g&&k<h)b&&(k-=g),k+=a,p.push({r1:k,c1:n,r2:k+c.rc-1,c2:n+c.cc-1});return p}})(jQuery);
(function(){var k=window.pq=window.pq||{};k.extend=function(a,c,e){var d=function(){};d.prototype=a.prototype;var d=c.prototype=new d,g=a.prototype,k;for(k in e){var h=g[k],p=e[k];d[k]=h?function(a,b){return function(){this._super=function(){return a.apply(this,arguments)};var c=b.apply(this,arguments);this._super=void 0;return c}}(h,p):p}d.constructor=c;d._base=a;d._bp=function(a){var b=arguments;Array.prototype.shift.call(b);return g[a].apply(this,b)}};var m=k.Range=function(a,c,e,d){if(null==a)throw"invalid param";
this.that=a;if(!1==this instanceof m)return new m(a,c,e,d);this._type=e?e:"range";this.init(c,d)},g=m.prototype;g._areas=[];g.init=function(a,c){c=!1!==c;if(a)if("function"==typeof a.push)for(var e=0,d=a.length;e<d;e++)this.init(a[e],c);else if(e=this._normal(a,c))d=this._areas,d.length?d.push(e):this._areas=[e]};g.address=function(){this.dirty&&this.refresh();return this._areas};g.areas=function(a){this.dirty&&this.refresh();var c=this.that,e=this._areas,e=null==a?e:e[a];return k.Range(c,e,"area")};
g.merge=function(a){a=a||{};var c=this.that,e=c.options.mergeCells,d,g,k=this._areas[0];k&&(d=k.r2-k.r1+1,g=k.c2-k.c1+1,1<d||1<g)&&(k.rc=d,k.cc=g,e.push(k),!1!==a.refresh&&c.refreshView())};g.unmerge=function(a){a=a||{};var c=this.that,e=c.options.mergeCells,d=this._areas[0];if(d){for(var g=0;g<e.length;g++){var k=e[g];if(k.r1==d.r1&&k.c1==d.c1){e.splice(g,1);break}}!1!==a.refresh&&c.refreshView()}};g.hide=function(a){a=a||{};for(var c=this.that,e=c.colModel,d=c.get_p_data(),g=this._areas,k=0,h=g.length;k<
h;k++){var p=g[k],m=p.type,r=p.r1,s=p.r2,u=p.c1,p=p.c2;if("column"==m)for(m=u;m<=p;m++)e[m].hidden=!0;else if("row"==m)for(m=r;m<=s;m++)d[m].pq_hidden=!0}!1!==a.refresh&&c.refreshView()};g.unhide=function(a){a=a||{};for(var c=this.that,e=c.colModel,d=c.get_p_data(),g=this._areas,k=0,h=g.length;k<h;k++){var p=g[k],m=p.type,r=p.r1,s=p.r2,u=p.c1,p=p.c2;if("column"==m)for(m=u;m<=p;m++)e[m].hidden=!1;else if("row"==m)for(m=r;m<=s;m++)d[m].pq_hidden=!1}!1!==a.refresh&&c.refreshView()};g.select=function(){var a=
this.that,c=a.iSelection,e=c._areas[0],d=this._areas,g=d[0];if(!g)return this;var k=g.r1,h=g.c1;if(c.dirty||1!=d.length||"block"!=d[0].type||!e||"cell"!=e.type&&"block"!=e.type||k!=e.r1||h!=e.c1)for(c.removeAll({trigger:!1}),k=0,h=d.length;k<h;k++)c.add(d[k],!1);else{var m=e.r1,A=e.c1,r=e.r2,e=e.c2,s=g.r2,g=g.c2,a=a.iCells;if(s==r&&g==e)return this;g>e?a.selectBlock({range:{r1:k,c1:e+1,r2:s,c2:g}}):g<e&&a.selectBlock({range:{r1:Math.max(k,m),c1:g+1,r2:Math.max(s,r),c2:e},remove:!0});s>r?a.selectBlock({range:{r1:r+
1,c1:h,r2:s,c2:g}}):s<r&&a.selectBlock({range:{r1:s+1,c1:Math.max(h,A),r2:r,c2:Math.max(g,e)},remove:!0});c._areas=d}c._trigger();return this};g.resize=function(a,c){var e=this._areas[0];return m(this.that,{r1:e.r1,c1:e.c1,rc:a,cc:c})};g.cut=function(a){a=a||{};a.cut=!0;return this.copy(a)};g.copy=function(a){a=a||{};this.dirty&&this.refresh();var c=this.that,e=a.dest,d=a.cut?!0:!1,g=null==a.copy?!0:a.copy,k=a.source||(d?"cut":"copy"),h=null==a.history?!0:a.history,m=null==a.allowInvalid?!0:a.allowInvalid,
A=[],r=[],s=c.get_p_data(),u=c.colModel,t=c.readCell,y=c.iMerge,v=this._areas;if(v.length){var z=this._areas[0],C=z.type,B=z.r1,w=z.c1,x="cell"==C?B:z.r2,z="cell"==C?w:z.c2,D=0;do{for(;B<=x;B++){for(var E=[],F=s[B],H={},I={},P=w;P<=z;P++){var L=u[P],O=L.dataIndx;if(!1!==L.copy){var N=F[O];g&&E.push(t(F,L,y,B,P));d&&(H[O]=void 0,I[O]=N)}}d&&A.push({rowIndx:B,rowData:F,oldRow:I,newRow:H,type:"update"});E=E.join("\t");r.push(E)}D++;z=v[D];if("row"==C&&z&&"row"==z.type)B=z.r1,w=z.c1,x=z.r2,z=z.c2;else break}while(1);
g&&(E=r.join("\n"),a.clip?(a=a.clip,a.val(E),a.select()):c._setGlobalStr(E));e?c.paste({dest:e,rowList:A,history:h,allowInvalid:m}):d&&!1!==c._digestData({rowList:A,source:k,history:h,allowInvalid:m})&&c.refresh({source:"cut"})}};g.clear=function(){return this.copy({copy:!1,cut:!0,source:"clear"})};g.add=function(a){this.init(a)};g._countArea=function(a){var c=a.r1,e=a.c1,d=a.r2,g=a.c2;return"cell"==a.type?1:(d-c+1)*(g-e+1)};g.count=function(){this.dirty&&this.refresh();for(var a="range"==this._type,
c=this._areas,e=0,d=c.length,g=0;g<d;g++)e+=a?this._countArea(c[g]):1;return e};g.rows=function(a){this.dirty&&this.refresh();var c=this.that,e=[],d=this._areas[0];if(d){var g=d.r1,n=d.c1,h=d.r2,m=d.c2,d=d.type,h=null==a?h:g+a;for(a=null==a?g:g+a;a<=h;a++)e.push({r1:a,c1:n,r2:a,c2:m,type:d})}return k.Range(c,e,"row")};g.columns=function(a){this.dirty&&this.refresh();var c=this.that,e=[],d=this._areas[0];if(d){var g=d.r1,n=d.c1,h=d.r2,m=d.c2,d=d.type,m=null==a?m:n+a;for(a=null==a?n:n+a;a<=m;a++)e.push({r1:g,
c1:a,r2:h,c2:a,type:d})}return k.Range(c,e,"column")};g.cell=function(a,c){this.dirty&&this.refresh();var e=this.that,d=[],g=this._areas[0];g&&(d=g.r1+a,g=g.c1+c,d=[d,g,d,g]);return k.Range(e,d,"cell")};g.item=function(a){this.dirty&&this.refresh();for(var c=0,e=!1,d=this._areas,g=0,k=d.length;g<k;g++){var h=d[g],m=this._countArea(h);if(c+m>a){e=!0;a-=c;break}else c+=m}if(e){if(h)var A=h.r1,r=h.c1,c=h.c2-r+1,A=A+Math.floor(a/c),r=r+a%c;return{r1:A,c1:r}}};g._normal=function(a,c){if(a.type)return a;
if("function"==a.push){for(var e=[],d=0,g=a.length;d<g;d++){var k=this._normal(a[d],c);k&&e.push(k)}return e}var e=this.that,h=e.get_p_data().length-1,m=e.colModel.length-1,d=a.r1,g=a.c1,d=d>h?h:d,g=g>m?m:g,A=a.rc,r=a.cc,k=a.r2,s=a.c2,k=A?d+A-1:k>h?h:k,s=r?g+r-1:s>m?m:s;if(0>m||0>h)return null;d>k&&(A=d,d=k,k=A);g>s&&(A=g,g=s,s=A);if(null!=d||null!=g)return null==d?(d=0,k=h,s=null==s?g:s,h="column"):null==g?(g=0,k=null==k?d:k,s=m,h="row"):null==k?(h="cell",k=d,s=g):h="block",c&&(e=e.iMerge.inflateRange(d,
g,k,s),d=e[0],g=e[1],k=e[2],s=e[3]),a.r1=d,a.c1=g,a.r2=k,a.c2=s,a.type=a.type||h,a};g.value=function(a){a=a||{};a=a.val;this.dirty&&this.refresh();var c=this.that,e=c.colModel,d=[],g=this._areas;if(void 0===a&&g.length){var k=g[0],h=k.r1,m=k.c1;return c.getCellData({rowIndx:h,colIndx:m})}for(var A=0;A<g.length;A++)for(var k=g[A],h=k.r1,m=k.c1,r=k.r2,k=k.c2;h<=r;h++){for(var s=c.normalize({rowIndx:h}),u=s.rowData,s=s.rowIndx,t={},y={},v=m;v<=k;v++){var z=e[v].dataIndx;y[z]=a;t[z]=u[z]}d.push({rowData:u,
rowIndx:s,type:"update",newRow:y,oldRow:t})}d.length&&(c._digestData({rowList:d,source:"range"}),c.refresh())};var c=k.Selection=function(a,e){if(null==a)throw"invalid param";if(!1==this instanceof c)return new c(a,e);this.that=a;var g=this;a.on("dataReady columnOrder addColumn deleteColumn",function(a,b){"pager"!=b.source&&g.renew()});this._base(a,e)},a={renew:function(){var a=this._areas,c=a.length;if(1==c){if(a=a[0],a=this._adjust(a))this.removeAll({trigger:!1}),this.add(a,!1)}else 1<c&&(this.dirty=
!0)},isDirty:function(){return this.dirty}},e=function(a){a.shiftKey&&"pqGrid:mousePQUp"!=a.type||(this._trigger("selectEnd",null,{selection:this.selection()}),this.off("mousePQUp",e),this.off("keyUp",e))};a._trigger=function(){var a=this.that;this.dirty&&this.refresh();a._trigger("selectChange",null,{selection:this});a.off("mousePQUp",e);a.off("keyUp",e);a.on("mousePQUp",e);a.on("keyUp",e)};a.removeAll=function(a){a=a||{};var c=this.that;c.iCells.removeAll({refresh:!0});c.iRows.removeAll({refresh:!0,
all:!0});this._areas=[];!1!==a.trigger&&this._trigger()};g.indexOf=function(a){this.dirty&&this.refresh();a=this._normal(a);var c=a.type,e=a.r1,d=a.c1,g=a.r2;a=a.c2;for(var k=this._areas,h=0,m=k.length;h<m;h++){var A=k[h],r=A;if(c==A.type&&e>=r.r1&&g<=r.r2&&d==r.c1&&a==r.c2)return h}return-1};a.add=function(a,c){var e=this.that,d=this._normal(a,!0),g=e.iCells,e=e.iRows,k=d.r1,h=d.c1,m=d.r2,A=d.type;0<=this.indexOf(d)||("row"==A?(g=this._areas,g.length&&(g=g[g.length-1],A=g.type,"row"==A&&k<=g.r2&&
(this.dirty=!0)),m>k?e.selectRange({range:d}):e.add({rowIndx:k})):"column"==A||"block"==A?g.selectBlock({range:d}):"cell"==A&&g.add({rowIndx:k,colIndx:h}),this._super(d),!1!==c&&this._trigger())};a._adjust=function(a){var c=this.that,e=c.get_p_data().length-1,c=c.colModel.length-1,d=a.r1,g=a.c1,k=a.r2,h=a.c2,k=k>e?e:k,h=h>c?c:h;if(0>c||0>e||d>k||g>h)return null;a.r1=d;a.r2=k;a.c1=g;a.c2=h;return a};g.removeRow=function(a,c){var e=a.r1,d=a.r2,g=this._areas,k=this._areas[c],h=k.r1,m=k.r2;e==h&&d==m?
g.splice(c,1):e>h?(k.r2=e-1,d<m&&(e=this._normal({r1:d+1,r2:m}),g.splice(c+1,0,e))):d<m&&(e>h&&(e=this._normal({r1:d+1,r2:m}),g.splice(c,0,e)),k.r1=d+1)};a.removeRow=function(a,c){var e=this.that,d=this._normal(a),g=this.indexOf(d);-1<g&&"row"==d.type&&d.r1==d.r2&&(e.iRows.remove({rowIndx:d.r1}),this._super(a,g),!1!==c&&this._trigger())};a.selectAll=function(a){a=a||{};var c=this.that,e=a.all,d=e?0:c.rowIndxOffset,g=c.colModel.length-1,k=d+(e?c.options.dataModel.data.length-1:c.pdata.length-1);"cell"==
a.type?(a={r1:d,c1:0},a.r2=k,a.c2=g,c.range(a).select()):(a={r1:d},a.r2=k,e||this.removeRows({all:!1,trigger:!1}),c.iRows.selectRange({range:a}),c=e?[]:this._areas,c.push({r1:d,c1:0,r2:k,c2:g,type:"row"}),this._areas=c,this._trigger());return this};a.removeRows=function(a){a=a||{};var c=a.all;this.that.iRows.removeAll({refresh:!0,all:a.all});c?this._areas=[]:this.refresh();!1!==a.trigger&&this._trigger()};a.refresh=function(){for(var a=this.that,c=[],e=a.colModel.length-1,a=a.get_p_data(),d=0,g=a.length;d<
g;d++){var k=a[d],h;k&&(k.pq_cellselect=void 0,k.pq_rowselect?h?h.r2=d:h={r1:d,r2:d,c1:0,c2:e,type:"row"}:h&&(c.push(h),h=null))}h&&c.push(h);this.dirty=!1;this._areas=c};k.extend(m,c,a)})();
(function(k){function m(a,c,b,f){a.push("<li data-option='",b,"' class='pq-menu-item'>","<label>","<input type='checkbox' ",c[b]?"checked":"","/>",f["strGroup_"+b],"</label></li>")}var g=k.paramquery;pq.aggregate={sum:function(a){for(var c=0,b=a.length,f;b--;)f=a[b],null!=f&&(c+=f-0);return c},avg:function(a,c){return this.sum(a,c,!0)/a.length},max:function(a,c){var b;b=c.dataType;"float"==b||"integer"==b?b=Math.max.apply(Math,a):"date"==b?(a.sort(function(a,b){a=Date.parse(a);b=Date.parse(b);isNaN(a)&&
(a=0);isNaN(b)&&(b=0);return b-a}),b=a[0]):(a.sort(),b=a[a.length-1]);return b},min:function(a,c){var b;b=c.dataType;var f,g;if("integer"==b||"float"==b)b=Math.min.apply(Math,a);else if("date"==b){g=a.length;for(b=[];g--;)(f=a[g])&&b.push({dateO:f,dateP:Date.parse(f)});b.sort(function(a,b){return a.dateP-b.dateP});b=b.length?b[0].dateO:void 0}else a.sort(),b=a[0];return b},count:function(a){return a.length}};var c=(g.cGroupView=function(a){this.that=a;a.options.groupModel.on&&this.init()}).prototype;
c.init=function(){var a,c,b,f;this._init||(this.mc=[],this.tree=[],this.summaryData=[],f=this.that,a=f.options,c=a.groupModel,a=a.bootstrap,b=(a=a.on)?"glyphicon ":"ui-icon ",this.groupRemoveIcon="pq-group-remove "+b+(a?"glyphicon-remove":"ui-icon-close"),this.toggleIcon="pq-group-toggle "+b,f.on("cellClick",this.onCellClick(this)).on("cellKeyDown",this.onCellKeyDown(this,c)).on(!0,"cellMouseDown",this.onCellMouseDown()).on("change",this.onChange(this,c)).on("dataReady",this.onDataReady(this,f)).on("beforeSortDone",
this.onBeforeSort(this,f)).on("columnDragDone",this.onColumnDrag(this)).on("columnOrder",this.onColumnOrder(this)),this._init=!0)};c.onCellClick=function(a){return function(c,b){b.rowData.pq_gtitle&&k(c.originalEvent.target).hasClass("pq-group-icon")&&a.toggle(b.rowIndxPage)}};c.onChange=function(a,c){return function(){a.saveState(c.refreshOnChange)}};c.onCellMouseDown=function(){return function(a,c){c.rowData.pq_gtitle&&k(a.originalEvent.target).hasClass("pq-group-icon")&&a.stopImmediatePropagation()}};
c.onCellKeyDown=function(a,c){return function(b,f){if(f.rowData.pq_gtitle&&0<=k.inArray(f.dataIndx,c.dataIndx)&&b.keyCode==k.ui.keyCode.ENTER)return a.toggle(f.rowIndxPage),!1}};c.showRows=function(){for(var a=this.that.options.dataModel.data,c=0,b=a.length;c<b;c++)a[c].pq_hidden=!1};c.removeGroup=function(a,c){for(var b=this.that.options.groupModel.dataIndx,f=0;f<b.length;f++)if(a==b[f]){b.splice(f,1);break}b.length||(this.showRows(),this.mc.length=0);!1!==c&&this.refreshFull()};c.addGroup=function(a,
c){var b=this.that.options.groupModel;b.dataIndx=b.dataIndx||[];null!=a&&-1==k.inArray(a,b.dataIndx)&&(b.dataIndx.push(a),this.refreshFull())};c._initHeadSortable=function(){this.$header.sortable({axis:"x",distance:3,tolerance:"pointer",cancel:".pq-group-menu",stop:this.onSortable(this,this.that.options)})};c.onColumnDrag=function(a){return function(c,b){var f=b.column.colModel;f&&f.length?a.acceptDrop=!1:a._initHeadDroppable()}};c._initHeadDroppable=function(){var a=this,c=a.that,b=a.$header;b&&
(b.droppable({accept:function(b){return a.acceptDrop},tolerance:"pointer",hoverClass:"pq-drop-hover",drop:a.onDrop(c,a)}),a.acceptDrop=!0)};c.onDrop=function(a,c){return function(b,f){var g=1*f.draggable.attr("pq-col-indx");c.addGroup(a.colModel[g].dataIndx);c.acceptDrop=!1}};c.onSortable=function(a,c){return function(){for(var b=[],f=c.groupModel,g=f.dataIndx,d=[],m=!1,n=k(this).find(".pq-group-item"),h=0;h<n.length;h++){var p=k(n[h]),A=p.data("indx"),p=p.data("dir");g[h]!=A&&(m=!0);b.push(A);d.push(p)}m&&
(f.dataIndx=b,f.dir=d,a.refreshFull())}};c._initHeader=function(a,c){if(this.$header){var b=this.$header,f=b.find(".pq-group-item");b.data("uiSortable")||this._initHeadSortable();f.length||b.append("<span class='pq-group-placeholder'>"+a.strGroup_header+"</span>");c.headerMenu&&this._initHeaderMenu()}};c.createHeader=function(){for(var a=this,c=a.that,b=a.$header,f=c.options,g=f.bootstrap,d=c.columns,m=g.on,n=f.groupModel,h=n.dataIndx,p=h.length;p--;)null==d[h[p]]&&h.splice(p,1);p=h.length;if(n.header&&
n.on){b?b.empty():(b=a.$header=k("<div class='pq-group-header ui-helper-clearfix' ></div>").appendTo(c.$top),b.on("click",".pq-group-item",function(b){b=k(b.target);var c=k(this).data("indx");b.hasClass("pq-group-remove")?a.removeGroup(c):a.groupToggle(c)}));if(p){for(var c=[],A=0;A<p;A++){var r=h[A],s=d[r],u=m?g.groupModel.icon:n.icon;c.push("<div class='pq-group-item' data-indx='",r,"' data-dir='",n.dir[A],"'>","<span class='",a.toggleIcon,n.collapsed[A]?u[1]:u[0],"' ></span>",s.pqtitle||("string"==
typeof s.title?s.title:r),"<span class='",a.groupRemoveIcon,"' ></span></div>")}b[0].innerHTML=c.join("")}a._initHeader(f,n)}else b&&(b.remove(),a.$header=null)};c._initHeaderMenu=function(){for(var a=this.that,c=a.options,b=this.$header,f=["<ul class='pq-group-menu'><li>",a.BS_on?"<span class='glyphicon glyphicon-chevron-left'></span>":"","<ul>"],g=c.groupModel,d=g.menuItems,q=0,n=d.length;q<n;q++)m(f,g,d[q],c);f.push("</ul></li></ul>");b=k(f.join("")).appendTo(b);b.menu({icons:{submenu:"ui-icon-carat-1-w"},
position:{my:"right top",at:"left top"}});b.change(function(b){if("INPUT"==b.target.nodeName){b=k(b.target).closest("li").data("option");var d={};d[b]=!c.groupModel[b];d.refresh=!0;a.groupOption(d)}})};c.setOption=function(){this._init&&(this.refreshColumns(),this.summaryData.length=0,this.tree.length=0,this._initmerge())};c.onDataReady=function(a,c){return function(){a.tree.length=0;var b=c.options.groupModel;b.on&&(b.dataIndx.length?(a.refreshColumns(),a._groupData(),a._initcollapsed(),a._initmerge()):
b.grandSummary&&(a.refreshColumns(),a._groupData()));a.createHeader()}};c.onColumnOrder=function(a){return function(){a._initmerge()}};c.pq_gc_=function(){return"pq_gc_"};c.onBeforeSort=function(a,c){return function(b){if(!b.isDefaultPrevented()){var f=c.options,g=f.groupModel;if(g.on){b=c.columns;for(var d=[],f=f.dataModel.data||[],k=[],m,h,p=g.dataIndx,A=p.length;A--;){var r=p[A];m=b[r];var s=m.groupChange;if(s)for(d.push(m),g=a.pq_gc_()+r,k.push(g),m.sortType=a.sortType(g),h=f.length;h--;)m=f[h],
m[g]=s(m[r])}c.one("sort",function(){if(A=d.length)for(;A--;)d[A].sortType=void 0})}}}};c.sortType=function(a){return function(c,b,f){return c[a]!=b[a]?c[f]-b[f]:0}};c.groupToggle=function(a){var c=this.that.options.groupModel,b=c.collapsed;a=k.inArray(a,c.dataIndx);b[a]=!b[a];this.trigger(null,a);this.refreshView()};c.expandIndx=function(a){var c=this.that,b=!0==a.close;a=a.indx.split(",");var f=a.length,g=this.tree,d,k,m;d=0;var h,c=c.pdata;if(!(f>g.length)){for(var p=0;p<f;p++){h=1*a[p]+d;d=g[p][h];
if(!d){if(0==p)return;break}d=d.rip;if(!b||b&&p==f-1)k=c[d],k.pq_close!=b&&(m=k,k.pq_close=b);k=g[p+1];var A=void 0;if(k){do A=k[h].rip,h++;while(A<d);d=h-1}else d=void 0}m&&(this.trigger(m),this.saveState(!0))}};c._editorSummary=function(a,c){var b=a.summaryOptions;return function(a){var g=a.rowData;if(g.pq_gsummary||g.pq_gtitle){var g=pq.aggregate,d=a.column,m=d.summary,m=m?m.edit:null,n=d.dataType,d=[""];if(-1<k.inArray(a.dataIndx,c.dataIndx)||!c.summaryEdit&&!m||!1===m)return!1;"integer"==n||
"float"==n?n="number":"date"!==n&&(n="string");m=b[n].split(",");a=k.inArray;for(var h in g)-1<a(h,m)&&d.push(h);return 1==d.length?!1:{type:"select",prepend:c.prepend,options:c.options||d,valueIndx:c.valueIndx,labelIndx:c.labelIndx,init:c.init||function(a){var b=a.column.summary,c;b||(b=a.column.summary={});c=b.type;setTimeout(function(){a.$cell.find("select").val(c)},100)},getData:c.getData||function(a){var b=a.column;a=a.$cell.find("select").val();b.summary.type=a;this.one("beforeValidate",function(a,
b){b.allowInvalid=!0;b.track=!1;b.history=!1});return a}}}}};c._renderTitle=function(a,c){var b=this.that,f=a.bootstrap,g=f.on,f=g?f.groupModel.icon:c.icon,d=g?["glyphicon "+f[0],"glyphicon "+f[1]]:["ui-icon "+f[0],"ui-icon "+f[1]];return function(a){var f=a.rowData,g,k,l;if(f.pq_gtitle&&null!=a.cellData)return g=f.pq_close,k=f.pq_level,l=c.title,l=l[k]?l[k]:c.titleDefault,l="function"===typeof l?l.call(b,a):l.replace("{0}",a.cellData).replace("{1}",f.pq_items),{text:(a.Export?"":"<span class='pq-group-icon "+
d[g?1:0]+"'></span>")+l,cls:"pq-group-title-cell"}}};c._renderSummary=function(a){var c=this.that;return function(b){var f=b.rowData,g,d;if(f.pq_gsummary||f.pq_gtitle){f=b.column;g=f.summary.type;d=a.summaryTitle[g];if("function"==typeof d)return d.call(c,b);g=b.formatVal;null==g&&(g=b.cellData,g=null==g?"":g);"number"!=typeof g||f.format||parseInt(g)===g||(g=g.toFixed(2));return d?d.replace("{0}",g):g}}};c.refreshColumns=function(){for(var a=this.that,c=a.options,b=c.groupModel,f=b.on,g=b.fixCols,
d,k,m,h,p=b.dataIndx,A=p.length,r=c.colModel,s=r.length;s--;)m=r[s],m._render&&(m._render==m._renderGT?(delete m._renderGT,delete m._render):m._render==m._renderGS&&(delete m._renderGS,delete m._render)),m._nodrag&&(delete m._nodrag,delete m._nodrop),f&&(h=m.summary)&&h.type&&(k=k||this._renderSummary(c),m._render=m._renderGS=k);c.geditor=f?this._editorSummary(c,b):void 0;if(f)for(s=A-1;0<=s;s--)m=a.getColumn({dataIndx:p[s]}),d=d||this._renderTitle(c,b),m._renderGT=m._render=d;if(g&&f)for(s=0;s<A;s++)c=
a.getColIndx({dataIndx:p[s]}),m=r[c],m._nodrag=m._nodrop=!0,c!=s&&(a.iDragColumns.moveColumn(c,s,!0),a.iColModel.init())};c.refreshFull=function(){this.refreshColumns();this.that.sort()};c.refreshView=function(){this.that.refreshView()};c.expandAll=function(a){a=a||{};a=!0==a.close;var c=this.that.options.groupModel,b=c.collapsed,c=c.dataIndx,f;for(f=0;f<c.length;f++)b[f]=a;this.trigger(null,null,!0);this.refreshFull()};c.showHideRows=function(a,c,b,f){for(var g=[],d=this.that.pdata,k=d.length;a<
k;a++){var m=d[a];if(m.pq_gsummary)if(m.pq_level<c)break;else m.pq_hidden=b;else if(m.pq_gtitle){var h=m.pq_close;h&&g.push({indx:a,level:m.pq_level});if(m.pq_level<=c)break;else m.pq_hidden=f&&!h?!0:b}else m.pq_hidden=b}return g};c.trigger=function(a,c,b){var f=this.that,g=f.options.groupModel,d={};a?(c=a.pq_level,b=a[g.dataIndx[c]],a=a.pq_close,d={level:c,close:a,group:b}):b?(a=g.collapsed[0],d={all:!0,close:a}):null!=c&&(a=g.collapsed[c],d={level:c,close:a});f._trigger("group",null,d)};c.toggle=
function(a){a=this.that.pdata[a];a.pq_close=a.pq_close?!1:!0;this.trigger(a);this.saveState(!0)};c.saveState=function(a){var c=this.that,b=c.options.groupModel;if(b.on&&b.dataIndx.length){for(var b=c.pdata,f=b.length,g=Array(f),d=0;d<f;d++)g[d]=b[d];this.pdata=g;a&&c.refreshView()}};c._initmerge=function(){for(var a=this.that,c=a.options,b=c.groupModel.merge,f=this.tree,g=a.rowIndxOffset,d,k,m,h,p,A=a.colModel.length,r=[],s=a.pdata,u=0;u<f.length;u++){d=f[u];m=a.getColIndx({dataIndx:c.groupModel.dataIndx[u]});
for(var t=0,y=d.length;t<y;t++){k=d[t];h=k.rip;if(null==h)break;b?(k=k.rip2,p=k-h,k=h+g,r.push({r1:k,rc:p,c1:m,cc:1})):(k=h+g,h=s[h],h.pq_close||r.push({r1:k,rc:1,c1:m,cc:A-m}))}}r.length?(this.mc=c.mergeCells=r,a.iMerge.init()):this.mc.length&&(this.mc.length=0,a.iMerge.init())};c._initcollapsed=function(){var a=this.that,c=a.options.groupModel.merge,b=this.pdata,a=a.pdata,f,g,d,k;if(a){for(var m=0,h=a.length;m<h;m++)f=a[m],g=f.pq_gtitle,void 0!==g&&(g=f.pq_level,k=null,b&&(d=(d=b[m])?d.pq_close:
null,null!=d&&(k=f.pq_close=d)),null==k&&(k=f.pq_close),k?this.showHideRows(m+1,g,!0):c&&(f.pq_hidden=!0));delete this.pdata}};c._groupChange=function(a){var c=k.trim,b=this.pq_gc_();return function(f,g,d){if(d.groupChange)return f=f[b+g],null!=f?f:"";f=c(f[g]);return a?f.toUpperCase():f}};c._groupData=function(){var a=this.that,c=pq.aggregate,b=a.pdata,f=a.options,g=f.groupModel,d=g.merge,m=g.grandSummary,n=k.inArray,h=a.colModel,p=h.length,A=this._groupChange(g.ignoreCase),r=b.length,s=g.dataIndx,
u=s.length,t=g.collapsed||[],y=[],v={},z=a.columns,C=[],B,g=g.showSummary||[],w=[];if(b&&0<r){for(var x=u-1;0<=x;x--)g[x]=null!=g[x]?g[x]:!1,t[x]=null!=t[x]?t[x]:!1,w[x]=(w[x+1]?w[x+1]:0)+g[x],C[x]=z[s[x]];for(B=0;B<p;B++){var D=h[B],E=D.dataIndx,F=D.summary;F&&F.type&&-1==n(E,s)&&(y.push({column:D}),v[E]=Array(r-1))}B=y.length;n=[];h=[];p=[];z=[];for(x=0;x<u;x++)z[x]=null,p[x]="",h[x]=[];for(var H=0;H<=r;H++){for(var I=b[H],E=!1,P=null,x=0;x<u;x++){p[x]=H<r?A(I,s[x],C[x]):"";if(z[x]!=p[x]||H==r)E=
!0,null==P&&(P=x);if(E){var D=h[x],L=D[D.length-1];L&&(L.rip2=n.length+w[x]);D.push({rowIndx:H,title:p[x]})}}if(E){if(0<H)for(x=u-1;x>=P;x--){for(var L={},D=h[x],O=D.length-2?D[D.length-2].rip:x,N=D.length-2?D[D.length-2].rowIndx:0,K=D[D.length-1].rowIndx,M=0;M<B;M++){var D=y[M].column,F=D.summary,F=F.type,E=D.dataIndx,G="",G=v[E].slice(N,K),G=c[F](G,D);L[E]=G}if(g[x]){var D={pq_gsummary:!0,pq_level:x,pq_rowcls:"pq-summary-row"},J;for(J in L)D[J]=L[J];n.push(D)}D=n[O];for(J in L)D[J]=L[J];d&&(D.pq_rowcls=
"pq-summary-row");D.pq_items=K-N}if(H==r)break;for(x=0;x<u;x++)z[x]=p[x];for(x=P;x<u;x++)D={pq_gtitle:!0,pq_level:x,pq_close:t[x]},D[s[x]]=p[x],E=n.push(D),D=h[x],D[D.length-1].rip=E-1}if(H==r)break;I.pq_hidden=!1;n.push(I);for(x=0;x<B;x++)D=y[x].column,E=D.dataIndx,v[E][H]=I[E]}this.tree=h;a.pdata=n}else a.dataGM=null;if(m){L={pq_grandsummary:!0,pq_gsummary:!0};for(M=0;M<B;M++)D=y[M].column,F=D.summary,F=F.type,E=D.dataIndx,G=v[E],G=c[F](G,D),L[E]=G;this.summaryData=f.summaryData=[L]}else this.summaryData.length=
0};g=g.pqGrid.prototype;g.group=function(a){this.iGroupView[a.indx?"expandIndx":"expandAll"](a)};g.groupOption=function(a){var c=a.dataIndx,b=c?c.length:0,c=!1,f=this.iGroupView,g=this.options,d=g.groupModel,m=d.dataIndx,n=a.on||null==a.on&&d.on;n&&f.init();n&&(b||m.length)&&(c=!0);if(d.on&&m.length&&(!1===a.on||0===b))for(b=g.dataModel.data,g=0,m=b.length;g<m;g++)b[g].pq_hidden=!1;k.extend(d,a);f.setOption();if(!1!==a.refresh)this[c?"sort":"refreshView"]()}})(jQuery);
